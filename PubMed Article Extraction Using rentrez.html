<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rob Heirene">
<meta name="dcterms.date" content="2023-08-19">

<title>PubMed Article Extraction Using rentrez</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="PubMed Article Extraction Using rentrez_files/libs/clipboard/clipboard.min.js"></script>
<script src="PubMed Article Extraction Using rentrez_files/libs/quarto-html/quarto.js"></script>
<script src="PubMed Article Extraction Using rentrez_files/libs/quarto-html/popper.min.js"></script>
<script src="PubMed Article Extraction Using rentrez_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="PubMed Article Extraction Using rentrez_files/libs/quarto-html/anchor.min.js"></script>
<link href="PubMed Article Extraction Using rentrez_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="PubMed Article Extraction Using rentrez_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="PubMed Article Extraction Using rentrez_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="PubMed Article Extraction Using rentrez_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="PubMed Article Extraction Using rentrez_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#preamble" id="toc-preamble" class="nav-link active" data-scroll-target="#preamble">Preamble</a></li>
  <li><a href="#load-packages" id="toc-load-packages" class="nav-link" data-scroll-target="#load-packages">Load packages</a></li>
  <li><a href="#behavioural-addictions" id="toc-behavioural-addictions" class="nav-link" data-scroll-target="#behavioural-addictions">Behavioural addictions</a></li>
  <li><a href="#gambling-addiction" id="toc-gambling-addiction" class="nav-link" data-scroll-target="#gambling-addiction">Gambling addiction</a></li>
  <li><a href="#gaming-addiction" id="toc-gaming-addiction" class="nav-link" data-scroll-target="#gaming-addiction">Gaming addiction</a></li>
  <li><a href="#work-addiction" id="toc-work-addiction" class="nav-link" data-scroll-target="#work-addiction">Work addiction</a></li>
  <li><a href="#exercise-addiction" id="toc-exercise-addiction" class="nav-link" data-scroll-target="#exercise-addiction">Exercise addiction</a></li>
  <li><a href="#shopping-addiction" id="toc-shopping-addiction" class="nav-link" data-scroll-target="#shopping-addiction">Shopping addiction</a></li>
  <li><a href="#social-media-addiction" id="toc-social-media-addiction" class="nav-link" data-scroll-target="#social-media-addiction">Social media addiction</a></li>
  <li><a href="#internet-addiction" id="toc-internet-addiction" class="nav-link" data-scroll-target="#internet-addiction">Internet addiction</a></li>
  <li><a href="#smart-phone-addiction" id="toc-smart-phone-addiction" class="nav-link" data-scroll-target="#smart-phone-addiction">Smart phone addiction</a></li>
  <li><a href="#cybersex-addiction" id="toc-cybersex-addiction" class="nav-link" data-scroll-target="#cybersex-addiction">Cybersex addiction</a></li>
  <li><a href="#sex-addiction" id="toc-sex-addiction" class="nav-link" data-scroll-target="#sex-addiction">Sex addiction</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">PubMed Article Extraction Using rentrez</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Rob Heirene </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 19, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="preamble" class="level2">
<h2 class="anchored" data-anchor-id="preamble">Preamble</h2>
<p>The criteria for inclusion are:</p>
<ul>
<li>The article must be registered/stored on the PubMed database (a list of journals indexed on PubMed can be found <a href="https://ftp.ncbi.nih.gov/pubmed/J_Medline.txt">here</a>).</li>
</ul>
<!-- -->
<ul>
<li><p>The article must focus on a behaviour which has been studied within the context of addiction (e.g., gambling, exercise, video gaming); the behaviour can be the primary focus or a sub-component of a larger paper (e.g., a study on alcohol use which also measures symptoms of gambling disorder)</p></li>
<li><p>The article must use language in the title and/or abstract that indicate that the behaviour is discussed in the context of or as an addiction. This could include, but is not restricted to:</p>
<ul>
<li><p>the direct use of the terms “addiction” or “dependence”</p></li>
<li><p>the use of accepted (DSM/ICD) or previosuly accepted (e.g., “pathological gambling”) diagnostic terms (e.g., “gambling disorder”)</p></li>
<li><p>the use of a term or phrase which is not a clinically/medically accepted diagnostic term (i.e., it is not included in any nosological system), but is used in the research area as such (e.g., “compulsory exercise”, “workaholism”)</p></li>
<li><p>the use of measures of “addiction” to the behaviour (e.g., “Exercise Addiction Inventory”) or measures of the symptoms of addiction (e.g., craving, withdrawal) that are then discussed in the context of a disorder or addiction</p></li>
</ul></li>
<li><p>There are no restrictions on date of publication, study designs, article types (e.g., commentaries, empirical studies etc.)</p></li>
<li><p>There are no restrictions on language publication, provided the title and abstract are presented in English as well as the primary language.</p></li>
</ul>
<p>The above criteria were used to design of the search terms/strings employed to extract data from the PubMed database (the search string for each behavioural addiction is included before the code used to extract the associated studies). A manual scan of all return studies for relevance according to the above criteria has been made.</p>
<p>https://www.youtube.com/watch?v=yzTuBuRdAyA</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Code blocks
</div>
</div>
<div class="callout-body-container callout-body">
<p>Please note that any code chunks presented in this document that, when executed, scrape or pull data from PubMed, are specifically set so that they do not execute when this document renders. Thus, these code chunks, as seen here, simply represent documentation rather than working code. This is because extracting this data (particularly for “addictions” where there are thousands of studies [e.g., gambling]) can take a substantial amount of time and therefore it would take 30-40 minutes every time this document renders if these code chunks executed.</p>
<p>I only note this for anyone wanting to reproduce this analysis who tries to run the entire script by rendering the document. It’s also important as the date at the top of this document may not be the latest date of data extraction (it is only the last date this was rendered).</p>
<p>The latest dates of data extraction for each “behavioural addiction” are below:</p>
<ul>
<li>Behavioural addiction: 11/07/2023</li>
<li>Gambling: 10/07/2023</li>
<li>Gaming: 10/07/2023</li>
<li>Work: 10/07/2023</li>
<li>Exercise: 10/07/2023</li>
<li>Social media: 19/08/2023</li>
<li>Smartphones: 19/08/2023</li>
</ul>
</div>
</div>
<p>https://cran.r-project.org/web/packages/rentrez/vignettes/rentrez_tutorial.html</p>
</section>
<section id="load-packages" class="level2">
<h2 class="anchored" data-anchor-id="load-packages">Load packages</h2>
<div class="cell">
<details>
<summary>Set-up code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install and load the groundhog package to ensure consistency of the package versions used here:</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("groundhog") # Install</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(groundhog) <span class="co"># Load</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># List desired packages:</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'rentrez'</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>              <span class="st">'dplyr'</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>              <span class="st">'tidyr'</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>              <span class="st">'purrr'</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>              <span class="st">'rvest'</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>              <span class="st">'stringr'</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Load desired package with versions specific to project start date:</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">groundhog.library</span>(packages, <span class="st">"2023-06-07"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="behavioural-addictions" class="level2">
<h2 class="anchored" data-anchor-id="behavioural-addictions">Behavioural addictions</h2>
<section id="extract-studies-and-perform-a-basic-clean-of-dataset" class="level4">
<h4 class="anchored" data-anchor-id="extract-studies-and-perform-a-basic-clean-of-dataset">Extract studies and perform a basic clean of dataset</h4>
<p><strong>Notes pre-search:</strong> MeSH terms were pretty useless here (unlike the more specific behavioural addiction searches used below) so I relied on my knowledge of the field for terms to use.</p>
<p><strong>Actual search used:</strong> ((((“behavioural addiction”[Title/Abstract]) OR (“behavioral addiction”[Title/Abstract])) OR (“non-drug addiction”[Title/Abstract])) OR (“non-substance addiction”[Title/Abstract])) OR (“non-chemical addiction”[Title/Abstract])</p>
<p><strong>Manual search results:</strong> <a href="https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%28%28%22behavioural+addiction%22%5BTitle%2FAbstract%5D%29+OR+%28%22behavioral+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22non-drug+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22non-substance+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22non-chemical+addiction%22%5BTitle%2FAbstract%5D%29&amp;size=200">link</a>. PubMed format display can be found <a href="https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%28%28%22behavioural+addiction%22%5BTitle%2FAbstract%5D%29+OR+%28%22behavioral+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22non-drug+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22non-substance+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22non-chemical+addiction%22%5BTitle%2FAbstract%5D%29&amp;format=pubmed&amp;size=200">here</a></p>
<p><strong>Notes post-search:</strong> I manually scanned the results returned on the PubMed site for relevance and all appeared to meet the inclusion criteria. There will certainly be one of overlap between the studies returned from this search and the search is specific to individual behavioural addictions.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  Clean environment:</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># rm(list = ls())</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the search terms/string:</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>search_term_behav_addictions <span class="ot">&lt;-</span> <span class="st">'(((("behavioural addiction"[Title/Abstract]) OR ("behavioral addiction"[Title/Abstract])) OR ("non-drug addiction"[Title/Abstract])) OR ("non-substance addiction"[Title/Abstract])) OR ("non-chemical addiction"[Title/Abstract])'</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use entrez_search to get the IDs of the articles:</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>search_results_behav_addictions <span class="ot">&lt;-</span> <span class="fu">entrez_search</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">term=</span>search_term_behav_addictions, <span class="at">retmax=</span><span class="dv">20000</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>id_list_behav_addictions <span class="ot">&lt;-</span> search_results_behav_addictions<span class="sc">$</span>ids</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Split id list into chunks of 100 for chunk/batches:</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>chunks <span class="ot">&lt;-</span> <span class="fu">split</span>(id_list_behav_addictions, <span class="fu">ceiling</span>(<span class="fu">seq_along</span>(id_list_behav_addictions)<span class="sc">/</span><span class="dv">100</span>))</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch details for each chunk of articles:</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>article_details_behav_addictions <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(chunks, <span class="cf">function</span>(ids) {</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">entrez_fetch</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">id=</span>ids, <span class="at">rettype=</span><span class="st">"medline"</span>, <span class="at">retmode=</span><span class="st">"text"</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split the articles into individual articles:</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(articles, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process each article:</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(articles, <span class="cf">function</span>(article) {</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Split the article into lines:</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    lines <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(article, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the details we're interested in:</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>    details_behav_addictions <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">PMID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">DP =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">TI =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">LID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">AB =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">FAU =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">AD =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">LA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">PT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">TA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">COIS =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">JT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert the list of details into a one-row data frame:</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    details_df_behav_addictions <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(details_behav_addictions)</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(details_df_behav_addictions)</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the results:</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>article_details_behav_addictions <span class="sc">%&gt;%</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's remove the identifiers at the beginning of each data point:</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>rep_str <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'PMID- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'DP  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TI  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LID - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AB  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>             <span class="st">'FAU - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AD  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LA  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'PT  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TA  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>             <span class="st">'COIS- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'JT  - '</span> <span class="ot">=</span> <span class="st">''</span>)</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>results_behav_addictions <span class="ot">&lt;-</span> article_details_behav_addictions <span class="sc">%&gt;%</span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">str_replace_all</span>(., rep_str))) <span class="sc">%&gt;%</span> <span class="co"># Remove identifiers</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now separate the date year and month/day info:</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(DP, <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Month"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st"> "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.numeric</span>(Year)) <span class="sc">%&gt;%</span> <span class="co"># Convert Year to numeric</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>( <span class="co"># Let's also provide more descriptive names for each of the columns</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Title"</span> <span class="ot">=</span> <span class="st">"TI"</span>, </span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>         <span class="st">"DOI"</span> <span class="ot">=</span> <span class="st">"LID"</span>, </span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Abstract"</span> <span class="ot">=</span> <span class="st">"AB"</span>, </span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Full_Author_Name"</span> <span class="ot">=</span> <span class="st">"FAU"</span>, </span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Author_Address"</span> <span class="ot">=</span> <span class="st">"AD"</span>, </span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Language"</span> <span class="ot">=</span> <span class="st">"LA"</span>, </span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Publication_Type"</span> <span class="ot">=</span> <span class="st">"PT"</span>, </span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_name_short"</span> <span class="ot">=</span> <span class="st">"TA"</span>,</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Conflict_of_Interest_Statement"</span> <span class="ot">=</span> <span class="st">"COIS"</span>,</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_Title"</span> <span class="ot">=</span> <span class="st">"JT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the initial results before proceeding so we can't lose them!</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_behav_addictions, <span class="st">"Data extraction/behav_addictions_data.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="extract-full-title-using-rvest" class="level4">
<h4 class="anchored" data-anchor-id="extract-full-title-using-rvest">Extract full title using <code>rvest</code></h4>
<p>Okay, so I’m struggling to get the <code>rentrez</code> package to extract the full, non-truncated titles of articles. I want to make sure we have these so we can accurately identify duplicates, so we’re going to use the <code>rvest</code> package to scrape the titles returned from a manual search in PubMed (it uses the URL from this search), then join the two datasets using the PMID, retaining the title from this new dataset.</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Using the <code>revest</code> package
</div>
</div>
<div class="callout-body-container callout-body">
<p>It’s important to note that, unlike using the <code>rentrez</code> package X uses data via PubMed’s API, using the <code>rvest</code> package involves scraping the PubMed website for information, and there are many important ethical and legal considerations surrounding web scraping (some of which vary from country to country) that you may need to consider before proceeding. See, for example, this useful <a href="https://www.researchgate.net/profile/Vlad-Krotov/publication/324907302_Legality_and_Ethics_of_Web_Scraping/links/5aea622345851588dd8287dc/Legality-and-Ethics-of-Web-Scraping.pdf">paper</a>.</p>
</div>
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add search URL:</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>url_behav_addictions_rvest <span class="ot">&lt;-</span> <span class="st">"https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%28%28%22behavioural+addiction%22%5BTitle%2FAbstract%5D%29+OR+%28%22behavioral+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22non-drug+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22non-substance+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22non-chemical+addiction%22%5BTitle%2FAbstract%5D%29&amp;size=200"</span> <span class="co"># 856 results on 11/07/2023. </span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and parse the webpage:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>webpage_behav_addictions_rvest <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_behav_addictions_rvest)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the total number of search results:</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>results_count_behav_addictions <span class="ot">&lt;-</span> webpage_behav_addictions_rvest <span class="sc">%&gt;%</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">".results-amount .value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">","</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the number of pages:</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>results_per_page_behav_addictions <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>total_pages_behav_addictions <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(results_count_behav_addictions[<span class="dv">1</span>] <span class="sc">/</span> results_per_page_behav_addictions)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results_count_behav_addictions and total_pages_behav_addictions:</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results_count_behav_addictions)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(total_pages_behav_addictions)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty data frame:</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>results_behav_addictions_rvest <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each page and scrape the data:</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (page <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span>(total_pages_behav_addictions <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the page parameter in the URL for the current page</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  current_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(url_behav_addictions_rvest, <span class="st">"&amp;page="</span>, page <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read and parse the current webpage:</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>  current_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(current_url)</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract title:</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  Title <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    current_page <span class="sc">%&gt;%</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_nodes</span>(<span class="st">".docsum-title"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Error extracting title"</span>, page <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">length</span>(Title))  <span class="co"># Return a vector of NAs with the same length as Title</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the PMID:</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>  pmid <span class="ot">&lt;-</span> current_page <span class="sc">%&gt;%</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".docsum-pmid"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a data frame with the extracted data:</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>  current_results_behav_addictions <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Title =</span> Title,</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">PMID =</span> pmid)</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the current results with the previous results:</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>  results_behav_addictions_rvest <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results_behav_addictions_rvest, current_results_behav_addictions)</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Introduce a delay to avoid overloading the server:</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>  sleep_time <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> <span class="dv">5</span>, <span class="at">max =</span> <span class="dv">15</span>)</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(sleep_time)</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the extracted data:</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as_tibble</span>(results_behav_addictions_rvest))</span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the titles results before proceeding so we can't lose them!</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_behav_addictions_rvest, <span class="st">"Data extraction/behav_addictions_titles.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="refine-dataset" class="level4">
<h4 class="anchored" data-anchor-id="refine-dataset">Refine dataset</h4>
<p>Now we need to identify and remove any duplicates, irrelevant studies, or entries with any other issues (e.g., those that turn out to be books)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in first dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>results_behav_addictions<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/behav_addictions_data.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in second dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>results_behav_addictions_rvest<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/behav_addictions_titles.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge the two datasets:</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>results_behav_addictions2 <span class="ot">&lt;-</span> results_behav_addictions <span class="sc">%&gt;%</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Title_trunc"</span> <span class="ot">=</span> <span class="st">"Title"</span>) <span class="sc">%&gt;%</span> <span class="co"># Designate the truncated title from the primary dataset</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">merge</span>(results_behav_addictions_rvest, <span class="at">by =</span> <span class="st">"PMID"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Title) <span class="sc">%&gt;%</span> <span class="co"># Place full title first for ease</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 865 × 14
   Title            PMID  Year Month Title_trunc DOI   Abstract Full_Author_Name
   &lt;chr&gt;           &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           
 1 "[Alternating… 9.04e6  1996 Jul-… "[Alternat… &lt;NA&gt;  "The co… Bayle, F J; Chi…
 2 "Psychology o… 9.12e6  1997 Feb   "Psycholog… &lt;NA&gt;  "This p… Griffiths, M    
 3 "Subtype-sele… 1.09e7  2000 Jul   "Subtype-s… &lt;NA&gt;  "Neuron… Francis, M M; V…
 4 "The neurobio… 1.14e7  2001 Jul   "The neuro… &lt;NA&gt;  "Despit… Potenza, M N    
 5 "A factor-ana… 1.22e7  2002 Aug   "A factor-… &lt;NA&gt;  "Eviden… Charlton, John P
 6 "Genetics of … 1.26e7  2003 Spri… "Genetics … &lt;NA&gt;  "Pathol… Ibanez, Angela;…
 7 "Benzodiazepi… 1.27e7  2003 May   "Benzodiaz… &lt;NA&gt;  "AIMS: … de las Cuevas, …
 8 "[Excessive c… 1.51e7  2004 Mar   "[Excessiv… &lt;NA&gt;  "Compul… Grusser, Sabine…
 9 "The behavior… 1.58e7  2004 Dec   "The behav… &lt;NA&gt;  "From t… Rachlin, Howard 
10 "Substance ab… 1.70e7  2006 Sep   "Substance… &lt;NA&gt;  "BACKGR… Kertesz, Stefan…
# ℹ 855 more rows
# ℹ 6 more variables: Author_Address &lt;chr&gt;, Language &lt;chr&gt;,
#   Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check results:</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_behav_addictions2)</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check dupliactes based on PMIDs:</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>results_behav_addictions2 <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PMID) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 14
# Groups:   PMID [0]
# ℹ 14 variables: Title &lt;chr&gt;, PMID &lt;int&gt;, Year &lt;int&gt;, Month &lt;chr&gt;,
#   Title_trunc &lt;chr&gt;, DOI &lt;chr&gt;, Abstract &lt;chr&gt;, Full_Author_Name &lt;chr&gt;,
#   Author_Address &lt;chr&gt;, Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># There is no evidence of clear PMID duplicates</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show duplicate titles:</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>results_behav_addictions2 <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title) <span class="sc">%&gt;%</span> </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 14
# Groups:   Title [1]
  Title             PMID  Year Month Title_trunc DOI   Abstract Full_Author_Name
  &lt;chr&gt;            &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           
1 Commentary on:… 2.66e7  2015 Sep   "Commentar… 10.1… "This c… Spada, Marcanto…
2 Commentary on:… 2.66e7  2015 Sep   "Commentar… 10.1… "This c… Blaszczynski, A…
# ℹ 6 more variables: Author_Address &lt;chr&gt;, Language &lt;chr&gt;,
#   Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># **This is actually two seperate commentaries on the same article**</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  Okay, now we are confident that we have a clean dataset, let's explore!</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of the Year  variable:</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(results_behav_addictions2<span class="sc">$</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1994    2016    2018    2018    2021    2023 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of publications per year:</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(results_behav_addictions2<span class="sc">$</span>Year,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1960</span>,<span class="dv">2023</span>),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="dv">30</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">main =</span> <span class="st">"Papers published per year on 'Behavioural Addictions' (PubMed)"</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlab =</span> <span class="st">"Year"</span>) <span class="co"># Even though the earliest year an article was published is 1994, I've set the range to started 1960 as this is where the starting point is across all other behavioural addiction searches.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PubMed-Article-Extraction-Using-rentrez_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of separate journals:</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>results_behav_addictions2 <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 275 × 1
   Journal_name_short                        
   &lt;chr&gt;                                     
 1 Acta Biomed                               
 2 Acta Derm Venereol                        
 3 Acta Med Port                             
 4 Acta Psychol (Amst)                       
 5 Addict Behav                              
 6 Addict Behav Rep                          
 7 Addict Biol                               
 8 Addiction                                 
 9 Adicciones                                
10 Adv Exp Med Biol                          
11 Alcohol Clin Exp Res                      
12 Am J Addict                               
13 Am J Clin Nutr                            
14 Am J Drug Alcohol Abuse                   
15 Am J Mens Health                          
16 Am J Orthopsychiatry                      
17 Ann Agric Environ Med                     
18 Ann Gen Psychiatry                        
19 Ann N Y Acad Sci                          
20 Annu Rev Nutr                             
21 Appetite                                  
22 Arch Iran Med                             
23 Arch Sex Behav                            
24 Arch Womens Ment Health                   
25 Asian J Gambl Issues Public Health        
26 Asian J Psychiatr                         
27 Aust N Z J Psychiatry                     
28 BMC Psychiatry                            
29 BMC Psychol                               
30 BMC Public Health                         
31 BMJ Open                                  
32 Behav Brain Funct                         
33 Behav Brain Res                           
34 Behav Brain Sci                           
35 Behav Neurosci                            
36 Behav Sci (Basel)                         
37 Biol Psychiatry                           
38 Biol Psychiatry Cogn Neurosci Neuroimaging
39 Biomed Res Int                            
40 Biotechnol Biotechnol Equip               
41 Br J Dermatol                             
42 Br J Gen Pract                            
43 Br J Health Psychol                       
44 Br J Nutr                                 
45 Br J Psychiatry                           
46 Br J Psychol                              
47 Brain Behav                               
48 Brain Behav Immun                         
49 Brain Res                                 
50 Brain Sci                                 
# ℹ 225 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Most popular journals:</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>results_behav_addictions2 <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 275 × 2
   Journal_name_short                                                n
   &lt;chr&gt;                                                         &lt;int&gt;
 1 J Behav Addict                                                  106
 2 Front Psychiatry                                                 56
 3 Addict Behav                                                     39
 4 Int J Environ Res Public Health                                  37
 5 Addiction                                                        28
 6 Front Psychol                                                    27
 7 PLoS One                                                         17
 8 J Gambl Stud                                                     16
 9 Psychiatry Res                                                   16
10 Addict Biol                                                      14
11 Adv Exp Med Biol                                                 12
12 Cyberpsychol Behav Soc Netw                                      10
13 CNS Spectr                                                        9
14 Neurosci Biobehav Rev                                             8
15 Clin Psychol Rev                                                  7
16 Front Behav Neurosci                                              7
17 Addict Behav Rep                                                  6
18 Am J Drug Alcohol Abuse                                           6
19 Compr Psychiatry                                                  6
20 Int J Ment Health Addict                                          6
21 J Addict Dis                                                      6
22 J Clin Med                                                        6
23 Aust N Z J Psychiatry                                             5
24 Cureus                                                            5
25 Drug Alcohol Depend                                               5
26 Eur Addict Res                                                    5
27 Eur Neuropsychopharmacol                                          5
28 Neuropsychopharmacology                                           5
29 Psychol Med                                                       5
30 Sci Rep                                                           5
31 BMC Psychiatry                                                    4
32 Curr Addict Rep                                                   4
33 Curr Psychol                                                      4
34 Ir J Psychol Med                                                  4
35 Nervenarzt                                                        4
36 Prog Neuropsychopharmacol Biol Psychiatry                         4
37 Psychiatr Danub                                                   4
38 Psychiatr Hung                                                    4
39 Psychol Addict Behav                                              4
40 Psychol Rep                                                       4
41 Psychopharmacology (Berl)                                         4
42 Transl Psychiatry                                                 4
43 Z Kinder Jugendpsychiatr Psychother                               4
44 BMC Psychol                                                       3
45 BMC Public Health                                                 3
46 Behav Brain Res                                                   3
47 Behav Sci (Basel)                                                 3
48 Brain Behav                                                       3
49 Bundesgesundheitsblatt Gesundheitsforschung Gesundheitsschutz     3
50 Child Adolesc Psychiatr Clin N Am                                 3
# ℹ 225 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_behav_addictions_sans_duplicates) # Visually inspect results</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now I need to add a label to all of these studies to signify that they Were returned from the behav_addictions search so that we can distinguish them from other studies when we later joined the datasets together:</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>Label <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"behavioural_addictions"</span>, <span class="at">times =</span> <span class="fu">count</span>(results_behav_addictions2))</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>results_behav_addictions_final <span class="ot">&lt;-</span> results_behav_addictions2 <span class="sc">%&gt;%</span> <span class="fu">bind_cols</span>(Label) <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Label =</span> <span class="dv">14</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...15`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 865 × 15
   Title            PMID  Year Month Title_trunc DOI   Abstract Full_Author_Name
   &lt;chr&gt;           &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           
 1 "[Alternating… 9.04e6  1996 Jul-… "[Alternat… &lt;NA&gt;  "The co… Bayle, F J; Chi…
 2 "Psychology o… 9.12e6  1997 Feb   "Psycholog… &lt;NA&gt;  "This p… Griffiths, M    
 3 "Subtype-sele… 1.09e7  2000 Jul   "Subtype-s… &lt;NA&gt;  "Neuron… Francis, M M; V…
 4 "The neurobio… 1.14e7  2001 Jul   "The neuro… &lt;NA&gt;  "Despit… Potenza, M N    
 5 "A factor-ana… 1.22e7  2002 Aug   "A factor-… &lt;NA&gt;  "Eviden… Charlton, John P
 6 "Genetics of … 1.26e7  2003 Spri… "Genetics … &lt;NA&gt;  "Pathol… Ibanez, Angela;…
 7 "Benzodiazepi… 1.27e7  2003 May   "Benzodiaz… &lt;NA&gt;  "AIMS: … de las Cuevas, …
 8 "[Excessive c… 1.51e7  2004 Mar   "[Excessiv… &lt;NA&gt;  "Compul… Grusser, Sabine…
 9 "The behavior… 1.58e7  2004 Dec   "The behav… &lt;NA&gt;  "From t… Rachlin, Howard 
10 "Substance ab… 1.70e7  2006 Sep   "Substance… &lt;NA&gt;  "BACKGR… Kertesz, Stefan…
# ℹ 855 more rows
# ℹ 7 more variables: Author_Address &lt;chr&gt;, Language &lt;chr&gt;,
#   Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Label &lt;chr&gt;, ...15 &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_behav_addictions_final)</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the cleaned results:</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_behav_addictions_final, <span class="st">"Data extraction/behav_addictions_data_cleaned.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="gambling-addiction" class="level2">
<h2 class="anchored" data-anchor-id="gambling-addiction">Gambling addiction</h2>
<section id="extract-studies-and-perform-a-basic-clean-of-dataset-1" class="level4">
<h4 class="anchored" data-anchor-id="extract-studies-and-perform-a-basic-clean-of-dataset-1">Extract studies and perform a basic clean of dataset</h4>
<p><strong>Notes pre-search:</strong> Mesh terms can be found <a href="https://www.ncbi.nlm.nih.gov/mesh/?term=gaming+disorder">here</a>. I tried adding “problem gambling” and it adds around 1,200 more studies, but the overall distribution over time remains very similar.</p>
<ul>
<li>One unavoidable issue with the gambling search is 2 of the 3 gambling-specific journals (International Gambling Studies &amp; Journal of Gambling Issues) are not indexed by PubMed. That said, most behavioural addiction and addiction-focused journals are, fortunately.</li>
</ul>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Add gambling journals?
</div>
</div>
<div class="callout-body-container callout-body">
<p>A simple reminder to look into this.</p>
</div>
</div>
<p><strong>Actual search used:</strong> (“gambling disorder”[Title/Abstract]) OR (“disordered gambling”[Title/Abstract] OR “gambling addiction”[Title/Abstract]) OR (“addicted gambler*”[Title/Abstract]) OR (“pathological gambl*”[Title/Abstract]) OR (“compulsive gambl*”[Title/Abstract]</p>
<p><strong>Manual search results:</strong> <a href="https://pubmed.ncbi.nlm.nih.gov/?term=%28%22gambling+disorder%22%5BTitle%2FAbstract%5D%29+OR+%28%22disordered+gambling%22%5BTitle%2FAbstract%5D+OR+%22gambling+addiction%22%5BTitle%2FAbstract%5D%29+OR+%28%22addicted+gambler*%22%5BTitle%2FAbstract%5D%29+OR+%28%22pathological+gambl*%22%5BTitle%2FAbstract%5D%29+OR+%28%22compulsive+gambl*%22%5BTitle%2FAbstract%5D%29&amp;size=200">link</a></p>
<p><strong>Notes post-search:</strong> I manually inspected the results directly in the PubMed site. Many duplicates that require removal (performed below), but all studies appeared relevant (July 2023).</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  Clean environment:</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the search terms/string:</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>search_term_gambling <span class="ot">&lt;-</span> <span class="st">'("gambling disorder"[Title/Abstract]) OR ("disordered gambling"[Title/Abstract] OR "gambling addiction"[Title/Abstract]) OR ("addicted gambler*"[Title/Abstract]) OR ("pathological gambl*"[Title/Abstract]) OR ("compulsive gambl*"[Title/Abstract])'</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use entrez_search to get the IDs of the articles:</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>search_results_gambling <span class="ot">&lt;-</span> <span class="fu">entrez_search</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">term=</span>search_term_gambling, <span class="at">retmax=</span><span class="dv">20000</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>id_list_gambling <span class="ot">&lt;-</span> search_results_gambling<span class="sc">$</span>ids</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Split id list into chunks of 100 for chunk/batches:</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>chunks <span class="ot">&lt;-</span> <span class="fu">split</span>(id_list_gambling, <span class="fu">ceiling</span>(<span class="fu">seq_along</span>(id_list_gambling)<span class="sc">/</span><span class="dv">100</span>))</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch details for each chunk of articles:</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>article_details_gambling <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(chunks, <span class="cf">function</span>(ids) {</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">entrez_fetch</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">id=</span>ids, <span class="at">rettype=</span><span class="st">"medline"</span>, <span class="at">retmode=</span><span class="st">"text"</span>)</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split the articles into individual articles:</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(articles, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process each article:</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(articles, <span class="cf">function</span>(article) {</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Split the article into lines:</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>    lines <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(article, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the details we're interested in:</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    details_gambling <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">PMID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">DP =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">TI =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">LID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">AB =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">FAU =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">AD =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">LA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">PT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">TA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">COIS =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">JT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert the list of details into a one-row data frame:</span></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>    details_df_gambling <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(details_gambling)</span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(details_df_gambling)</span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the results:</span></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>article_details_gambling <span class="sc">%&gt;%</span></span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's remove the identifiers at the beginning of each data point:</span></span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>rep_str <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'PMID- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'DP  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TI  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LID - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AB  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>             <span class="st">'FAU - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AD  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LA  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'PT  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TA  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>             <span class="st">'COIS- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'JT  - '</span> <span class="ot">=</span> <span class="st">''</span>)</span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a>results_gambling <span class="ot">&lt;-</span> article_details_gambling <span class="sc">%&gt;%</span></span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">str_replace_all</span>(., rep_str))) <span class="sc">%&gt;%</span> <span class="co"># Remove identifiers</span></span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now separate the date year and month/day info:</span></span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(DP, <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Month"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st"> "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.numeric</span>(Year)) <span class="sc">%&gt;%</span> <span class="co"># Convert Year to numeric</span></span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>( <span class="co"># Let's also provide more descriptive names for each of the columns</span></span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Title"</span> <span class="ot">=</span> <span class="st">"TI"</span>, </span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a>         <span class="st">"DOI"</span> <span class="ot">=</span> <span class="st">"LID"</span>, </span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Abstract"</span> <span class="ot">=</span> <span class="st">"AB"</span>, </span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Full_Author_Name"</span> <span class="ot">=</span> <span class="st">"FAU"</span>, </span>
<span id="cb21-70"><a href="#cb21-70" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Author_Address"</span> <span class="ot">=</span> <span class="st">"AD"</span>, </span>
<span id="cb21-71"><a href="#cb21-71" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Language"</span> <span class="ot">=</span> <span class="st">"LA"</span>, </span>
<span id="cb21-72"><a href="#cb21-72" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Publication_Type"</span> <span class="ot">=</span> <span class="st">"PT"</span>, </span>
<span id="cb21-73"><a href="#cb21-73" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_name_short"</span> <span class="ot">=</span> <span class="st">"TA"</span>,</span>
<span id="cb21-74"><a href="#cb21-74" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Conflict_of_Interest_Statement"</span> <span class="ot">=</span> <span class="st">"COIS"</span>,</span>
<span id="cb21-75"><a href="#cb21-75" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_Title"</span> <span class="ot">=</span> <span class="st">"JT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-76"><a href="#cb21-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb21-77"><a href="#cb21-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-78"><a href="#cb21-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the initial results before proceeding so we can't lose them!</span></span>
<span id="cb21-79"><a href="#cb21-79" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_gambling, <span class="st">"Data extraction/gambling_data.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb21-80"><a href="#cb21-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-81"><a href="#cb21-81" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="extract-full-title-using-rvest-1" class="level4">
<h4 class="anchored" data-anchor-id="extract-full-title-using-rvest-1">Extract full title using rvest</h4>
<p>As above, we’re going to use the <code>rvest</code> package to scrape the titles of gambling papers, then join the two datasets using the PMID, retaining the title from this new dataset.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add search URL:</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>url_gambling_rvest <span class="ot">&lt;-</span> <span class="st">"https://pubmed.ncbi.nlm.nih.gov/?term=%28%22gambling+disorder%22%5BTitle%2FAbstract%5D%29+OR+%28%22disordered+gambling%22%5BTitle%2FAbstract%5D+OR+%22gambling+addiction%22%5BTitle%2FAbstract%5D%29+OR+%28%22addicted+gambler*%22%5BTitle%2FAbstract%5D%29+OR+%28%22pathological+gambl*%22%5BTitle%2FAbstract%5D%29+OR+%28%22compulsive+gambl*%22%5BTitle%2FAbstract%5D%29&amp;size=200"</span> <span class="co"># 3502 results on 10/07/2023</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and parse the webpage:</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>webpage_gambling_rvest <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_gambling_rvest)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the total number of search results:</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>results_count_gambling <span class="ot">&lt;-</span> webpage_gambling_rvest <span class="sc">%&gt;%</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">".results-amount .value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">","</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the number of pages:</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>results_per_page_gambling <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>total_pages_gambling <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(results_count_gambling[<span class="dv">1</span>] <span class="sc">/</span> results_per_page_gambling)</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results_count_gambling and total_pages_gambling:</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results_count_gambling)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(total_pages_gambling)</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty data frame:</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>results_gambling_rvest <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each page and scrape the data:</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (page <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span>(total_pages_gambling <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the page parameter in the URL for the current page</span></span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>  current_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(url_gambling_rvest, <span class="st">"&amp;page="</span>, page <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read and parse the current webpage:</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>  current_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(current_url)</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract title:</span></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>  Title <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>    current_page <span class="sc">%&gt;%</span></span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_nodes</span>(<span class="st">".docsum-title"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Error extracting title"</span>, page <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">length</span>(Title))  <span class="co"># Return a vector of NAs with the same length as Title</span></span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the PMID:</span></span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>  pmid <span class="ot">&lt;-</span> current_page <span class="sc">%&gt;%</span></span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".docsum-pmid"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a data frame with the extracted data:</span></span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>  current_results_gambling <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Title =</span> Title,</span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">PMID =</span> pmid)</span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-53"><a href="#cb22-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the current results with the previous results:</span></span>
<span id="cb22-54"><a href="#cb22-54" aria-hidden="true" tabindex="-1"></a>  results_gambling_rvest <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results_gambling_rvest, current_results_gambling)</span>
<span id="cb22-55"><a href="#cb22-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-56"><a href="#cb22-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Introduce a delay to avoid overloading the server:</span></span>
<span id="cb22-57"><a href="#cb22-57" aria-hidden="true" tabindex="-1"></a>  sleep_time <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> <span class="dv">5</span>, <span class="at">max =</span> <span class="dv">15</span>)</span>
<span id="cb22-58"><a href="#cb22-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(sleep_time)</span>
<span id="cb22-59"><a href="#cb22-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-60"><a href="#cb22-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-61"><a href="#cb22-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the extracted data:</span></span>
<span id="cb22-62"><a href="#cb22-62" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as_tibble</span>(results_gambling_rvest))</span>
<span id="cb22-63"><a href="#cb22-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-64"><a href="#cb22-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the titles results before proceeding so we can't lose them!</span></span>
<span id="cb22-65"><a href="#cb22-65" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_gambling_rvest, <span class="st">"Data extraction/gambling_titles.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb22-66"><a href="#cb22-66" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="refine-dataset-1" class="level4">
<h4 class="anchored" data-anchor-id="refine-dataset-1">Refine dataset</h4>
<p>Now we need to identify and remove any duplicates, irrelevant studies, or entries with any other issues (e.g., those that turn out to be books)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in first dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>results_gambling<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/gambling_data.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in second dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>results_gambling_rvest<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/gambling_titles.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge the two datasets:</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>results_gambling2 <span class="ot">&lt;-</span> results_gambling <span class="sc">%&gt;%</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Title_trunc"</span> <span class="ot">=</span> <span class="st">"Title"</span>) <span class="sc">%&gt;%</span> <span class="co"># Designate the truncated title from the primary dataset</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">merge</span>(results_gambling_rvest, <span class="at">by =</span> <span class="st">"PMID"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Title) <span class="sc">%&gt;%</span> <span class="co"># Place full title first for ease</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,502 × 14
   Title            PMID  Year Month Title_trunc DOI   Abstract Full_Author_Name
   &lt;chr&gt;           &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           
 1 "Pathological… 3.18e5  1979 Oct   "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Allcock, C C    
 2 "Pathological… 3.18e5  1979 Oct   "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Allcock, C C    
 3 "Games, goods… 3.91e5  1979 Jun   "Games, go… &lt;NA&gt;  "This s… Salter, M A     
 4 "Games, goods… 3.91e5  1979 Jun   "Games, go… &lt;NA&gt;  "This s… Salter, M A     
 5 "Compulsive g… 6.84e5  1978 May   "Compulsiv… &lt;NA&gt;   &lt;NA&gt;    Oldman, D       
 6 "\"Compulsive… 7.21e5  1978 Oct   "\"Compuls… &lt;NA&gt;  "A mode… Kusyszyn, I     
 7 "The compulsi… 7.60e5  1979 Feb   "The compu… &lt;NA&gt;  "The ma… Lesieur, H R    
 8 "The compulsi… 7.60e5  1979 Feb   "The compu… &lt;NA&gt;  "The ma… Lesieur, H R    
 9 "'Compulsive'… 9.29e5  1977 Oct   "'Compulsi… &lt;NA&gt;   &lt;NA&gt;    Dickerson, M    
10 "Pathological… 1.10e6  1975 &lt;NA&gt;  "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Moran, E        
# ℹ 3,492 more rows
# ℹ 6 more variables: Author_Address &lt;chr&gt;, Language &lt;chr&gt;,
#   Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check results:</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_gambling2)</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check duplicates based on PMIDs:</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_gambling2 <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(PMID) <span class="sc">%&gt;%</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># there's a lot here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1  2953</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a> results_gambling2 <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PMID) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,012 × 14
# Groups:   PMID [463]
    Title           PMID  Year Month Title_trunc DOI   Abstract Full_Author_Name
    &lt;chr&gt;          &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           
  1 Pathological… 3.18e5  1979 Oct   "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Allcock, C C    
  2 Pathological… 3.18e5  1979 Oct   "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Allcock, C C    
  3 Games, goods… 3.91e5  1979 Jun   "Games, go… &lt;NA&gt;  "This s… Salter, M A     
  4 Games, goods… 3.91e5  1979 Jun   "Games, go… &lt;NA&gt;  "This s… Salter, M A     
  5 The compulsi… 7.60e5  1979 Feb   "The compu… &lt;NA&gt;  "The ma… Lesieur, H R    
  6 The compulsi… 7.60e5  1979 Feb   "The compu… &lt;NA&gt;  "The ma… Lesieur, H R    
  7 Pathological… 1.10e6  1975 &lt;NA&gt;  "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Moran, E        
  8 Pathological… 1.10e6  1975 &lt;NA&gt;  "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Moran, E        
  9 The patholog… 1.41e6  1992 Sep   "The patho… &lt;NA&gt;  "Over t… Rosenthal, R J;…
 10 The patholog… 1.41e6  1992 Sep   "The patho… &lt;NA&gt;  "Over t… Rosenthal, R J;…
 11 [Pathologica… 1.51e6  1992 Jun   "[Patholog… &lt;NA&gt;  "The ca… Krag, N J       
 12 [Pathologica… 1.51e6  1992 Jun   "[Patholog… &lt;NA&gt;  "The ca… Krag, N J       
 13 Comparison o… 1.68e6  1991 Sep   "Compariso… &lt;NA&gt;  "Of 120… McConaghy, N; B…
 14 Comparison o… 1.68e6  1991 Sep   "Compariso… &lt;NA&gt;  "Of 120… McConaghy, N; B…
 15 [Nosological… 1.76e6  1991 May   "[Nosologi… &lt;NA&gt;  "Obsess… Hantouche, E; M…
 16 [Nosological… 1.76e6  1991 May   "[Nosologi… &lt;NA&gt;  "Obsess… Hantouche, E; M…
 17 Gambling and… 1.80e6  1991 &lt;NA&gt;  "Gambling … &lt;NA&gt;  "Studen… Lesieur, H R; C…
 18 Gambling and… 1.80e6  1991 &lt;NA&gt;  "Gambling … &lt;NA&gt;  "Studen… Lesieur, H R; C…
 19 Casino-relat… 2.34e6  1990 Jun   "Casino-re… &lt;NA&gt;  "The fi… Jason, D R; Taf…
 20 Casino-relat… 2.34e6  1990 Jun   "Casino-re… &lt;NA&gt;  "The fi… Jason, D R; Taf…
 21 CSF studies … 2.47e6  1989 &lt;NA&gt;  "CSF studi… &lt;NA&gt;  "1. A d… Roy, A; Linnoil…
 22 CSF studies … 2.47e6  1989 &lt;NA&gt;  "CSF studi… &lt;NA&gt;  "1. A d… Roy, A; Linnoil…
 23 Gamblers' se… 2.61e6  1989 Dec   "Gamblers'… &lt;NA&gt;  "Impair… Corless, T; Dic…
 24 Gamblers' se… 2.61e6  1989 Dec   "Gamblers'… &lt;NA&gt;  "Impair… Corless, T; Dic…
 25 CSF GABA and… 2.62e6  1989 Nov   "CSF GABA … &lt;NA&gt;  "We pre… Roy, A; DeJong,…
 26 CSF GABA and… 2.62e6  1989 Nov   "CSF GABA … &lt;NA&gt;  "We pre… Roy, A; DeJong,…
 27 Extraversion… 2.75e6  1989 Aug   "Extravers… &lt;NA&gt;  "Pathol… Roy, A; De Jong…
 28 Extraversion… 2.75e6  1989 Aug   "Extravers… &lt;NA&gt;  "Pathol… Roy, A; De Jong…
 29 Personality … 2.76e6  1989 Jul   "Personali… &lt;NA&gt;  "Pathol… Roy, A; Custer,…
 30 Personality … 2.76e6  1989 Jul   "Personali… &lt;NA&gt;  "Pathol… Roy, A; Custer,…
 31 Behavior com… 2.91e6  1988 Jul   "Behavior … &lt;NA&gt;   &lt;NA&gt;    McConaghy, N; A…
 32 Behavior com… 2.91e6  1988 Jul   "Behavior … &lt;NA&gt;   &lt;NA&gt;    McConaghy, N; A…
 33 Pathological… 3.21e6  1988 Jul   "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Lesieur, H R; H…
 34 Pathological… 3.21e6  1988 Jul   "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Lesieur, H R; H…
 35 Studies in R… 3.39e6  1988 &lt;NA&gt;  "Studies i… &lt;NA&gt;  "Recent… Adams, H B      
 36 Studies in R… 3.39e6  1988 &lt;NA&gt;  "Studies i… &lt;NA&gt;  "Recent… Adams, H B      
 37 Sensation se… 3.46e6  1986 Feb   "Sensation… &lt;NA&gt;   &lt;NA&gt;    Blaszczynski, A…
 38 Sensation se… 3.46e6  1986 Feb   "Sensation… &lt;NA&gt;   &lt;NA&gt;    Blaszczynski, A…
 39 Personality … 3.67e6  1987 Sep   "Personali… &lt;NA&gt;  "Studie… McCormick, R A;…
 40 Personality … 3.67e6  1987 Sep   "Personali… &lt;NA&gt;  "Studie… McCormick, R A;…
 41 Arousal and … 3.79e6  1986 Sep-… "Arousal a… &lt;NA&gt;  "Follow… Brown, R I      
 42 Arousal and … 3.79e6  1986 Sep-… "Arousal a… &lt;NA&gt;  "Follow… Brown, R I      
 43 Impotence as… 3.82e6  1987 Mar   "Impotence… &lt;NA&gt;  "A 49-y… Daghestani, A N 
 44 Impotence as… 3.82e6  1987 Mar   "Impotence… &lt;NA&gt;  "A 49-y… Daghestani, A N 
 45 Pathological… 3.86e6  1985 Sep   "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Blaszczynski, A…
 46 Pathological… 3.86e6  1985 Sep   "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Blaszczynski, A…
 47 Compulsive g… 6.60e6  1984 Dec   "Compulsiv… &lt;NA&gt;   &lt;NA&gt;    Hardwick, C     
 48 Compulsive g… 6.60e6  1984 Dec   "Compulsiv… &lt;NA&gt;   &lt;NA&gt;    Hardwick, C     
 49 New Jersey c… 6.60e6  1984 Dec   "New Jerse… &lt;NA&gt;   &lt;NA&gt;    Klein, R M      
 50 New Jersey c… 6.60e6  1984 Dec   "New Jerse… &lt;NA&gt;   &lt;NA&gt;    Klein, R M      
 51 Patterns of … 6.68e6  1983 &lt;NA&gt;  "Patterns … &lt;NA&gt;  "Increa… Ramirez, L F; M…
 52 Patterns of … 6.68e6  1983 &lt;NA&gt;  "Patterns … &lt;NA&gt;  "Increa… Ramirez, L F; M…
 53 Atypical min… 6.87e6  1983 May-… "Atypical … &lt;NA&gt;   &lt;NA&gt;    Jarvik, L; Kulb…
 54 Atypical min… 6.87e6  1983 May-… "Atypical … &lt;NA&gt;   &lt;NA&gt;    Jarvik, L; Kulb…
 55 Compulsive g… 7.09e6  1982 Apr   "Compulsiv… &lt;NA&gt;  "Twenty… Greenberg, D; R…
 56 Compulsive g… 7.09e6  1982 Apr   "Compulsiv… &lt;NA&gt;  "Twenty… Greenberg, D; R…
 57 Treatment of… 7.14e6  1982 Sep   "Treatment… &lt;NA&gt;   &lt;NA&gt;    Salzmann, M M   
 58 Treatment of… 7.14e6  1982 Sep   "Treatment… &lt;NA&gt;   &lt;NA&gt;    Salzmann, M M   
 59 Cognitive-be… 8.00e6  1994 Apr   "Cognitive… &lt;NA&gt;  "This s… Ladouceur, R; B…
 60 Cognitive-be… 8.00e6  1994 Apr   "Cognitive… &lt;NA&gt;  "This s… Ladouceur, R; B…
 61 Pathological… 8.25e6  1993 &lt;NA&gt;  "Pathologi… &lt;NA&gt;  "Both p… Lesieur, H R; B…
 62 Pathological… 8.25e6  1993 &lt;NA&gt;  "Pathologi… &lt;NA&gt;  "Both p… Lesieur, H R; B…
 63 Correlates o… 8.31e6  1993 Sep-… "Correlate… &lt;NA&gt;  "The So… Templer, D I; K…
 64 Correlates o… 8.31e6  1993 Sep-… "Correlate… &lt;NA&gt;  "The So… Templer, D I; K…
 65 Epidemiology… 8.47e6  1993 Mar   "Epidemiol… &lt;NA&gt;  "Thirty… Bland, R C; New…
 66 Epidemiology… 8.47e6  1993 Mar   "Epidemiol… &lt;NA&gt;  "Thirty… Bland, R C; New…
 67 Pathological… 1.17e7  2001 Oct   "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Bondolfi, G; La…
 68 Pathological… 1.17e7  2001 Oct   "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Bondolfi, G; La…
 69 Cognitive tr… 1.18e7  2001 Nov   "Cognitive… &lt;NA&gt;  "This s… Ladouceur, R; S…
 70 Cognitive tr… 1.18e7  2001 Nov   "Cognitive… &lt;NA&gt;  "This s… Ladouceur, R; S…
 71 Frontal lobe… 1.20e7  2002 Feb   "Frontal l… &lt;NA&gt;  "BACKGR… Cavedini, Paolo…
 72 Frontal lobe… 1.20e7  2002 Feb   "Frontal l… &lt;NA&gt;  "BACKGR… Cavedini, Paolo…
 73 Drugs can tr… 1.20e7  2002 Feb   "Drugs can… &lt;NA&gt;  "Dopami… &lt;NA&gt;            
 74 Drugs can tr… 1.20e7  2002 Feb   "Drugs can… &lt;NA&gt;  "Dopami… &lt;NA&gt;            
 75 Pathological… 1.21e7  2002 Jun   "Pathologi… &lt;NA&gt;  "OBJECT… Maccallum, Fion…
 76 Pathological… 1.21e7  2002 Jun   "Pathologi… &lt;NA&gt;  "OBJECT… Maccallum, Fion…
 77 Pathological… 1.21e7  2002 May-… "Pathologi… &lt;NA&gt;  "Accumu… Toneatto, Tony;…
 78 Pathological… 1.21e7  2002 May-… "Pathologi… &lt;NA&gt;  "Accumu… Toneatto, Tony;…
 79 Suicidal ide… 1.21e7  2002 Jul   "Suicidal … &lt;NA&gt;  "This s… Petry, Nancy M;…
 80 Suicidal ide… 1.21e7  2002 Jul   "Suicidal … &lt;NA&gt;  "This s… Petry, Nancy M;…
 81 A factor-ana… 1.22e7  2002 Aug   "A factor-… &lt;NA&gt;  "Eviden… Charlton, John P
 82 A factor-ana… 1.22e7  2002 Aug   "A factor-… &lt;NA&gt;  "Eviden… Charlton, John P
 83 Gender diffe… 1.22e7  2002 Aug   "Gender di… &lt;NA&gt;  "This s… Ladd, George T;…
 84 Gender diffe… 1.22e7  2002 Aug   "Gender di… &lt;NA&gt;  "This s… Ladd, George T;…
 85 The South Oa… 1.24e7  2002 Fall  "The South… &lt;NA&gt;  "The So… Battersby, Malc…
 86 The South Oa… 1.24e7  2002 Fall  "The South… &lt;NA&gt;  "The So… Battersby, Malc…
 87 Pathological… 1.24e7  2002 Sep-… "Pathologi… &lt;NA&gt;  "Pathol… Martins, Silvia…
 88 Pathological… 1.24e7  2002 Sep-… "Pathologi… &lt;NA&gt;  "Pathol… Martins, Silvia…
 89 Reliability,… 1.25e7  2003 Jan   "Reliabili… &lt;NA&gt;  "OBJECT… Stinchfield, Ra…
 90 Reliability,… 1.25e7  2003 Jan   "Reliabili… &lt;NA&gt;  "OBJECT… Stinchfield, Ra…
 91 Characterist… 1.25e7  2003 Jan-… "Character… &lt;NA&gt;  "The ga… Gotestam, K Gun…
 92 Characterist… 1.25e7  2003 Jan-… "Character… &lt;NA&gt;  "The ga… Gotestam, K Gun…
 93 Gambling par… 1.25e7  2002 Wint… "Gambling … &lt;NA&gt;  "Demogr… Welte, John W; …
 94 Gambling par… 1.25e7  2002 Wint… "Gambling … &lt;NA&gt;  "Demogr… Welte, John W; …
 95 Pathological… 1.25e7  2002 Nov-… "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Dineen, E       
 96 Pathological… 1.25e7  2002 Nov-… "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Dineen, E       
 97 Are there co… 1.26e7  2003 Feb   "Are there… &lt;NA&gt;  "OBJECT… Tavares, Herman…
 98 Are there co… 1.26e7  2003 Feb   "Are there… &lt;NA&gt;  "OBJECT… Tavares, Herman…
 99 A population… 1.27e7  2003 Spri… "A populat… &lt;NA&gt;  "The as… Newman, Stephen…
100 A population… 1.27e7  2003 Spri… "A populat… &lt;NA&gt;  "The as… Newman, Stephen…
# ℹ 912 more rows
# ℹ 6 more variables: Author_Address &lt;chr&gt;, Language &lt;chr&gt;,
#   Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove these asap as they're clear duplicates:</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>results_gambling_sans_duplicates<span class="ot">&lt;-</span> results_gambling2 <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(PMID, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,953 × 14
   Title            PMID  Year Month Title_trunc DOI   Abstract Full_Author_Name
   &lt;chr&gt;           &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           
 1 "Pathological… 3.18e5  1979 Oct   "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Allcock, C C    
 2 "Games, goods… 3.91e5  1979 Jun   "Games, go… &lt;NA&gt;  "This s… Salter, M A     
 3 "Compulsive g… 6.84e5  1978 May   "Compulsiv… &lt;NA&gt;   &lt;NA&gt;    Oldman, D       
 4 "\"Compulsive… 7.21e5  1978 Oct   "\"Compuls… &lt;NA&gt;  "A mode… Kusyszyn, I     
 5 "The compulsi… 7.60e5  1979 Feb   "The compu… &lt;NA&gt;  "The ma… Lesieur, H R    
 6 "'Compulsive'… 9.29e5  1977 Oct   "'Compulsi… &lt;NA&gt;   &lt;NA&gt;    Dickerson, M    
 7 "Pathological… 1.10e6  1975 &lt;NA&gt;  "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Moran, E        
 8 "The patholog… 1.41e6  1992 Sep   "The patho… &lt;NA&gt;  "Over t… Rosenthal, R J;…
 9 "Borderline o… 1.42e6  1992 Aug   "Borderlin… &lt;NA&gt;  "Border… Selzer, J       
10 "Diagnoses ar… 1.42e6  1992 Nov   "Diagnoses… &lt;NA&gt;  "The ps… Mindham, R H; S…
# ℹ 2,943 more rows
# ℹ 6 more variables: Author_Address &lt;chr&gt;, Language &lt;chr&gt;,
#   Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on title (there are some distinct papers with the same title like "gambling disorder", so this is too simplified, but it'll do for a quick check):</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_gambling2 <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Title) <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1  2931</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How many duplicates (based on title alone) does this remove?</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(results_gambling_sans_duplicates) <span class="sc">-</span> Simple_duplicate_removal_n </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   n
1 22</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates where the title, year, and authors are all the same:</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>results_gambling_sans_duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, Journal_name_short, Full_Author_Name) <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 14
# Groups:   Title, Journal_name_short, Full_Author_Name [0]
# ℹ 14 variables: Title &lt;chr&gt;, PMID &lt;int&gt;, Year &lt;int&gt;, Month &lt;chr&gt;,
#   Title_trunc &lt;chr&gt;, DOI &lt;chr&gt;, Abstract &lt;chr&gt;, Full_Author_Name &lt;chr&gt;,
#   Author_Address &lt;chr&gt;, Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates were just the title, journal and year are the same:</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>results_gambling_sans_duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, Journal_name_short, Year) <span class="sc">%&gt;%</span> </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># View()</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 14
# Groups:   Title, Journal_name_short, Year [2]
  Title             PMID  Year Month Title_trunc DOI   Abstract Full_Author_Name
  &lt;chr&gt;            &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           
1 Gambling disor… 3.13e7  2019 Jul   Gambling d… 10.1… "Gambli… Potenza, Marc N…
2 Gambling disor… 3.13e7  2019 Jul   Gambling d… 10.1…  &lt;NA&gt;    &lt;NA&gt;            
3 Gambling disor… 3.56e7  2022 Jun   Gambling d… S221…  &lt;NA&gt;    van Schalkwyk, …
4 Gambling disor… 3.56e7  2022 Jun   Gambling d… S221…  &lt;NA&gt;    Suanes, Patrici…
# ℹ 6 more variables: Author_Address &lt;chr&gt;, Language &lt;chr&gt;,
#   Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># There are a few more of these, suggesting there are some papers with the same title, journal and date but different authors. </span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The only one of concern is this one (PMID: 31346181) which is  garaphical abstract for another paper by the looks. </span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove duplicates based on above observation:</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>results_gambling_sans_duplicates2<span class="ot">&lt;-</span> results_gambling_sans_duplicates <span class="sc">%&gt;%</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(PMID <span class="sc">!=</span> <span class="st">"31346181"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,952 × 14
   Title            PMID  Year Month Title_trunc DOI   Abstract Full_Author_Name
   &lt;chr&gt;           &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           
 1 "Pathological… 3.18e5  1979 Oct   "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Allcock, C C    
 2 "Games, goods… 3.91e5  1979 Jun   "Games, go… &lt;NA&gt;  "This s… Salter, M A     
 3 "Compulsive g… 6.84e5  1978 May   "Compulsiv… &lt;NA&gt;   &lt;NA&gt;    Oldman, D       
 4 "\"Compulsive… 7.21e5  1978 Oct   "\"Compuls… &lt;NA&gt;  "A mode… Kusyszyn, I     
 5 "The compulsi… 7.60e5  1979 Feb   "The compu… &lt;NA&gt;  "The ma… Lesieur, H R    
 6 "'Compulsive'… 9.29e5  1977 Oct   "'Compulsi… &lt;NA&gt;   &lt;NA&gt;    Dickerson, M    
 7 "Pathological… 1.10e6  1975 &lt;NA&gt;  "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Moran, E        
 8 "The patholog… 1.41e6  1992 Sep   "The patho… &lt;NA&gt;  "Over t… Rosenthal, R J;…
 9 "Borderline o… 1.42e6  1992 Aug   "Borderlin… &lt;NA&gt;  "Border… Selzer, J       
10 "Diagnoses ar… 1.42e6  1992 Nov   "Diagnoses… &lt;NA&gt;  "The ps… Mindham, R H; S…
# ℹ 2,942 more rows
# ℹ 6 more variables: Author_Address &lt;chr&gt;, Language &lt;chr&gt;,
#   Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check this has removed the duplicate:</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(results_gambling_sans_duplicates) <span class="sc">-</span> <span class="fu">count</span>(results_gambling_sans_duplicates2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  n
1 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  Okay, now we have a clean dataset, let's explore!</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of the Year  variable:</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(results_gambling_sans_duplicates2<span class="sc">$</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1961    2008    2015    2013    2019    2023 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of publications per year:</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>Gambling_hist<span class="ot">&lt;-</span> <span class="fu">hist</span>(results_gambling_sans_duplicates2<span class="sc">$</span>Year,</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1960</span>,<span class="dv">2023</span>),</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="dv">60</span>,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">main =</span> <span class="st">"Papers published per year on Gambling Disorder (PubMed)"</span>,</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlab =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PubMed-Article-Extraction-Using-rentrez_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of separate journals:</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>results_gambling_sans_duplicates2 <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 603 × 1
   Journal_name_short                          
   &lt;chr&gt;                                       
 1 ACS Chem Neurosci                           
 2 AIDS Care                                   
 3 Acta Med Port                               
 4 Acta Neurol Belg                            
 5 Acta Neuropsychiatr                         
 6 Acta Psychiatr Scand                        
 7 Acta Psychother Psychosom                   
 8 Actas Esp Psiquiatr                         
 9 Actas Luso Esp Neurol Psiquiatr Cienc Afines
10 Addict Behav                                
11 Addict Behav Rep                            
12 Addict Biol                                 
13 Addict Health                               
14 Addiction                                   
15 Adicciones                                  
16 Adolesc Health Med Ther                     
17 Adv Exp Med Biol                            
18 Adv Pharmacol                               
19 Aging Ment Health                           
20 Alcohol Alcohol                             
21 Alcohol Clin Exp Res                        
22 Am Indian Alsk Native Ment Health Res       
23 Am J Addict                                 
24 Am J Drug Alcohol Abuse                     
25 Am J Epidemiol                              
26 Am J Forensic Med Pathol                    
27 Am J Geriatr Psychiatry                     
28 Am J Health Behav                           
29 Am J Ind Med                                
30 Am J Orthopsychiatry                        
31 Am J Pharm Educ                             
32 Am J Psychiatry                             
33 Am J Psychoanal                             
34 Am J Psychother                             
35 Am J Public Health                          
36 Am J Ther                                   
37 Am Psychol                                  
38 An Sist Sanit Navar                         
39 Anal Gambl Behav                            
40 Ann Acad Med Singap                         
41 Ann Agric Environ Med                       
42 Ann Clin Psychiatry                         
43 Ann Gen Psychiatry                          
44 Ann Ig                                      
45 Ann Indian Acad Neurol                      
46 Ann Ist Super Sanita                        
47 Ann Med Psychol (Paris)                     
48 Ann N Y Acad Sci                            
49 Ann Neurol                                  
50 Ann Pharmacother                            
# ℹ 553 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Most popular journals:</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>results_gambling_sans_duplicates2 <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 603 × 2
   Journal_name_short                            n
   &lt;chr&gt;                                     &lt;int&gt;
 1 J Gambl Stud                                487
 2 J Behav Addict                              139
 3 Addict Behav                                121
 4 Addiction                                    78
 5 Psychiatry Res                               71
 6 Front Psychiatry                             63
 7 Psychol Addict Behav                         51
 8 Front Psychol                                46
 9 Int J Environ Res Public Health              39
10 PLoS One                                     30
11 Compr Psychiatry                             29
12 Am J Addict                                  27
13 Mov Disord                                   27
14 Can J Psychiatry                             23
15 CNS Spectr                                   21
16 J Clin Psychiatry                            20
17 J Psychiatr Res                              20
18 Parkinsonism Relat Disord                    19
19 Addict Biol                                  18
20 Am J Psychiatry                              18
21 Ann Clin Psychiatry                          18
22 Neuropsychopharmacology                      18
23 J Addict Med                                 17
24 Neurosci Biobehav Rev                        17
25 Psychol Rep                                  17
26 Prog Neuropsychopharmacol Biol Psychiatry    16
27 BMC Psychiatry                               15
28 Br J Psychiatry                              15
29 J Addict Dis                                 15
30 Front Behav Neurosci                         14
31 J Neurosci                                   14
32 Psychol Med                                  14
33 Sci Rep                                      14
34 Adicciones                                   13
35 Drug Alcohol Depend                          13
36 Psychopharmacology (Berl)                    13
37 Subst Use Misuse                             13
38 Biol Psychiatry                              12
39 Braz J Psychiatry                            12
40 Encephale                                    12
41 Eur Neuropsychopharmacol                     12
42 J Clin Med                                   12
43 J Nerv Ment Dis                              12
44 Zh Nevrol Psikhiatr Im S S Korsakova         12
45 Acta Psychiatr Scand                         11
46 Clin Neuropharmacol                          11
47 Curr Addict Rep                              11
48 J Affect Disord                              11
49 Behav Brain Res                              10
50 Eur Addict Res                               10
# ℹ 553 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_gambling_sans_duplicates) # Visually inspect results</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now I need to add a label to all of these studies to signify that they Were returned from the gambling search so that we can distinguish them from other studies when we later joined the datasets together:</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(results_gambling_sans_duplicates2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1  2952</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>Label <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"gambling"</span>, <span class="at">times =</span> <span class="fu">count</span>(results_gambling_sans_duplicates2))</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>results_gambling_final <span class="ot">&lt;-</span> results_gambling_sans_duplicates2 <span class="sc">%&gt;%</span> <span class="fu">bind_cols</span>(Label) <span class="sc">%&gt;%</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Label =</span> <span class="dv">14</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...15`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,952 × 15
   Title            PMID  Year Month Title_trunc DOI   Abstract Full_Author_Name
   &lt;chr&gt;           &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;           
 1 "Pathological… 3.18e5  1979 Oct   "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Allcock, C C    
 2 "Games, goods… 3.91e5  1979 Jun   "Games, go… &lt;NA&gt;  "This s… Salter, M A     
 3 "Compulsive g… 6.84e5  1978 May   "Compulsiv… &lt;NA&gt;   &lt;NA&gt;    Oldman, D       
 4 "\"Compulsive… 7.21e5  1978 Oct   "\"Compuls… &lt;NA&gt;  "A mode… Kusyszyn, I     
 5 "The compulsi… 7.60e5  1979 Feb   "The compu… &lt;NA&gt;  "The ma… Lesieur, H R    
 6 "'Compulsive'… 9.29e5  1977 Oct   "'Compulsi… &lt;NA&gt;   &lt;NA&gt;    Dickerson, M    
 7 "Pathological… 1.10e6  1975 &lt;NA&gt;  "Pathologi… &lt;NA&gt;   &lt;NA&gt;    Moran, E        
 8 "The patholog… 1.41e6  1992 Sep   "The patho… &lt;NA&gt;  "Over t… Rosenthal, R J;…
 9 "Borderline o… 1.42e6  1992 Aug   "Borderlin… &lt;NA&gt;  "Border… Selzer, J       
10 "Diagnoses ar… 1.42e6  1992 Nov   "Diagnoses… &lt;NA&gt;  "The ps… Mindham, R H; S…
# ℹ 2,942 more rows
# ℹ 7 more variables: Author_Address &lt;chr&gt;, Language &lt;chr&gt;,
#   Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Label &lt;chr&gt;, ...15 &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_gambling_final)</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the cleaned results:</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_gambling_final, <span class="st">"Data extraction/gambling_data_cleaned.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="gaming-addiction" class="level2">
<h2 class="anchored" data-anchor-id="gaming-addiction">Gaming addiction</h2>
<section id="extract-studies-and-perform-a-basic-clean-of-dataset-2" class="level4">
<h4 class="anchored" data-anchor-id="extract-studies-and-perform-a-basic-clean-of-dataset-2">Extract studies and perform a basic clean of dataset</h4>
<p><strong>Notes pre-search:</strong> Mesh terms can be found <a href="https://www.ncbi.nlm.nih.gov/mesh/?term=gaming+disorder">here</a>. Didn’t use all of these terms as some relate to other behavioural addictions</p>
<p><strong>Actual search used:</strong> (((((“gaming disorder”[Title/Abstract]) OR (“internet gaming disorder”[Title/Abstract])) OR (“gaming addiction”[Title/Abstract])) OR (“video game addiction”[Title/Abstract])) OR (“video game disorder”[Title/Abstract])) OR (“gaming dependence”)</p>
<p><strong>Manual search results:</strong> <a href="https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%28%28%28%22gaming+disorder%22%5BTitle%2FAbstract%5D%29+OR+%28%22internet+gaming+disorder%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22gaming+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22video+game+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22video+game+disorder%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22gaming+dependence%22%29&amp;size=200">link</a></p>
<p><strong>Notes post-search:</strong> “video game dependence” returned no results and so was removed. I manually inspected the results directly in the PubMed site and all appeared relevant (July 2023).</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  Clean environment:</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># rm(list = ls())</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the search terms/string:</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>search_term_gaming <span class="ot">&lt;-</span> <span class="st">'((((("gaming disorder"[Title/Abstract]) OR ("internet gaming disorder"[Title/Abstract])) OR ("gaming addiction"[Title/Abstract])) OR ("video game addiction"[Title/Abstract])) OR ("video game disorder"[Title/Abstract])) OR ("gaming dependence")'</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use entrez_search to get the IDs of the articles:</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>search_results_gaming <span class="ot">&lt;-</span> <span class="fu">entrez_search</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">term=</span>search_term_gaming, <span class="at">retmax=</span><span class="dv">20000</span>)</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>id_list_gaming <span class="ot">&lt;-</span> search_results_gaming<span class="sc">$</span>ids</span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Split id list into chunks of 100 for chunk/batches:</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>chunks <span class="ot">&lt;-</span> <span class="fu">split</span>(id_list_gaming, <span class="fu">ceiling</span>(<span class="fu">seq_along</span>(id_list_gaming)<span class="sc">/</span><span class="dv">100</span>))</span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch details for each chunk of articles:</span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>article_details_gaming <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(chunks, <span class="cf">function</span>(ids) {</span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fetch details of the articles:</span></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">entrez_fetch</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">id=</span>ids, <span class="at">rettype=</span><span class="st">"medline"</span>, <span class="at">retmode=</span><span class="st">"text"</span>)</span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split the articles into individual articles:</span></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(articles, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process each article:</span></span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(articles, <span class="cf">function</span>(article) {</span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Split the article into lines:</span></span>
<span id="cb56-26"><a href="#cb56-26" aria-hidden="true" tabindex="-1"></a>    lines <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(article, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb56-27"><a href="#cb56-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb56-28"><a href="#cb56-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the details we're interested in:</span></span>
<span id="cb56-29"><a href="#cb56-29" aria-hidden="true" tabindex="-1"></a>    details_gaming <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb56-30"><a href="#cb56-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">PMID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb56-31"><a href="#cb56-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">DP =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb56-32"><a href="#cb56-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">TI =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb56-33"><a href="#cb56-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">LID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb56-34"><a href="#cb56-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">AB =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb56-35"><a href="#cb56-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">FAU =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb56-36"><a href="#cb56-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">AD =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb56-37"><a href="#cb56-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">LA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb56-38"><a href="#cb56-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">PT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb56-39"><a href="#cb56-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">TA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb56-40"><a href="#cb56-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">COIS =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb56-41"><a href="#cb56-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">JT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb56-42"><a href="#cb56-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb56-43"><a href="#cb56-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb56-44"><a href="#cb56-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert the list of details into a one-row data frame:</span></span>
<span id="cb56-45"><a href="#cb56-45" aria-hidden="true" tabindex="-1"></a>    details_df_gaming <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(details_gaming)</span>
<span id="cb56-46"><a href="#cb56-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb56-47"><a href="#cb56-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(details_df_gaming)</span>
<span id="cb56-48"><a href="#cb56-48" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb56-49"><a href="#cb56-49" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb56-50"><a href="#cb56-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-51"><a href="#cb56-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the results:</span></span>
<span id="cb56-52"><a href="#cb56-52" aria-hidden="true" tabindex="-1"></a>article_details_gaming <span class="sc">%&gt;%</span></span>
<span id="cb56-53"><a href="#cb56-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb56-54"><a href="#cb56-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb56-55"><a href="#cb56-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-56"><a href="#cb56-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's remove the identifiers at the beginning of each data point:</span></span>
<span id="cb56-57"><a href="#cb56-57" aria-hidden="true" tabindex="-1"></a>rep_str <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'PMID- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'DP  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TI  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LID - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AB  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb56-58"><a href="#cb56-58" aria-hidden="true" tabindex="-1"></a>             <span class="st">'FAU - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AD  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LA  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'PT  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TA  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb56-59"><a href="#cb56-59" aria-hidden="true" tabindex="-1"></a>             <span class="st">'COIS- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'JT  - '</span> <span class="ot">=</span> <span class="st">''</span>)</span>
<span id="cb56-60"><a href="#cb56-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-61"><a href="#cb56-61" aria-hidden="true" tabindex="-1"></a>results_gaming <span class="ot">&lt;-</span> article_details_gaming <span class="sc">%&gt;%</span></span>
<span id="cb56-62"><a href="#cb56-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">str_replace_all</span>(., rep_str))) <span class="sc">%&gt;%</span> <span class="co"># Remove identifiers</span></span>
<span id="cb56-63"><a href="#cb56-63" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now separate the date year and month/day info:</span></span>
<span id="cb56-64"><a href="#cb56-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(DP, <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Month"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st"> "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb56-65"><a href="#cb56-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.numeric</span>(Year)) <span class="sc">%&gt;%</span> <span class="co"># Convert Year to numeric</span></span>
<span id="cb56-66"><a href="#cb56-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="co"># Let's also provide more descriptive names for each of the columns</span></span>
<span id="cb56-67"><a href="#cb56-67" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Title"</span> <span class="ot">=</span> <span class="st">"TI"</span>, </span>
<span id="cb56-68"><a href="#cb56-68" aria-hidden="true" tabindex="-1"></a>         <span class="st">"DOI"</span> <span class="ot">=</span> <span class="st">"LID"</span>, </span>
<span id="cb56-69"><a href="#cb56-69" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Abstract"</span> <span class="ot">=</span> <span class="st">"AB"</span>, </span>
<span id="cb56-70"><a href="#cb56-70" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Full_Author_Name"</span> <span class="ot">=</span> <span class="st">"FAU"</span>, </span>
<span id="cb56-71"><a href="#cb56-71" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Author_Address"</span> <span class="ot">=</span> <span class="st">"AD"</span>, </span>
<span id="cb56-72"><a href="#cb56-72" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Language"</span> <span class="ot">=</span> <span class="st">"LA"</span>, </span>
<span id="cb56-73"><a href="#cb56-73" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Publication_Type"</span> <span class="ot">=</span> <span class="st">"PT"</span>, </span>
<span id="cb56-74"><a href="#cb56-74" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_name_short"</span> <span class="ot">=</span> <span class="st">"TA"</span>,</span>
<span id="cb56-75"><a href="#cb56-75" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Conflict_of_Interest_Statement"</span> <span class="ot">=</span> <span class="st">"COIS"</span>,</span>
<span id="cb56-76"><a href="#cb56-76" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_Title"</span> <span class="ot">=</span> <span class="st">"JT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb56-77"><a href="#cb56-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb56-78"><a href="#cb56-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-79"><a href="#cb56-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the initial results before proceeding so we can't lose them!</span></span>
<span id="cb56-80"><a href="#cb56-80" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_gaming, <span class="st">"Data extraction/gaming_data.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb56-81"><a href="#cb56-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-82"><a href="#cb56-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="extract-full-title-using-rvest-2" class="level4">
<h4 class="anchored" data-anchor-id="extract-full-title-using-rvest-2">Extract full title using rvest</h4>
<p>As with the gambling study extraction, we’re going to use the <code>rvest</code> package to scrape the titles returned from the manual search in PubMed, then join the two datasets using the PMID, retaining the title from this new dataset.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add search URL:</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>url_gaming_rvest <span class="ot">&lt;-</span> <span class="st">"https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%28%28%28%22gaming+disorder%22%5BTitle%2FAbstract%5D%29+OR+%28%22internet+gaming+disorder%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22gaming+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22video+game+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22video+game+disorder%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22gaming+dependence%22%29&amp;size=200"</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and parse the webpage</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>webpage_gaming_rvest <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_gaming_rvest)</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the total number of search results</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>results_count_gaming <span class="ot">&lt;-</span> webpage_gaming_rvest <span class="sc">%&gt;%</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">".results-amount .value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">","</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the number of pages</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>results_per_page_gaming <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>total_pages_gaming <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(results_count_gaming[<span class="dv">1</span>] <span class="sc">/</span> results_per_page_gaming)</span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results_count_gaming and total_pages_gaming</span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results_count_gaming)</span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(total_pages_gaming)</span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty data frame</span></span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>results_gaming_rvest <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each page and scrape the data</span></span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (page <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span>(total_pages_gaming <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the page parameter in the URL for the current page</span></span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>  current_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(url_gaming_rvest, <span class="st">"&amp;page="</span>, page <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-31"><a href="#cb57-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read and parse the current webpage</span></span>
<span id="cb57-32"><a href="#cb57-32" aria-hidden="true" tabindex="-1"></a>  current_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(current_url)</span>
<span id="cb57-33"><a href="#cb57-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-34"><a href="#cb57-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract title</span></span>
<span id="cb57-35"><a href="#cb57-35" aria-hidden="true" tabindex="-1"></a>  Title <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb57-36"><a href="#cb57-36" aria-hidden="true" tabindex="-1"></a>    current_page <span class="sc">%&gt;%</span></span>
<span id="cb57-37"><a href="#cb57-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_nodes</span>(<span class="st">".docsum-title"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-38"><a href="#cb57-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-39"><a href="#cb57-39" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb57-40"><a href="#cb57-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Error extracting title info on page"</span>, page <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb57-41"><a href="#cb57-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">length</span>(Title))  <span class="co"># Return a vector of NAs with the same length as Title</span></span>
<span id="cb57-42"><a href="#cb57-42" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb57-43"><a href="#cb57-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-44"><a href="#cb57-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the PMID:</span></span>
<span id="cb57-45"><a href="#cb57-45" aria-hidden="true" tabindex="-1"></a>  pmid <span class="ot">&lt;-</span> current_page <span class="sc">%&gt;%</span></span>
<span id="cb57-46"><a href="#cb57-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".docsum-pmid"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-47"><a href="#cb57-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-48"><a href="#cb57-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-49"><a href="#cb57-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a data frame with the extracted data:</span></span>
<span id="cb57-50"><a href="#cb57-50" aria-hidden="true" tabindex="-1"></a>  current_results_gaming <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Title =</span> Title,</span>
<span id="cb57-51"><a href="#cb57-51" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">PMID =</span> pmid)</span>
<span id="cb57-52"><a href="#cb57-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-53"><a href="#cb57-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the current results with the previous results:</span></span>
<span id="cb57-54"><a href="#cb57-54" aria-hidden="true" tabindex="-1"></a>  results_gaming_rvest <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results_gaming_rvest, current_results_gaming)</span>
<span id="cb57-55"><a href="#cb57-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-56"><a href="#cb57-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Introduce a delay to avoid overloading the server:</span></span>
<span id="cb57-57"><a href="#cb57-57" aria-hidden="true" tabindex="-1"></a>  sleep_time <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> <span class="dv">5</span>, <span class="at">max =</span> <span class="dv">15</span>)</span>
<span id="cb57-58"><a href="#cb57-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(sleep_time)</span>
<span id="cb57-59"><a href="#cb57-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb57-60"><a href="#cb57-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-61"><a href="#cb57-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the extracted data:</span></span>
<span id="cb57-62"><a href="#cb57-62" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as_tibble</span>(results_gaming_rvest))</span>
<span id="cb57-63"><a href="#cb57-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-64"><a href="#cb57-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the titles before proceeding so we can't lose them!</span></span>
<span id="cb57-65"><a href="#cb57-65" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_gaming_rvest, <span class="st">"Data extraction/gaming_titles.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb57-66"><a href="#cb57-66" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="refine-dataset-2" class="level4">
<h4 class="anchored" data-anchor-id="refine-dataset-2">Refine dataset</h4>
<p>Now we need to identify and remove any duplicates, irrelevant studies, or entries with any other issues (e.g., those that turn out to be books)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in first dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>results_gaming<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/gaming_data.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in second dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>results_gaming_rvest<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/gaming_titles.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge our two datasets:</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>results_gaming2 <span class="ot">&lt;-</span> results_gaming <span class="sc">%&gt;%</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Title_trunc"</span> <span class="ot">=</span> <span class="st">"Title"</span>) <span class="sc">%&gt;%</span> <span class="co"># Designate the truncated title from our primary dataset so we can remove it once we get the full title</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(results_gaming_rvest, <span class="at">by =</span> <span class="st">"PMID"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Title_trunc) <span class="sc">%&gt;%</span> <span class="co"># Bye truncated title</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Title) <span class="sc">%&gt;%</span> <span class="co"># Place full title first for ease</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,569 × 13
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 Letter to … 3.74e7  2023 Jun   S002…  &lt;NA&gt;    Montag, Christi… "Department o…
 2 Positive y… 3.74e7  2023 &lt;NA&gt;  10.1… "As an … Gan, Xiong; Wan… "Department o…
 3 Social sup… 3.74e7  2023 Jun   S002… "BACKGR… Malak, Malakeh … "Community He…
 4 The serial… 3.74e7  2023 Jun   10.1… "Gaming… Servidio, Rocco… "Department o…
 5 The Big Fi… 3.74e7  2023 May   10.3… "Relati… Wartberg, Lutz;… "Department o…
 6 Commentary… 3.74e7  2023 Jun   10.1…  &lt;NA&gt;    Luquiens, Amand… "Department o…
 7 Problemati… 3.74e7  2023 Jun   10.1… "As res… Ghazi, Farah Ra… "Department o…
 8 Relationsh… 3.74e7  2023 Apr   10.1… "Resear… Li, Li; Niu, Zh… "Ganzhou, Chi…
 9 Examining … 3.74e7  2023 May   10.1… "This s… Yildiz Durak, H… "Konya, Turke…
10 Cross-Cult… 3.74e7  2023 May   10.1… "Empiri… Kochuchakkalack… "Manila, Phil…
# ℹ 1,559 more rows
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check results:</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_gaming2)</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on PMID:</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_gaming2 <span class="sc">%&gt;%</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(PMID) <span class="sc">%&gt;%</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1  1569</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on title:</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_gaming2 <span class="sc">%&gt;%</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Title) <span class="sc">%&gt;%</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1  1568</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show duplicate:</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>results_gaming2 <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title) <span class="sc">%&gt;%</span> </span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="co"># **This is actually two seperate studies**</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 13
# Groups:   Title [1]
  Title          PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
  &lt;chr&gt;         &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
1 Technologic… 3.61e7  2022 Sep   S019… "Modern… Sherer, James; … "New York Uni…
2 Technologic… 3.58e7  2022 Sep   10.1… "PURPOS… Sherer, James; … "New York Uni…
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I know from manual searching that there is a genuine duplicate that is a corrigendum to one study. The PMID  for the corrigendum is 35543161 (Remove later)</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates where the title, year, and authors are all the same:</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>results_gaming2 <span class="sc">%&gt;%</span> </span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, </span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>           Journal_name_short, </span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>           Full_Author_Name) <span class="sc">%&gt;%</span> </span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 13
# Groups:   Title, Journal_name_short, Full_Author_Name [0]
# ℹ 13 variables: Title &lt;chr&gt;, PMID &lt;int&gt;, Year &lt;int&gt;, Month &lt;chr&gt;, DOI &lt;chr&gt;,
#   Abstract &lt;chr&gt;, Full_Author_Name &lt;chr&gt;, Author_Address &lt;chr&gt;,
#   Language &lt;chr&gt;, Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates were just the title, journal and year are the same:</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>results_gaming2 <span class="sc">%&gt;%</span> </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, </span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>           Journal_name_short, </span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>           Year) <span class="sc">%&gt;%</span> </span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 13
# Groups:   Title, Journal_name_short, Year [0]
# ℹ 13 variables: Title &lt;chr&gt;, PMID &lt;int&gt;, Year &lt;int&gt;, Month &lt;chr&gt;, DOI &lt;chr&gt;,
#   Abstract &lt;chr&gt;, Full_Author_Name &lt;chr&gt;, Author_Address &lt;chr&gt;,
#   Language &lt;chr&gt;, Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the duplicate study:</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>results_gaming_sans_duplicates<span class="ot">&lt;-</span> results_gaming2 <span class="sc">%&gt;%</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(PMID <span class="sc">!=</span> <span class="st">"35543161"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,568 × 13
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 Letter to … 3.74e7  2023 Jun   S002…  &lt;NA&gt;    Montag, Christi… "Department o…
 2 Positive y… 3.74e7  2023 &lt;NA&gt;  10.1… "As an … Gan, Xiong; Wan… "Department o…
 3 Social sup… 3.74e7  2023 Jun   S002… "BACKGR… Malak, Malakeh … "Community He…
 4 The serial… 3.74e7  2023 Jun   10.1… "Gaming… Servidio, Rocco… "Department o…
 5 The Big Fi… 3.74e7  2023 May   10.3… "Relati… Wartberg, Lutz;… "Department o…
 6 Commentary… 3.74e7  2023 Jun   10.1…  &lt;NA&gt;    Luquiens, Amand… "Department o…
 7 Problemati… 3.74e7  2023 Jun   10.1… "As res… Ghazi, Farah Ra… "Department o…
 8 Relationsh… 3.74e7  2023 Apr   10.1… "Resear… Li, Li; Niu, Zh… "Ganzhou, Chi…
 9 Examining … 3.74e7  2023 May   10.1… "This s… Yildiz Durak, H… "Konya, Turke…
10 Cross-Cult… 3.74e7  2023 May   10.1… "Empiri… Kochuchakkalack… "Manila, Phil…
# ℹ 1,558 more rows
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check this has just remove one study</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(results_gaming2) <span class="sc">-</span> <span class="fu">count</span>(results_gaming_sans_duplicates) <span class="co"># Yep</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  n
1 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  Okay, now we have a clean dataset, let's explore!</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of the Year  variable:</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(results_gaming_sans_duplicates<span class="sc">$</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1994    2017    2020    2019    2022    2023 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of publications per year:</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>gaming_hist<span class="ot">&lt;-</span> <span class="fu">hist</span>(results_gaming_sans_duplicates<span class="sc">$</span>Year,</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1960</span>,<span class="dv">2023</span>),</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="dv">40</span>,</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">main =</span> <span class="st">"Papers published per year on Gaming Disorder (PubMed)"</span>,</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlab =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PubMed-Article-Extraction-Using-rentrez_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of separate journals:</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>results_gaming_sans_duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 335 × 1
   Journal_name_short     
   &lt;chr&gt;                  
 1 Acta Paediatr          
 2 Acta Psychol (Amst)    
 3 Addict Behav           
 4 Addict Behav Rep       
 5 Addict Biol            
 6 Addiction              
 7 Adicciones             
 8 Adolescence            
 9 Adv Exp Med Biol       
10 Aggress Behav          
11 Am J Addict            
12 Am J Drug Alcohol Abuse
13 Am J Health Behav      
14 Am J Hum Biol          
15 Am J Mens Health       
16 Am J Nurs              
17 Am J Play              
18 Am J Psychiatry        
19 Ann Acad Med Singap    
20 Ann Gen Psychiatry     
# ℹ 315 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Most popular journals:</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>results_gaming_sans_duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 335 × 2
   Journal_name_short                            n
   &lt;chr&gt;                                     &lt;int&gt;
 1 J Behav Addict                              185
 2 Front Psychiatry                             95
 3 Int J Environ Res Public Health              91
 4 Addict Behav                                 83
 5 Cyberpsychol Behav Soc Netw                  51
 6 Front Psychol                                49
 7 Addiction                                    36
 8 Addict Behav Rep                             35
 9 Addict Biol                                  31
10 PLoS One                                     27
11 J Psychiatr Res                              25
12 Psychiatry Res                               23
13 Int J Ment Health Addict                     19
14 Prog Neuropsychopharmacol Biol Psychiatry    19
15 BMC Psychiatry                               18
16 J Clin Med                                   18
17 Front Public Health                          14
18 Psychiatry Investig                          14
19 Sci Rep                                      14
20 J Affect Disord                              13
# ℹ 315 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_gaming_sans_duplicates) # Visually inspect results</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now I need to add a label to all of these studies to signify that they Were returned from the gaming search so that we can distinguish them from other studies when we later joined the datasets together:</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(results_gaming_sans_duplicates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1  1568</code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>Label <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"gaming"</span>, <span class="at">times =</span> <span class="fu">count</span>(results_gaming_sans_duplicates))</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>results_gaming_final <span class="ot">&lt;-</span> results_gaming_sans_duplicates <span class="sc">%&gt;%</span> <span class="fu">bind_cols</span>(Label) <span class="sc">%&gt;%</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Label =</span> <span class="dv">14</span>) <span class="sc">%&gt;%</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...14`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,568 × 14
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 Letter to … 3.74e7  2023 Jun   S002…  &lt;NA&gt;    Montag, Christi… "Department o…
 2 Positive y… 3.74e7  2023 &lt;NA&gt;  10.1… "As an … Gan, Xiong; Wan… "Department o…
 3 Social sup… 3.74e7  2023 Jun   S002… "BACKGR… Malak, Malakeh … "Community He…
 4 The serial… 3.74e7  2023 Jun   10.1… "Gaming… Servidio, Rocco… "Department o…
 5 The Big Fi… 3.74e7  2023 May   10.3… "Relati… Wartberg, Lutz;… "Department o…
 6 Commentary… 3.74e7  2023 Jun   10.1…  &lt;NA&gt;    Luquiens, Amand… "Department o…
 7 Problemati… 3.74e7  2023 Jun   10.1… "As res… Ghazi, Farah Ra… "Department o…
 8 Relationsh… 3.74e7  2023 Apr   10.1… "Resear… Li, Li; Niu, Zh… "Ganzhou, Chi…
 9 Examining … 3.74e7  2023 May   10.1… "This s… Yildiz Durak, H… "Konya, Turke…
10 Cross-Cult… 3.74e7  2023 May   10.1… "Empiri… Kochuchakkalack… "Manila, Phil…
# ℹ 1,558 more rows
# ℹ 6 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;, Label &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_gaming_final)</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the cleaned results:</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_gaming_final, <span class="st">"Data extraction/gaming_data_cleaned.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="work-addiction" class="level2">
<h2 class="anchored" data-anchor-id="work-addiction">Work addiction</h2>
<section id="extract-studies-and-perform-a-basic-clean-of-dataset-3" class="level4">
<h4 class="anchored" data-anchor-id="extract-studies-and-perform-a-basic-clean-of-dataset-3">Extract studies and perform a basic clean of dataset</h4>
<p><strong>Notes pre-search:</strong> Some key terms I have found in the literature are “<a href="https://pubmed.ncbi.nlm.nih.gov/30920291">work addiction</a>” and “<a href="https://pubmed.ncbi.nlm.nih.gov/28425778">workaholism</a>”</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Workaholism
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="https://doi.org/10.1556/2006.7.2018.05">Griffiths et al.&nbsp;(2018)</a> argue that while work addiction and “workaholism” are similar and used interchangeably, the latter can refer more broadly to excessive work and can sometimes be used positively. After reviewing the studies on workaholism, it seems they often <a href="https://pubmed.ncbi.nlm.nih.gov/33465021/">use addiction terminology</a> and/or focus on the <a href="https://pubmed.ncbi.nlm.nih.gov/34909987/">negative effects on people's lives</a> in a way that resembles addiction research so I decided to retain this search term here.</p>
</div>
</div>
<p><strong>Actual search used:</strong> ((“work addiction”[Title/Abstract]) OR (“addiction to work”[Title/Abstract])) OR (“workaholism”[Title/Abstract])</p>
<p><strong>Manual search results:</strong> <a href="https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%22work+addiction%22%5BTitle%2FAbstract%5D%29+OR+%28%22addiction+to+work%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22workaholism%22%5BTitle%2FAbstract%5D%29&amp;size=200">link</a></p>
<p><strong>Notes post-search:</strong> Again, I manually inspected all of the results directly in the PubMed site. All appeared relevant.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  Clean environment:</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the search term:</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>search_term_work <span class="ot">&lt;-</span> <span class="st">'("work addiction"[Title/Abstract]) OR ("addiction to work"[Title/Abstract]) OR ("workaholism"[Title/Abstract])'</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use entrez_search to get the IDs of the articles:</span></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>search_results_work <span class="ot">&lt;-</span> <span class="fu">entrez_search</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">term=</span>search_term_work, <span class="at">retmax=</span><span class="dv">20000</span>)</span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>id_list_work <span class="ot">&lt;-</span> search_results_work<span class="sc">$</span>ids</span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Split id list into chunks of 100 for chunk/batches:</span></span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>chunks <span class="ot">&lt;-</span> <span class="fu">split</span>(id_list_work, <span class="fu">ceiling</span>(<span class="fu">seq_along</span>(id_list_work)<span class="sc">/</span><span class="dv">500</span>))</span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch details for each chunk of articles:</span></span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>article_details_work <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(chunks, <span class="cf">function</span>(ids) {</span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fetch details of the articles:</span></span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">entrez_fetch</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">id=</span>ids, <span class="at">rettype=</span><span class="st">"medline"</span>, <span class="at">retmode=</span><span class="st">"text"</span>)</span>
<span id="cb87-19"><a href="#cb87-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-20"><a href="#cb87-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split the articles into individual articles:</span></span>
<span id="cb87-21"><a href="#cb87-21" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(articles, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb87-22"><a href="#cb87-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-23"><a href="#cb87-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process each article:</span></span>
<span id="cb87-24"><a href="#cb87-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(articles, <span class="cf">function</span>(article) {</span>
<span id="cb87-25"><a href="#cb87-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Split the article into lines:</span></span>
<span id="cb87-26"><a href="#cb87-26" aria-hidden="true" tabindex="-1"></a>    lines <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(article, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb87-27"><a href="#cb87-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb87-28"><a href="#cb87-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the details we're interested in:</span></span>
<span id="cb87-29"><a href="#cb87-29" aria-hidden="true" tabindex="-1"></a>    details_work <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb87-30"><a href="#cb87-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">PMID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb87-31"><a href="#cb87-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">DP =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb87-32"><a href="#cb87-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">TI =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb87-33"><a href="#cb87-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">LID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb87-34"><a href="#cb87-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">AB =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb87-35"><a href="#cb87-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">FAU =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb87-36"><a href="#cb87-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">AD =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb87-37"><a href="#cb87-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">LA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb87-38"><a href="#cb87-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">PT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb87-39"><a href="#cb87-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">TA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb87-40"><a href="#cb87-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">COIS =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb87-41"><a href="#cb87-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">JT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb87-42"><a href="#cb87-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb87-43"><a href="#cb87-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb87-44"><a href="#cb87-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert the list of details into a one-row data frame:</span></span>
<span id="cb87-45"><a href="#cb87-45" aria-hidden="true" tabindex="-1"></a>    details_df_work <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(details_work)</span>
<span id="cb87-46"><a href="#cb87-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb87-47"><a href="#cb87-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(details_df_work)</span>
<span id="cb87-48"><a href="#cb87-48" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb87-49"><a href="#cb87-49" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb87-50"><a href="#cb87-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-51"><a href="#cb87-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the results:</span></span>
<span id="cb87-52"><a href="#cb87-52" aria-hidden="true" tabindex="-1"></a>article_details_work <span class="sc">%&gt;%</span></span>
<span id="cb87-53"><a href="#cb87-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb87-54"><a href="#cb87-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb87-55"><a href="#cb87-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-56"><a href="#cb87-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's remove the identifiers at the beginning of each data point:</span></span>
<span id="cb87-57"><a href="#cb87-57" aria-hidden="true" tabindex="-1"></a>rep_str <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'PMID- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'DP  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TI  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LID - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AB  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb87-58"><a href="#cb87-58" aria-hidden="true" tabindex="-1"></a>             <span class="st">'FAU - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AD  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LA  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'PT  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TA  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb87-59"><a href="#cb87-59" aria-hidden="true" tabindex="-1"></a>             <span class="st">'COIS- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'JT  - '</span> <span class="ot">=</span> <span class="st">''</span>)</span>
<span id="cb87-60"><a href="#cb87-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-61"><a href="#cb87-61" aria-hidden="true" tabindex="-1"></a>results_work <span class="ot">&lt;-</span> article_details_work <span class="sc">%&gt;%</span></span>
<span id="cb87-62"><a href="#cb87-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">str_replace_all</span>(., rep_str))) <span class="sc">%&gt;%</span> <span class="co"># Remove identifiers</span></span>
<span id="cb87-63"><a href="#cb87-63" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now separate the date year and month/day info:</span></span>
<span id="cb87-64"><a href="#cb87-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(DP, <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Month"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st"> "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb87-65"><a href="#cb87-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.numeric</span>(Year)) <span class="sc">%&gt;%</span> <span class="co"># Convert Year to numeric</span></span>
<span id="cb87-66"><a href="#cb87-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="co"># Let's also provide more descriptive names for each of the columns</span></span>
<span id="cb87-67"><a href="#cb87-67" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Title"</span> <span class="ot">=</span> <span class="st">"TI"</span>, </span>
<span id="cb87-68"><a href="#cb87-68" aria-hidden="true" tabindex="-1"></a>         <span class="st">"DOI"</span> <span class="ot">=</span> <span class="st">"LID"</span>, </span>
<span id="cb87-69"><a href="#cb87-69" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Abstract"</span> <span class="ot">=</span> <span class="st">"AB"</span>, </span>
<span id="cb87-70"><a href="#cb87-70" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Full_Author_Name"</span> <span class="ot">=</span> <span class="st">"FAU"</span>, </span>
<span id="cb87-71"><a href="#cb87-71" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Author_Address"</span> <span class="ot">=</span> <span class="st">"AD"</span>, </span>
<span id="cb87-72"><a href="#cb87-72" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Language"</span> <span class="ot">=</span> <span class="st">"LA"</span>, </span>
<span id="cb87-73"><a href="#cb87-73" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Publication_Type"</span> <span class="ot">=</span> <span class="st">"PT"</span>, </span>
<span id="cb87-74"><a href="#cb87-74" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_name_short"</span> <span class="ot">=</span> <span class="st">"TA"</span>,</span>
<span id="cb87-75"><a href="#cb87-75" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Conflict_of_Interest_Statement"</span> <span class="ot">=</span> <span class="st">"COIS"</span>,</span>
<span id="cb87-76"><a href="#cb87-76" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_Title"</span> <span class="ot">=</span> <span class="st">"JT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb87-77"><a href="#cb87-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb87-78"><a href="#cb87-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-79"><a href="#cb87-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-80"><a href="#cb87-80" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the initial results before proceeding so we can't lose them!</span></span>
<span id="cb87-81"><a href="#cb87-81" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_work, <span class="st">"Data extraction/work_data.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb87-82"><a href="#cb87-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="extract-full-title-using-rvest-3" class="level4">
<h4 class="anchored" data-anchor-id="extract-full-title-using-rvest-3">Extract full title using rvest</h4>
<p>Again, we’re going to use the <code>rvest</code> package to scrape the titles returned from the manual search in PubMed, then join the two datasets using the PMID, retaining the title from this new dataset.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the URL</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>url_work_rvest <span class="ot">&lt;-</span> <span class="st">"https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%22work+addiction%22%5BTitle%2FAbstract%5D%29+OR+%28%22addiction+to+work%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22workaholism%22%5BTitle%2FAbstract%5D%29&amp;size=200"</span> <span class="co"># 275 results on 20/07/2023</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and parse the webpage</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>webpage_work_rvest <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_work_rvest)</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the total number of search results</span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>results_count_work <span class="ot">&lt;-</span> webpage_work_rvest <span class="sc">%&gt;%</span></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">".results-amount .value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">","</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the number of pages</span></span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a>results_per_page_work <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a>total_pages_work <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(results_count_work[<span class="dv">1</span>] <span class="sc">/</span> results_per_page_work)</span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results_count_work and total_pages_work</span></span>
<span id="cb88-19"><a href="#cb88-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results_count_work)</span>
<span id="cb88-20"><a href="#cb88-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(total_pages_work)</span>
<span id="cb88-21"><a href="#cb88-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-22"><a href="#cb88-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-23"><a href="#cb88-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty data frame</span></span>
<span id="cb88-24"><a href="#cb88-24" aria-hidden="true" tabindex="-1"></a>results_work_rvest <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb88-25"><a href="#cb88-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-26"><a href="#cb88-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each page and scrape the data</span></span>
<span id="cb88-27"><a href="#cb88-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (page <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span>(total_pages_work <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb88-28"><a href="#cb88-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the page parameter in the URL for the current page</span></span>
<span id="cb88-29"><a href="#cb88-29" aria-hidden="true" tabindex="-1"></a>  current_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(url_work_rvest, <span class="st">"&amp;page="</span>, page <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb88-30"><a href="#cb88-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-31"><a href="#cb88-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read and parse the current webpage</span></span>
<span id="cb88-32"><a href="#cb88-32" aria-hidden="true" tabindex="-1"></a>  current_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(current_url)</span>
<span id="cb88-33"><a href="#cb88-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-34"><a href="#cb88-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract title</span></span>
<span id="cb88-35"><a href="#cb88-35" aria-hidden="true" tabindex="-1"></a>  Title <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb88-36"><a href="#cb88-36" aria-hidden="true" tabindex="-1"></a>    current_page <span class="sc">%&gt;%</span></span>
<span id="cb88-37"><a href="#cb88-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_nodes</span>(<span class="st">".docsum-title"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb88-38"><a href="#cb88-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb88-39"><a href="#cb88-39" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb88-40"><a href="#cb88-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Error extracting title info on page"</span>, page <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb88-41"><a href="#cb88-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">length</span>(Title))  <span class="co"># Return a vector of NAs with the same length as Title</span></span>
<span id="cb88-42"><a href="#cb88-42" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb88-43"><a href="#cb88-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-44"><a href="#cb88-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the PMID</span></span>
<span id="cb88-45"><a href="#cb88-45" aria-hidden="true" tabindex="-1"></a>  pmid <span class="ot">&lt;-</span> current_page <span class="sc">%&gt;%</span></span>
<span id="cb88-46"><a href="#cb88-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".docsum-pmid"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb88-47"><a href="#cb88-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb88-48"><a href="#cb88-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-49"><a href="#cb88-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a data frame with the extracted data</span></span>
<span id="cb88-50"><a href="#cb88-50" aria-hidden="true" tabindex="-1"></a>  current_results_work <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Title =</span> Title,</span>
<span id="cb88-51"><a href="#cb88-51" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">PMID =</span> pmid)</span>
<span id="cb88-52"><a href="#cb88-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-53"><a href="#cb88-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the current results with the previous results</span></span>
<span id="cb88-54"><a href="#cb88-54" aria-hidden="true" tabindex="-1"></a>  results_work_rvest <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results_work_rvest, current_results_work)</span>
<span id="cb88-55"><a href="#cb88-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-56"><a href="#cb88-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Introduce a delay to avoid overloading the server</span></span>
<span id="cb88-57"><a href="#cb88-57" aria-hidden="true" tabindex="-1"></a>  sleep_time <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> <span class="dv">5</span>, <span class="at">max =</span> <span class="dv">15</span>)</span>
<span id="cb88-58"><a href="#cb88-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(sleep_time)</span>
<span id="cb88-59"><a href="#cb88-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb88-60"><a href="#cb88-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-61"><a href="#cb88-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the extracted data</span></span>
<span id="cb88-62"><a href="#cb88-62" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as_tibble</span>(results_work_rvest))</span>
<span id="cb88-63"><a href="#cb88-63" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="refine-dataset-3" class="level4">
<h4 class="anchored" data-anchor-id="refine-dataset-3">Refine dataset</h4>
<p>Now we need to identify and remove any duplicates, irrelevant studies, or entries with any other issues (e.g., those that turn out to be books)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in first dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>results_work<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/work_data.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in second dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>results_work_rvest<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/work_titles.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge our two datasets:</span></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>results_work2 <span class="ot">&lt;-</span> results_work <span class="sc">%&gt;%</span></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Title_trunc"</span> <span class="ot">=</span> <span class="st">"Title"</span>) <span class="sc">%&gt;%</span> <span class="co"># Designate the truncated title from our primary dataset so we can remove it once we get the full title</span></span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(results_work_rvest, <span class="at">by =</span> <span class="st">"PMID"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Title_trunc) <span class="sc">%&gt;%</span> <span class="co"># Bye truncated title</span></span>
<span id="cb89-15"><a href="#cb89-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Title) <span class="sc">%&gt;%</span> <span class="co"># Place full title first for ease</span></span>
<span id="cb89-16"><a href="#cb89-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 275 × 13
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 The social… 3.74e7  2023 Jun   10.1… "Workah… Negura, Lilian;… "University o…
 2 Validity a… 3.72e7  2023 &lt;NA&gt;  10.3… "BACKGR… Liu, Yuanyuan; … "Department o…
 3 Effects of… 3.72e7  2023 May   bmjq… "OBJECT… Maisonneuve, Fr… "Human Resour…
 4 Work addic… 3.71e7  2023 &lt;NA&gt;  10.3… "INTROD… Bereznowski, Pi… "Faculty of S…
 5 Severity o… 3.69e7  2023 Jun   10.1… "INTROD… Peter, Lea; Pak… "Department o…
 6 The Role o… 3.69e7  2023 Mar   10.3… "The cu… Morkeviciute, M… "Department o…
 7 How and Wh… 3.67e7  2023 Jan   10.3… "Althou… Sommovigo, Vale… "Department o…
 8 Associatio… 3.66e7  2022 &lt;NA&gt;  10.3… "INTROD… Wettstein, Alex… "Department o…
 9 Effect of … 3.66e7  2023 May   10.1… "AIM: T… Xie, Lin-Li; Ji… "University o…
10 Validity o… 3.65e7  2022 Dec   10.1… "There … Seretis, Dionys… "Department o…
# ℹ 265 more rows
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on title:</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_work2 <span class="sc">%&gt;%</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Title) <span class="sc">%&gt;%</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1   275</code></pre>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on PMID:</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_work2 <span class="sc">%&gt;%</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(PMID) <span class="sc">%&gt;%</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1   275</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates where the title, year, and authors are all the same:</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>results_work2 <span class="sc">%&gt;%</span> </span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, </span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>           Journal_name_short, </span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>           Full_Author_Name) <span class="sc">%&gt;%</span> </span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 13
# Groups:   Title, Journal_name_short, Full_Author_Name [0]
# ℹ 13 variables: Title &lt;chr&gt;, PMID &lt;int&gt;, Year &lt;int&gt;, Month &lt;chr&gt;, DOI &lt;chr&gt;,
#   Abstract &lt;chr&gt;, Full_Author_Name &lt;chr&gt;, Author_Address &lt;chr&gt;,
#   Language &lt;chr&gt;, Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates were just the title, journal and year are the same:</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>results_work2 <span class="sc">%&gt;%</span> </span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, </span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>           Journal_name_short, </span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>           Year) <span class="sc">%&gt;%</span> </span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>)<span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 13
# Groups:   Title, Journal_name_short, Year [0]
# ℹ 13 variables: Title &lt;chr&gt;, PMID &lt;int&gt;, Year &lt;int&gt;, Month &lt;chr&gt;, DOI &lt;chr&gt;,
#   Abstract &lt;chr&gt;, Full_Author_Name &lt;chr&gt;, Author_Address &lt;chr&gt;,
#   Language &lt;chr&gt;, Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Upon manual inspection of the dataset, there appears to be one study with the title "Overearning"  which doesn't seem to meet my criteria for inclusion.  Therefore, let's remove this here:</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Visually inspect for duplicates/Check results:</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_work2)</span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Confirming that I have checked this reduces the number of studies by 1.</span></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  Okay, now we are confident that we have a clean dataset, let's explore!</span></span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of the Year  variable:</span></span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(results_work2<span class="sc">$</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1979    2014    2018    2015    2021    2023 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of publications per year:</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>work_hist<span class="ot">&lt;-</span> <span class="fu">hist</span>(results_work2<span class="sc">$</span>Year,</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1960</span>,<span class="dv">2023</span>),</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="dv">40</span>,</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">main =</span> <span class="st">"Papers published per year on Work Addiction (PubMed)"</span>,</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlab =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PubMed-Article-Extraction-Using-rentrez_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of separate journals:</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>results_work2 <span class="sc">%&gt;%</span> </span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 120 × 1
   Journal_name_short   
   &lt;chr&gt;                
 1 AORN J               
 2 Acta Psychol (Amst)  
 3 Addict Behav Rep     
 4 Adicciones           
 5 Am J Med             
 6 Anxiety Stress Coping
 7 Assessment           
 8 Aust N Z J Psychiatry
 9 BMJ Open             
10 BMJ Qual Saf         
11 Behav Sci (Basel)    
12 CNS Spectr           
13 Chronobiol Int       
14 Cien Saude Colet     
15 Cienc Trab           
16 Einstein (Sao Paulo) 
17 Electron Physician   
18 Encephale            
19 Eur Addict Res       
20 Eur J Psychol        
# ℹ 100 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Most popular journals:</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>results_work2 <span class="sc">%&gt;%</span> </span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 120 × 2
   Journal_name_short                  n
   &lt;chr&gt;                           &lt;int&gt;
 1 Int J Environ Res Public Health    31
 2 Front Psychol                      20
 3 J Behav Addict                     20
 4 Psychol Rep                        15
 5 Ind Health                          9
 6 J Occup Health Psychol              6
 7 Work                                6
 8 Med Pr                              5
 9 PLoS One                            5
10 Encephale                           4
11 Eur J Psychol                       4
12 Front Public Health                 4
13 Int J Behav Med                     4
14 J Occup Environ Med                 4
15 J Pers Assess                       4
16 Soc Sci Med                         4
17 Stress Health                       4
18 Int J Occup Med Environ Health      3
19 J Psychol                           3
20 Occup Med (Lond)                    3
# ℹ 100 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now I need to add a label to all of these studies to signify that they Were returned from the work search so that we can distinguish them from other studies results_work2 we later joined the datasets together:</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>Label_work <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"work"</span>, <span class="at">times =</span> <span class="fu">count</span>(results_work2))</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>results_work_final <span class="ot">&lt;-</span> results_work2 <span class="sc">%&gt;%</span> </span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(Label_work) <span class="sc">%&gt;%</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Label =</span> <span class="dv">14</span>) <span class="sc">%&gt;%</span></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...14`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 275 × 14
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 The social… 3.74e7  2023 Jun   10.1… "Workah… Negura, Lilian;… "University o…
 2 Validity a… 3.72e7  2023 &lt;NA&gt;  10.3… "BACKGR… Liu, Yuanyuan; … "Department o…
 3 Effects of… 3.72e7  2023 May   bmjq… "OBJECT… Maisonneuve, Fr… "Human Resour…
 4 Work addic… 3.71e7  2023 &lt;NA&gt;  10.3… "INTROD… Bereznowski, Pi… "Faculty of S…
 5 Severity o… 3.69e7  2023 Jun   10.1… "INTROD… Peter, Lea; Pak… "Department o…
 6 The Role o… 3.69e7  2023 Mar   10.3… "The cu… Morkeviciute, M… "Department o…
 7 How and Wh… 3.67e7  2023 Jan   10.3… "Althou… Sommovigo, Vale… "Department o…
 8 Associatio… 3.66e7  2022 &lt;NA&gt;  10.3… "INTROD… Wettstein, Alex… "Department o…
 9 Effect of … 3.66e7  2023 May   10.1… "AIM: T… Xie, Lin-Li; Ji… "University o…
10 Validity o… 3.65e7  2022 Dec   10.1… "There … Seretis, Dionys… "Department o…
# ℹ 265 more rows
# ℹ 6 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;, Label &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_work_final)</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the cleaned results</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_work_final, <span class="st">"Data extraction/work_data_cleaned.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="exercise-addiction" class="level2">
<h2 class="anchored" data-anchor-id="exercise-addiction">Exercise addiction</h2>
<section id="extract-studies-and-perform-a-basic-clean-of-dataset-4" class="level4">
<h4 class="anchored" data-anchor-id="extract-studies-and-perform-a-basic-clean-of-dataset-4">Extract studies and perform a basic clean of dataset</h4>
<p><strong>Notes pre-search:</strong> No MeSH terms for this, so I looked up the most recent systematic review on the topic that I could find (https://doi.org/10.1007/s11469-021-00568-1) and then examine their search strategy. They use the following terms: exercise addiction, exercise dependence, compulsory exercise, obligatory exercise.</p>
<p><strong>Actual search used:</strong> ((((“Exercise addiction”[Title/Abstract]) OR (“exercise dependence”[Title/Abstract])) OR (“compulsory exercise”[Title/Abstract])) OR (“obligatory exercise”[Title/Abstract])) OR (“Addiction to exercise”[Title/Abstract])</p>
<p><strong>Manual search results:</strong> <a href="https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%28%28%22Exercise+addiction%22%5BTitle%2FAbstract%5D%29+OR+%28%22exercise+dependence%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22compulsory+exercise%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22obligatory+exercise%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22Addiction+to+exercise%22%5BTitle%2FAbstract%5D%29&amp;size=200">link</a></p>
<p><strong>Notes post-search:</strong> I manually inspected all of the results returned on PubMed. The search term ” compulsory exercise” is slightly problematic for this search as it sometimes used in the context of exercise rehabilitation/animal studies. The following studies were found to be not relevant:</p>
<ul>
<li><p>“[Doping in sports].”</p></li>
<li><p>“Psychoeducation: a basic psychotherapeutic intervention for patients with schizophrenia and their families.”</p></li>
<li><p>“Metabolic response to fasting in experimental intrauterine growth retardation induced by surgical and nonsurgical maternal stress.”</p></li>
<li><p>“[Arguments in favor of Integrated Health Care as regular health care provision in cardiology].”</p></li>
<li><p>“[What can a chair on alternatives to animal experimentation effectuate?].”</p></li>
<li><p>“Mandatory Physical Education Classes of Two Hours per Week Can Be Comparable to Losing More than Five Kilograms for Chinese College Students.”</p></li>
<li><p>“Degeneration of dystrophic or injured skeletal muscles induces high expression of Galectin-1.”</p></li>
<li><p>“A Pilot Study of a 12-Week Leg Exercise and a 6- and 12-Month Follow-Up in Community-Dwelling Diabetic Elders: Effect on Dynamic Standing Balance.”</p></li>
<li><p>“Opposite effects of catalase and MnSOD ectopic expression on stress induced defects and mortality in the desmin deficient cardiomyopathy model.”</p></li>
<li><p>“Beef extract supplementation increases leg muscle mass and modifies skeletal muscle fiber types in rats.”</p></li>
<li><p>“Does exercise deprivation increase the tendency towards morphine dependence in rats?.”</p></li>
<li><p>“A Polymeric Bilayer Multi-Legged Soft Millirobot with Dual Actuation and Humidity Sensing.”</p></li>
</ul>
<div class="sourceCode" id="cb110"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  Clean environment:</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the search term:</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>search_term_exercise <span class="ot">&lt;-</span> <span class="st">'(((("Exercise addiction"[Title/Abstract]) OR ("exercise dependence"[Title/Abstract])) OR ("compulsory exercise"[Title/Abstract])) OR ("obligatory exercise"[Title/Abstract])) OR ("Addiction to exercise"[Title/Abstract])'</span></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use entrez_search to get the IDs of the articles:</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>search_results_exercise <span class="ot">&lt;-</span> <span class="fu">entrez_search</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">term=</span>search_term_exercise, <span class="at">retmax=</span><span class="dv">20000</span>)</span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>id_list_exercise <span class="ot">&lt;-</span> search_results_exercise<span class="sc">$</span>ids</span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Split id list into chunks of 100 for chunk/batches:</span></span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a>chunks <span class="ot">&lt;-</span> <span class="fu">split</span>(id_list_exercise, <span class="fu">ceiling</span>(<span class="fu">seq_along</span>(id_list_exercise)<span class="sc">/</span><span class="dv">100</span>))</span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-15"><a href="#cb110-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch details for each chunk of articles:</span></span>
<span id="cb110-16"><a href="#cb110-16" aria-hidden="true" tabindex="-1"></a>article_details_exercise <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(chunks, <span class="cf">function</span>(ids) {</span>
<span id="cb110-17"><a href="#cb110-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fetch details of the articles:</span></span>
<span id="cb110-18"><a href="#cb110-18" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">entrez_fetch</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">id=</span>ids, <span class="at">rettype=</span><span class="st">"medline"</span>, <span class="at">retmode=</span><span class="st">"text"</span>)</span>
<span id="cb110-19"><a href="#cb110-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb110-20"><a href="#cb110-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split the articles into individual articles:</span></span>
<span id="cb110-21"><a href="#cb110-21" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(articles, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb110-22"><a href="#cb110-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb110-23"><a href="#cb110-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process each article:</span></span>
<span id="cb110-24"><a href="#cb110-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(articles, <span class="cf">function</span>(article) {</span>
<span id="cb110-25"><a href="#cb110-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Split the article into lines:</span></span>
<span id="cb110-26"><a href="#cb110-26" aria-hidden="true" tabindex="-1"></a>    lines <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(article, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb110-27"><a href="#cb110-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb110-28"><a href="#cb110-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the details we're interested in:</span></span>
<span id="cb110-29"><a href="#cb110-29" aria-hidden="true" tabindex="-1"></a>    details_exercise <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb110-30"><a href="#cb110-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">PMID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb110-31"><a href="#cb110-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">DP =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb110-32"><a href="#cb110-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">TI =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb110-33"><a href="#cb110-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">LID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb110-34"><a href="#cb110-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">AB =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb110-35"><a href="#cb110-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">FAU =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb110-36"><a href="#cb110-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">AD =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb110-37"><a href="#cb110-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">LA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb110-38"><a href="#cb110-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">PT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb110-39"><a href="#cb110-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">TA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb110-40"><a href="#cb110-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">COIS =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb110-41"><a href="#cb110-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">JT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb110-42"><a href="#cb110-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb110-43"><a href="#cb110-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb110-44"><a href="#cb110-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert the list of details into a one-row data frame:</span></span>
<span id="cb110-45"><a href="#cb110-45" aria-hidden="true" tabindex="-1"></a>    details_df_exercise <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(details_exercise)</span>
<span id="cb110-46"><a href="#cb110-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb110-47"><a href="#cb110-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(details_df_exercise)</span>
<span id="cb110-48"><a href="#cb110-48" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb110-49"><a href="#cb110-49" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb110-50"><a href="#cb110-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-51"><a href="#cb110-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the results:</span></span>
<span id="cb110-52"><a href="#cb110-52" aria-hidden="true" tabindex="-1"></a>article_details_exercise <span class="sc">%&gt;%</span></span>
<span id="cb110-53"><a href="#cb110-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb110-54"><a href="#cb110-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb110-55"><a href="#cb110-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-56"><a href="#cb110-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's remove the identifiers at the beginning of each data point:</span></span>
<span id="cb110-57"><a href="#cb110-57" aria-hidden="true" tabindex="-1"></a>rep_str <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'PMID- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'DP  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TI  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LID - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AB  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb110-58"><a href="#cb110-58" aria-hidden="true" tabindex="-1"></a>             <span class="st">'FAU - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AD  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LA  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'PT  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TA  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb110-59"><a href="#cb110-59" aria-hidden="true" tabindex="-1"></a>             <span class="st">'COIS- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'JT  - '</span> <span class="ot">=</span> <span class="st">''</span>)</span>
<span id="cb110-60"><a href="#cb110-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-61"><a href="#cb110-61" aria-hidden="true" tabindex="-1"></a>results_exercise <span class="ot">&lt;-</span> article_details_exercise <span class="sc">%&gt;%</span></span>
<span id="cb110-62"><a href="#cb110-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">str_replace_all</span>(., rep_str))) <span class="sc">%&gt;%</span> <span class="co"># Remove identifiers</span></span>
<span id="cb110-63"><a href="#cb110-63" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now separate the date year and month/day info:</span></span>
<span id="cb110-64"><a href="#cb110-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(DP, <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Month"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st"> "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb110-65"><a href="#cb110-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.numeric</span>(Year)) <span class="sc">%&gt;%</span> <span class="co"># Convert Year to numeric</span></span>
<span id="cb110-66"><a href="#cb110-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="co"># Let's also provide more descriptive names for each of the columns</span></span>
<span id="cb110-67"><a href="#cb110-67" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Title"</span> <span class="ot">=</span> <span class="st">"TI"</span>, </span>
<span id="cb110-68"><a href="#cb110-68" aria-hidden="true" tabindex="-1"></a>         <span class="st">"DOI"</span> <span class="ot">=</span> <span class="st">"LID"</span>, </span>
<span id="cb110-69"><a href="#cb110-69" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Abstract"</span> <span class="ot">=</span> <span class="st">"AB"</span>, </span>
<span id="cb110-70"><a href="#cb110-70" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Full_Author_Name"</span> <span class="ot">=</span> <span class="st">"FAU"</span>, </span>
<span id="cb110-71"><a href="#cb110-71" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Author_Address"</span> <span class="ot">=</span> <span class="st">"AD"</span>, </span>
<span id="cb110-72"><a href="#cb110-72" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Language"</span> <span class="ot">=</span> <span class="st">"LA"</span>, </span>
<span id="cb110-73"><a href="#cb110-73" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Publication_Type"</span> <span class="ot">=</span> <span class="st">"PT"</span>, </span>
<span id="cb110-74"><a href="#cb110-74" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_name_short"</span> <span class="ot">=</span> <span class="st">"TA"</span>,</span>
<span id="cb110-75"><a href="#cb110-75" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Conflict_of_Interest_Statement"</span> <span class="ot">=</span> <span class="st">"COIS"</span>,</span>
<span id="cb110-76"><a href="#cb110-76" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_Title"</span> <span class="ot">=</span> <span class="st">"JT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb110-77"><a href="#cb110-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb110-78"><a href="#cb110-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-79"><a href="#cb110-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the initial results before proceeding so we can't lose them!</span></span>
<span id="cb110-80"><a href="#cb110-80" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_exercise, <span class="st">"Data extraction/exercise_data.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb110-81"><a href="#cb110-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-82"><a href="#cb110-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="extract-full-title-using-rvest-4" class="level4">
<h4 class="anchored" data-anchor-id="extract-full-title-using-rvest-4">Extract full title using rvest</h4>
<p>Again, we’re going to use the <code>rvest</code> package to scrape the titles returned from the manual search in PubMed, then join the two datasets using the PMID, retaining the title from this new dataset.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add search URL:</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>url_exercise_rvest <span class="ot">&lt;-</span> <span class="st">"https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%28%28%22Exercise+addiction%22%5BTitle%2FAbstract%5D%29+OR+%28%22exercise+dependence%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22compulsory+exercise%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22obligatory+exercise%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22Addiction+to+exercise%22%5BTitle%2FAbstract%5D%29&amp;size=200"</span> <span class="co"># 386 results returned on 10/07/2023</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and parse the webpage</span></span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>webpage_exercise_rvest <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_exercise_rvest)</span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the total number of search results</span></span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>results_count_exercise <span class="ot">&lt;-</span> webpage_exercise_rvest <span class="sc">%&gt;%</span></span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">".results-amount .value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">","</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb111-13"><a href="#cb111-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb111-14"><a href="#cb111-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-15"><a href="#cb111-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the number of pages</span></span>
<span id="cb111-16"><a href="#cb111-16" aria-hidden="true" tabindex="-1"></a>results_per_page_exercise <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb111-17"><a href="#cb111-17" aria-hidden="true" tabindex="-1"></a>total_pages_exercise <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(results_count_exercise[<span class="dv">1</span>] <span class="sc">/</span> results_per_page_exercise)</span>
<span id="cb111-18"><a href="#cb111-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results_count_exercise and total_pages_exercise</span></span>
<span id="cb111-19"><a href="#cb111-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results_count_exercise)</span>
<span id="cb111-20"><a href="#cb111-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(total_pages_exercise)</span>
<span id="cb111-21"><a href="#cb111-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-22"><a href="#cb111-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-23"><a href="#cb111-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty data frame</span></span>
<span id="cb111-24"><a href="#cb111-24" aria-hidden="true" tabindex="-1"></a>results_exercise_rvest <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb111-25"><a href="#cb111-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-26"><a href="#cb111-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each page and scrape the data</span></span>
<span id="cb111-27"><a href="#cb111-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (page <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span>(total_pages_exercise <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb111-28"><a href="#cb111-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the page parameter in the URL for the current page</span></span>
<span id="cb111-29"><a href="#cb111-29" aria-hidden="true" tabindex="-1"></a>  current_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(url_exercise_rvest, <span class="st">"&amp;page="</span>, page <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb111-30"><a href="#cb111-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb111-31"><a href="#cb111-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read and parse the current webpage</span></span>
<span id="cb111-32"><a href="#cb111-32" aria-hidden="true" tabindex="-1"></a>  current_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(current_url)</span>
<span id="cb111-33"><a href="#cb111-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb111-34"><a href="#cb111-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract title</span></span>
<span id="cb111-35"><a href="#cb111-35" aria-hidden="true" tabindex="-1"></a>  Title <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb111-36"><a href="#cb111-36" aria-hidden="true" tabindex="-1"></a>    current_page <span class="sc">%&gt;%</span></span>
<span id="cb111-37"><a href="#cb111-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_nodes</span>(<span class="st">".docsum-title"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb111-38"><a href="#cb111-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb111-39"><a href="#cb111-39" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb111-40"><a href="#cb111-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Error extracting title info on page"</span>, page <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb111-41"><a href="#cb111-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">length</span>(Title))  <span class="co"># Return a vector of NAs with the same length as Title</span></span>
<span id="cb111-42"><a href="#cb111-42" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb111-43"><a href="#cb111-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb111-44"><a href="#cb111-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the PMID</span></span>
<span id="cb111-45"><a href="#cb111-45" aria-hidden="true" tabindex="-1"></a>  pmid <span class="ot">&lt;-</span> current_page <span class="sc">%&gt;%</span></span>
<span id="cb111-46"><a href="#cb111-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".docsum-pmid"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb111-47"><a href="#cb111-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb111-48"><a href="#cb111-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb111-49"><a href="#cb111-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a data frame with the extracted data</span></span>
<span id="cb111-50"><a href="#cb111-50" aria-hidden="true" tabindex="-1"></a>  current_results_exercise <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Title =</span> Title,</span>
<span id="cb111-51"><a href="#cb111-51" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">PMID =</span> pmid)</span>
<span id="cb111-52"><a href="#cb111-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb111-53"><a href="#cb111-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the current results with the previous results</span></span>
<span id="cb111-54"><a href="#cb111-54" aria-hidden="true" tabindex="-1"></a>  results_exercise_rvest <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results_exercise_rvest, current_results_exercise)</span>
<span id="cb111-55"><a href="#cb111-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb111-56"><a href="#cb111-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Introduce a delay to avoid overloading the server</span></span>
<span id="cb111-57"><a href="#cb111-57" aria-hidden="true" tabindex="-1"></a>  sleep_time <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> <span class="dv">5</span>, <span class="at">max =</span> <span class="dv">15</span>)</span>
<span id="cb111-58"><a href="#cb111-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(sleep_time)</span>
<span id="cb111-59"><a href="#cb111-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb111-60"><a href="#cb111-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-61"><a href="#cb111-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the extracted data</span></span>
<span id="cb111-62"><a href="#cb111-62" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as_tibble</span>(results_exercise_rvest))</span>
<span id="cb111-63"><a href="#cb111-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-64"><a href="#cb111-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-65"><a href="#cb111-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the titles before proceeding so we can't lose them!</span></span>
<span id="cb111-66"><a href="#cb111-66" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_exercise_rvest, <span class="st">"Data extraction/exercise_titles.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb111-67"><a href="#cb111-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="refine-dataset-4" class="level4">
<h4 class="anchored" data-anchor-id="refine-dataset-4">Refine dataset</h4>
<p>Now we need to identify and remove any duplicates, irrelevant studies, or entries with any other issues (e.g., those that turn out to be books)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in first dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>results_exercise<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/exercise_data.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in second dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>results_exercise_rvest<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/exercise_titles.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge our two datasets</span></span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>results_exercise2 <span class="ot">&lt;-</span> results_exercise <span class="sc">%&gt;%</span></span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Title_trunc"</span> <span class="ot">=</span> <span class="st">"Title"</span>) <span class="sc">%&gt;%</span> <span class="co"># Designate the truncated title from our primary dataset so we can remove it once we get the full title</span></span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(results_exercise_rvest, <span class="at">by =</span> <span class="st">"PMID"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb112-14"><a href="#cb112-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Title_trunc) <span class="sc">%&gt;%</span> <span class="co"># Bye truncated title</span></span>
<span id="cb112-15"><a href="#cb112-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Title) <span class="sc">%&gt;%</span> <span class="co"># Place full title first for ease</span></span>
<span id="cb112-16"><a href="#cb112-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 386 × 13
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 The Expand… 3.74e7  2023 May   10.1… "Exerci… Granziol, Umber… "Via Venezia …
 2 Classifyin… 3.74e7  2023 Jun   10.1… "OBJECT… Cosh, Suzanne M… "School of Ps…
 3 Effects of… 3.73e7  2023 &lt;NA&gt;  10.2… "PURPOS… Wu, Ruoshan; Ji… "School of Ph…
 4 Ready, set… 3.73e7  2023 Jul   S000… "Alexit… Sweetnam, Taylo… "Behavioural …
 5 Compulsive… 3.73e7  2023 May   S144… "OBJECT… Cosh, S M; McNe… "School of Ps…
 6 Embodying … 3.72e7  2023 Jun   S027… "Exerci… Moreau, Nicolas… "University o…
 7 Investigat… 3.72e7  2023 May   10.1… "BACKGR… Scarth, Morgan;… "Anabolic And…
 8 Understand… 3.72e7  2023 Feb   10.1… "Irrati… Miller, Anthony… "Department o…
 9 Sociocultu… 3.71e7  2023 &lt;NA&gt;  10.3… "BACKGR… Guo, Shuai; Izy… "Faculty of S…
10 The mediat… 3.71e7  2023 Apr   10.1… "BACKGR… Rahme, Deema; D… "Pharmacy Pra…
# ℹ 376 more rows
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check results:</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_exercise2)</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on PMID:</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_exercise2 <span class="sc">%&gt;%</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(PMID) <span class="sc">%&gt;%</span></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1   386</code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on title:</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_exercise2 <span class="sc">%&gt;%</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Title) <span class="sc">%&gt;%</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># n = 2 dupes (jUly 2023)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1   384</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show duplicate:</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>results_exercise2 <span class="sc">%&gt;%</span> </span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title) <span class="sc">%&gt;%</span> </span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># View()</span></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># These all have different PMIDs, DOIs, authors, and years</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 13
# Groups:   Title [2]
  Title          PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
  &lt;chr&gt;         &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
1 Exercise ad… 2.33e7  2013 Feb   10.1… "This a… Landolfi, Emilio "Department o…
2 Exercise ad… 2.33e7  2004 Jul   virt…  &lt;NA&gt;    Shangold, Mona … "Center for W…
3 Exercise de… 3.40e6  1988 Apr   &lt;NA&gt;   &lt;NA&gt;    Dewsnap, P A      &lt;NA&gt;         
4 Exercise de… 3.31e6  1987 Jul   &lt;NA&gt;   &lt;NA&gt;    de Coverley Vea…  &lt;NA&gt;         
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates where the title, year, and authors are all the same:</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>results_exercise2 <span class="sc">%&gt;%</span> </span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, </span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>           Journal_name_short, </span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>           Full_Author_Name) <span class="sc">%&gt;%</span> </span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 13
# Groups:   Title, Journal_name_short, Full_Author_Name [0]
# ℹ 13 variables: Title &lt;chr&gt;, PMID &lt;int&gt;, Year &lt;int&gt;, Month &lt;chr&gt;, DOI &lt;chr&gt;,
#   Abstract &lt;chr&gt;, Full_Author_Name &lt;chr&gt;, Author_Address &lt;chr&gt;,
#   Language &lt;chr&gt;, Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># print() #None</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates were just the title, journal and year are the same:</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>results_exercise2 <span class="sc">%&gt;%</span> </span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, </span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>           Journal_name_short, </span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>           Year) <span class="sc">%&gt;%</span> </span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 13
# Groups:   Title, Journal_name_short, Year [0]
# ℹ 13 variables: Title &lt;chr&gt;, PMID &lt;int&gt;, Year &lt;int&gt;, Month &lt;chr&gt;, DOI &lt;chr&gt;,
#   Abstract &lt;chr&gt;, Full_Author_Name &lt;chr&gt;, Author_Address &lt;chr&gt;,
#   Language &lt;chr&gt;, Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We still have lots of irrelevant studies identified in the manual search that need to be removed. Let's do that now:</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>exerise_irrelevant_studies <span class="ot">&lt;-</span> <span class="fu">c</span>( <span class="co"># List of irrelevant studies</span></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"[Doping in sports]."</span>,</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Psychoeducation: a basic psychotherapeutic intervention for patients with schizophrenia and their families."</span>,</span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Metabolic response to fasting in experimental intrauterine growth retardation induced by surgical and nonsurgical maternal stress."</span>,</span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"[Arguments in favor of Integrated Health Care as regular health care provision in cardiology]."</span>,</span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"[What can a chair on alternatives to animal experimentation effectuate?]."</span>,</span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Mandatory Physical Education Classes of Two Hours per Week Can Be Comparable to Losing More than Five Kilograms for Chinese College Students."</span>,</span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Degeneration of dystrophic or injured skeletal muscles induces high expression of Galectin-1."</span>,</span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"A Pilot Study of a 12-Week Leg Exercise and a 6- and 12-Month Follow-Up in Community-Dwelling Diabetic Elders: Effect on Dynamic Standing Balance."</span>,</span>
<span id="cb124-11"><a href="#cb124-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Opposite effects of catalase and MnSOD ectopic expression on stress induced defects and mortality in the desmin deficient cardiomyopathy model."</span>,</span>
<span id="cb124-12"><a href="#cb124-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Beef extract supplementation increases leg muscle mass and modifies skeletal muscle fiber types in rats."</span>,</span>
<span id="cb124-13"><a href="#cb124-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Does exercise deprivation increase the tendency towards morphine dependence in rats?"</span>,</span>
<span id="cb124-14"><a href="#cb124-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"A Polymeric Bilayer Multi-Legged Soft Millirobot with Dual Actuation and Humidity Sensing."</span></span>
<span id="cb124-15"><a href="#cb124-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb124-16"><a href="#cb124-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-17"><a href="#cb124-17" aria-hidden="true" tabindex="-1"></a>results_exercise3 <span class="ot">&lt;-</span> results_exercise2 <span class="sc">%&gt;%</span></span>
<span id="cb124-18"><a href="#cb124-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Title <span class="sc">%in%</span> exerise_irrelevant_studies) <span class="co"># Filter out irrelevant studies</span></span>
<span id="cb124-19"><a href="#cb124-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-20"><a href="#cb124-20" aria-hidden="true" tabindex="-1"></a><span class="co">#  Okay, now we're confident we have a clean dataset, let's explore!</span></span>
<span id="cb124-21"><a href="#cb124-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-22"><a href="#cb124-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of the Year  variable:</span></span>
<span id="cb124-23"><a href="#cb124-23" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(results_exercise3<span class="sc">$</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1987    2011    2017    2015    2021    2023 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of publications per year:</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>exercise_hist<span class="ot">&lt;-</span> <span class="fu">hist</span>(results_exercise3<span class="sc">$</span>Year,</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1960</span>,<span class="dv">2023</span>),</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="dv">40</span>,</span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">main =</span> <span class="st">"Papers published per year on Exercise Addiction (PubMed)"</span>,</span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlab =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PubMed-Article-Extraction-Using-rentrez_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of separate journals:</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>results_exercise3 <span class="sc">%&gt;%</span> </span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 1
   Journal_name_short      
   &lt;chr&gt;                   
 1 Acta Psychol (Amst)     
 2 Addict Behav            
 3 Addict Behav Rep        
 4 Adicciones              
 5 Adolescence             
 6 Aging Male              
 7 Am J Addict             
 8 Am J Health Behav       
 9 Aust J Physiother       
10 Aust N Z J Psychiatry   
11 BMC Psychiatry          
12 BMC Public Health       
13 BMJ                     
14 BMJ Open Sport Exerc Med
15 Behav Sci (Basel)       
16 Body Image              
17 Br J Addict             
18 Br J Health Psychol     
19 Br J Sports Med         
20 Brain Behav             
# ℹ 130 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Most popular journals:</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>results_exercise3 <span class="sc">%&gt;%</span> </span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 150 × 2
   Journal_name_short                  n
   &lt;chr&gt;                           &lt;int&gt;
 1 J Behav Addict                     36
 2 Int J Environ Res Public Health    15
 3 Front Psychol                      13
 4 Int J Eat Disord                   12
 5 Eat Weight Disord                  11
 6 Percept Mot Skills                 11
 7 Eat Behav                          10
 8 J Sports Med Phys Fitness           9
 9 Addict Behav Rep                    8
10 Br J Sports Med                     8
11 Eur Eat Disord Rev                  8
12 Front Psychiatry                    7
13 Front Sports Act Living             7
14 J Eat Disord                        7
15 Body Image                          5
16 J Sports Sci                        5
17 Nutrients                           5
18 Psychiatry Res                      5
19 Compr Psychiatry                    4
20 J Sport Exerc Psychol               4
# ℹ 130 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_exercise2) # Visually inspect results</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now I need to add a label to all of these studies to signify that they Were returned from the exercise search so that we can distinguish them from other studies when we later joined the datasets together:</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>Label <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"exercise"</span>, <span class="at">times =</span> <span class="fu">count</span>(results_exercise3))</span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>results_exercise_final <span class="ot">&lt;-</span> results_exercise3 <span class="sc">%&gt;%</span> <span class="fu">bind_cols</span>(Label) <span class="sc">%&gt;%</span></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Label =</span> <span class="dv">14</span>) <span class="sc">%&gt;%</span></span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...14`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 374 × 14
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 The Expand… 3.74e7  2023 May   10.1… "Exerci… Granziol, Umber… "Via Venezia …
 2 Classifyin… 3.74e7  2023 Jun   10.1… "OBJECT… Cosh, Suzanne M… "School of Ps…
 3 Effects of… 3.73e7  2023 &lt;NA&gt;  10.2… "PURPOS… Wu, Ruoshan; Ji… "School of Ph…
 4 Ready, set… 3.73e7  2023 Jul   S000… "Alexit… Sweetnam, Taylo… "Behavioural …
 5 Compulsive… 3.73e7  2023 May   S144… "OBJECT… Cosh, S M; McNe… "School of Ps…
 6 Embodying … 3.72e7  2023 Jun   S027… "Exerci… Moreau, Nicolas… "University o…
 7 Investigat… 3.72e7  2023 May   10.1… "BACKGR… Scarth, Morgan;… "Anabolic And…
 8 Understand… 3.72e7  2023 Feb   10.1… "Irrati… Miller, Anthony… "Department o…
 9 Sociocultu… 3.71e7  2023 &lt;NA&gt;  10.3… "BACKGR… Guo, Shuai; Izy… "Faculty of S…
10 The mediat… 3.71e7  2023 Apr   10.1… "BACKGR… Rahme, Deema; D… "Pharmacy Pra…
# ℹ 364 more rows
# ℹ 6 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;, Label &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_exercise_final)</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the cleaned results</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_exercise_final, <span class="st">"Data extraction/exercise_data_cleaned.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="shopping-addiction" class="level2">
<h2 class="anchored" data-anchor-id="shopping-addiction">Shopping addiction</h2>
<section id="extract-studies-and-perform-a-basic-clean-of-dataset-5" class="level4">
<h4 class="anchored" data-anchor-id="extract-studies-and-perform-a-basic-clean-of-dataset-5">Extract studies and perform a basic clean of dataset</h4>
<p><strong>Notes pre-search:</strong> No relevant MeShterms. Looked to literature on the subject to find relevant terms:</p>
<ul>
<li>“Buying-shopping disorder” is the term used in: https://doi.org/10.1556/2006.2020.00035</li>
<li>“Pathological buying” used here: https://pubmed.ncbi.nlm.nih.gov/25393125/</li>
</ul>
<p><strong>Actual search used:</strong> ((“buying-shopping disorder”[Title/Abstract]) OR (“shopping addiction”[Title/Abstract])) OR (“buying addiction”[Title/Abstract])</p>
<ul>
<li>None of these returned any results: “pathological shopping”, “addiction to shopping”, “addiction to buying”, “shopping dependence”, “buying dependence”</li>
</ul>
<p><strong>Manual search results:</strong> <a href="https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%22buying-shopping+disorder%22%5BTitle%2FAbstract%5D%29+OR+%28%22shopping+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22buying+addiction%22%5BTitle%2FAbstract%5D%29&amp;sort=">link</a></p>
<p><strong>Notes post-search:</strong> I manually inspected all of the results returned on PubMed. All studies appeared relevant as of latest search date (see top of document).</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  Clean environment:</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the search term:</span></span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>search_term_shopping <span class="ot">&lt;-</span> <span class="st">'(("buying-shopping disorder"[Title/Abstract]) OR ("shopping addiction"[Title/Abstract])) OR ("buying addiction"[Title/Abstract])'</span></span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use entrez_search to get the IDs of the articles:</span></span>
<span id="cb135-9"><a href="#cb135-9" aria-hidden="true" tabindex="-1"></a>search_results_shopping <span class="ot">&lt;-</span> <span class="fu">entrez_search</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">term=</span>search_term_shopping, <span class="at">retmax=</span><span class="dv">20000</span>)</span>
<span id="cb135-10"><a href="#cb135-10" aria-hidden="true" tabindex="-1"></a>id_list_shopping <span class="ot">&lt;-</span> search_results_shopping<span class="sc">$</span>ids</span>
<span id="cb135-11"><a href="#cb135-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-12"><a href="#cb135-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Split id list into chunks of 100 for chunk/batches:</span></span>
<span id="cb135-13"><a href="#cb135-13" aria-hidden="true" tabindex="-1"></a>chunks <span class="ot">&lt;-</span> <span class="fu">split</span>(id_list_shopping, <span class="fu">ceiling</span>(<span class="fu">seq_along</span>(id_list_shopping)<span class="sc">/</span><span class="dv">100</span>))</span>
<span id="cb135-14"><a href="#cb135-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-15"><a href="#cb135-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch details for each chunk of articles:</span></span>
<span id="cb135-16"><a href="#cb135-16" aria-hidden="true" tabindex="-1"></a>article_details_shopping <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(chunks, <span class="cf">function</span>(ids) {</span>
<span id="cb135-17"><a href="#cb135-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fetch details of the articles:</span></span>
<span id="cb135-18"><a href="#cb135-18" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">entrez_fetch</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">id=</span>ids, <span class="at">rettype=</span><span class="st">"medline"</span>, <span class="at">retmode=</span><span class="st">"text"</span>)</span>
<span id="cb135-19"><a href="#cb135-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb135-20"><a href="#cb135-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split the articles into individual articles:</span></span>
<span id="cb135-21"><a href="#cb135-21" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(articles, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb135-22"><a href="#cb135-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb135-23"><a href="#cb135-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process each article:</span></span>
<span id="cb135-24"><a href="#cb135-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(articles, <span class="cf">function</span>(article) {</span>
<span id="cb135-25"><a href="#cb135-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Split the article into lines:</span></span>
<span id="cb135-26"><a href="#cb135-26" aria-hidden="true" tabindex="-1"></a>    lines <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(article, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb135-27"><a href="#cb135-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-28"><a href="#cb135-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the details we're interested in:</span></span>
<span id="cb135-29"><a href="#cb135-29" aria-hidden="true" tabindex="-1"></a>    details_shopping <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb135-30"><a href="#cb135-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">PMID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb135-31"><a href="#cb135-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">DP =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb135-32"><a href="#cb135-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">TI =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb135-33"><a href="#cb135-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">LID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb135-34"><a href="#cb135-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">AB =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb135-35"><a href="#cb135-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">FAU =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb135-36"><a href="#cb135-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">AD =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb135-37"><a href="#cb135-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">LA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb135-38"><a href="#cb135-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">PT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb135-39"><a href="#cb135-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">TA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb135-40"><a href="#cb135-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">COIS =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb135-41"><a href="#cb135-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">JT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb135-42"><a href="#cb135-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb135-43"><a href="#cb135-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-44"><a href="#cb135-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert the list of details into a one-row data frame:</span></span>
<span id="cb135-45"><a href="#cb135-45" aria-hidden="true" tabindex="-1"></a>    details_df_shopping <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(details_shopping)</span>
<span id="cb135-46"><a href="#cb135-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-47"><a href="#cb135-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(details_df_shopping)</span>
<span id="cb135-48"><a href="#cb135-48" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb135-49"><a href="#cb135-49" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb135-50"><a href="#cb135-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-51"><a href="#cb135-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the results:</span></span>
<span id="cb135-52"><a href="#cb135-52" aria-hidden="true" tabindex="-1"></a>article_details_shopping <span class="sc">%&gt;%</span></span>
<span id="cb135-53"><a href="#cb135-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb135-54"><a href="#cb135-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb135-55"><a href="#cb135-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-56"><a href="#cb135-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's remove the identifiers at the beginning of each data point:</span></span>
<span id="cb135-57"><a href="#cb135-57" aria-hidden="true" tabindex="-1"></a>rep_str <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'PMID- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'DP  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TI  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LID - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AB  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb135-58"><a href="#cb135-58" aria-hidden="true" tabindex="-1"></a>             <span class="st">'FAU - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AD  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LA  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'PT  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TA  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb135-59"><a href="#cb135-59" aria-hidden="true" tabindex="-1"></a>             <span class="st">'COIS- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'JT  - '</span> <span class="ot">=</span> <span class="st">''</span>)</span>
<span id="cb135-60"><a href="#cb135-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-61"><a href="#cb135-61" aria-hidden="true" tabindex="-1"></a>results_shopping <span class="ot">&lt;-</span> article_details_shopping <span class="sc">%&gt;%</span></span>
<span id="cb135-62"><a href="#cb135-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">str_replace_all</span>(., rep_str))) <span class="sc">%&gt;%</span> <span class="co"># Remove identifiers</span></span>
<span id="cb135-63"><a href="#cb135-63" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now separate the date year and month/day info:</span></span>
<span id="cb135-64"><a href="#cb135-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(DP, <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Month"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st"> "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb135-65"><a href="#cb135-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.numeric</span>(Year)) <span class="sc">%&gt;%</span> <span class="co"># Convert Year to numeric</span></span>
<span id="cb135-66"><a href="#cb135-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="co"># Let's also provide more descriptive names for each of the columns</span></span>
<span id="cb135-67"><a href="#cb135-67" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Title"</span> <span class="ot">=</span> <span class="st">"TI"</span>, </span>
<span id="cb135-68"><a href="#cb135-68" aria-hidden="true" tabindex="-1"></a>         <span class="st">"DOI"</span> <span class="ot">=</span> <span class="st">"LID"</span>, </span>
<span id="cb135-69"><a href="#cb135-69" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Abstract"</span> <span class="ot">=</span> <span class="st">"AB"</span>, </span>
<span id="cb135-70"><a href="#cb135-70" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Full_Author_Name"</span> <span class="ot">=</span> <span class="st">"FAU"</span>, </span>
<span id="cb135-71"><a href="#cb135-71" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Author_Address"</span> <span class="ot">=</span> <span class="st">"AD"</span>, </span>
<span id="cb135-72"><a href="#cb135-72" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Language"</span> <span class="ot">=</span> <span class="st">"LA"</span>, </span>
<span id="cb135-73"><a href="#cb135-73" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Publication_Type"</span> <span class="ot">=</span> <span class="st">"PT"</span>, </span>
<span id="cb135-74"><a href="#cb135-74" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_name_short"</span> <span class="ot">=</span> <span class="st">"TA"</span>,</span>
<span id="cb135-75"><a href="#cb135-75" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Conflict_of_Interest_Statement"</span> <span class="ot">=</span> <span class="st">"COIS"</span>,</span>
<span id="cb135-76"><a href="#cb135-76" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_Title"</span> <span class="ot">=</span> <span class="st">"JT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb135-77"><a href="#cb135-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb135-78"><a href="#cb135-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-79"><a href="#cb135-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the initial results before proceeding so we can't lose them!</span></span>
<span id="cb135-80"><a href="#cb135-80" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_shopping, <span class="st">"Data extraction/shopping_data.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb135-81"><a href="#cb135-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-82"><a href="#cb135-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="extract-full-title-using-rvest-5" class="level4">
<h4 class="anchored" data-anchor-id="extract-full-title-using-rvest-5">Extract full title using rvest</h4>
<p>Again, we’re going to use the <code>rvest</code> package to scrape the titles returned from the manual search in PubMed, then join the two datasets using the PMID, retaining the title from this new dataset.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add search URL:</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>url_shopping_rvest <span class="ot">&lt;-</span> <span class="st">"https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%22buying-shopping+disorder%22%5BTitle%2FAbstract%5D%29+OR+%28%22shopping+addiction%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22buying+addiction%22%5BTitle%2FAbstract%5D%29&amp;size=200"</span> <span class="co"># 74 results returned on 19/08/2023</span></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and parse the webpage:</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>webpage_shopping_rvest <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_shopping_rvest)</span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the total number of search results:</span></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a>results_count_shopping <span class="ot">&lt;-</span> webpage_shopping_rvest <span class="sc">%&gt;%</span></span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">".results-amount .value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb136-12"><a href="#cb136-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">","</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-13"><a href="#cb136-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb136-14"><a href="#cb136-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-15"><a href="#cb136-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the number of pages:</span></span>
<span id="cb136-16"><a href="#cb136-16" aria-hidden="true" tabindex="-1"></a>results_per_page_shopping <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb136-17"><a href="#cb136-17" aria-hidden="true" tabindex="-1"></a>total_pages_shopping <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(results_count_shopping[<span class="dv">1</span>] <span class="sc">/</span> results_per_page_shopping)</span>
<span id="cb136-18"><a href="#cb136-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results_count_shopping and total_pages_shopping</span></span>
<span id="cb136-19"><a href="#cb136-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results_count_shopping)</span>
<span id="cb136-20"><a href="#cb136-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(total_pages_shopping)</span>
<span id="cb136-21"><a href="#cb136-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-22"><a href="#cb136-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-23"><a href="#cb136-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a empty data frame:</span></span>
<span id="cb136-24"><a href="#cb136-24" aria-hidden="true" tabindex="-1"></a>results_shopping_rvest <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb136-25"><a href="#cb136-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-26"><a href="#cb136-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each page and scrape the data:</span></span>
<span id="cb136-27"><a href="#cb136-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (page <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span>(total_pages_shopping <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb136-28"><a href="#cb136-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the page parameter in the URL for the current page</span></span>
<span id="cb136-29"><a href="#cb136-29" aria-hidden="true" tabindex="-1"></a>  current_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(url_shopping_rvest, <span class="st">"&amp;page="</span>, page <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb136-30"><a href="#cb136-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-31"><a href="#cb136-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read and parse the current webpage</span></span>
<span id="cb136-32"><a href="#cb136-32" aria-hidden="true" tabindex="-1"></a>  current_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(current_url)</span>
<span id="cb136-33"><a href="#cb136-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-34"><a href="#cb136-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract title</span></span>
<span id="cb136-35"><a href="#cb136-35" aria-hidden="true" tabindex="-1"></a>  Title <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb136-36"><a href="#cb136-36" aria-hidden="true" tabindex="-1"></a>    current_page <span class="sc">%&gt;%</span></span>
<span id="cb136-37"><a href="#cb136-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_nodes</span>(<span class="st">".docsum-title"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-38"><a href="#cb136-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-39"><a href="#cb136-39" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb136-40"><a href="#cb136-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Error extracting title info on page"</span>, page <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb136-41"><a href="#cb136-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">length</span>(Title))  <span class="co"># Return a vector of NAs with the same length as Title</span></span>
<span id="cb136-42"><a href="#cb136-42" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb136-43"><a href="#cb136-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-44"><a href="#cb136-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the PMID</span></span>
<span id="cb136-45"><a href="#cb136-45" aria-hidden="true" tabindex="-1"></a>  pmid <span class="ot">&lt;-</span> current_page <span class="sc">%&gt;%</span></span>
<span id="cb136-46"><a href="#cb136-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".docsum-pmid"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-47"><a href="#cb136-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-48"><a href="#cb136-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-49"><a href="#cb136-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a data frame with the extracted data</span></span>
<span id="cb136-50"><a href="#cb136-50" aria-hidden="true" tabindex="-1"></a>  current_results_shopping <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Title =</span> Title,</span>
<span id="cb136-51"><a href="#cb136-51" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">PMID =</span> pmid)</span>
<span id="cb136-52"><a href="#cb136-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-53"><a href="#cb136-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the current results with the previous results</span></span>
<span id="cb136-54"><a href="#cb136-54" aria-hidden="true" tabindex="-1"></a>  results_shopping_rvest <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results_shopping_rvest, current_results_shopping)</span>
<span id="cb136-55"><a href="#cb136-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-56"><a href="#cb136-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Introduce a delay to avoid overloading the server</span></span>
<span id="cb136-57"><a href="#cb136-57" aria-hidden="true" tabindex="-1"></a>  sleep_time <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> <span class="dv">5</span>, <span class="at">max =</span> <span class="dv">15</span>)</span>
<span id="cb136-58"><a href="#cb136-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(sleep_time)</span>
<span id="cb136-59"><a href="#cb136-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb136-60"><a href="#cb136-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-61"><a href="#cb136-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the extracted data</span></span>
<span id="cb136-62"><a href="#cb136-62" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as_tibble</span>(results_shopping_rvest))</span>
<span id="cb136-63"><a href="#cb136-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-64"><a href="#cb136-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-65"><a href="#cb136-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the titles before proceeding so we can't lose them!</span></span>
<span id="cb136-66"><a href="#cb136-66" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_shopping_rvest, <span class="st">"Data extraction/shopping_titles.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb136-67"><a href="#cb136-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="refine-dataset-5" class="level4">
<h4 class="anchored" data-anchor-id="refine-dataset-5">Refine dataset</h4>
<p>Now we need to identify and remove any duplicates, irrelevant studies, or entries with any other issues (e.g., those that turn out to be books)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in first dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>results_shopping<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/shopping_data.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in second dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>results_shopping_rvest<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/shopping_titles.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge our two datasets</span></span>
<span id="cb137-10"><a href="#cb137-10" aria-hidden="true" tabindex="-1"></a>results_shopping2 <span class="ot">&lt;-</span> results_shopping <span class="sc">%&gt;%</span></span>
<span id="cb137-11"><a href="#cb137-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb137-12"><a href="#cb137-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Title_trunc"</span> <span class="ot">=</span> <span class="st">"Title"</span>) <span class="sc">%&gt;%</span> <span class="co"># Designate the truncated title from our primary dataset so we can remove it once we get the full title</span></span>
<span id="cb137-13"><a href="#cb137-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(results_shopping_rvest, <span class="at">by =</span> <span class="st">"PMID"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb137-14"><a href="#cb137-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Title_trunc) <span class="sc">%&gt;%</span> <span class="co"># Bye truncated title</span></span>
<span id="cb137-15"><a href="#cb137-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Title) <span class="sc">%&gt;%</span> <span class="co"># Place full title first for ease</span></span>
<span id="cb137-16"><a href="#cb137-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 74 × 13
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 Exploring … 3.75e7  2023 &lt;NA&gt;  10.3… "The ma… Rocha, Susana; … "Centre for S…
 2 Update on … 3.75e7  2023 Jul   10.1… "BACKGR… Muller, Astrid;… "1Department …
 3 Online com… 3.72e7  2023 Jul   S001… "BACKGR… Wegmann, Elisa;… "Department o…
 4 Comparison… 3.70e7  2023 &lt;NA&gt;  10.1… "Diagno… Laskowski, Nora… "Medical Facu…
 5 Buying-sho… 3.69e7  2023 Feb   10.1… "In rec… Etxaburu, Nerea… "University o…
 6 Student St… 3.66e7  2022 Dec   10.3… "Online… Li, Huimin; Ma,… "School of Hu…
 7 Obsessive-… 3.66e7  2023 Apr   S030… "BACKGR… Mestre-Bach, Ge… "Universidad …
 8 Family Sub… 3.65e7  2023 Feb   10.1… "Online… Fan, Liheng; Li… "Institute of…
 9 Therapeuti… 3.64e7  2022 &lt;NA&gt;  10.3… "The pr… Vasiliu, Octavi… "Department o…
10 Estimation… 3.61e7  2022 &lt;NA&gt;  10.1… "PURPOS… Alimoradi, Zain… "Social Deter…
# ℹ 64 more rows
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check results:</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_shopping2)</span></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on PMID:</span></span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_shopping2 <span class="sc">%&gt;%</span></span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(PMID) <span class="sc">%&gt;%</span></span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1    74</code></pre>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on title:</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_shopping2 <span class="sc">%&gt;%</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Title) <span class="sc">%&gt;%</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># n = 1 dupes (jUly 2023)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1    73</code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show duplicate:</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>results_shopping2 <span class="sc">%&gt;%</span> </span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title) <span class="sc">%&gt;%</span> </span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># View()</span></span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># In July 2023  this returns two studies with the same title (Technological Addictions). Despite having the same title, authors, and been published at the same time of year in 2022, these are actually separate papers... (Determined by manually searching the articles) [Note that this appears more than one addiction search]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 13
# Groups:   Title [1]
  Title          PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
  &lt;chr&gt;         &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
1 Technologic… 3.61e7  2022 Sep   S019… "Modern… Sherer, James; … "New York Uni…
2 Technologic… 3.58e7  2022 Sep   10.1… "PURPOS… Sherer, James; … "New York Uni…
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates where the title, year, and authors are all the same:</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>results_shopping2 <span class="sc">%&gt;%</span> </span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, </span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>           Journal_name_short, </span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a>           Full_Author_Name) <span class="sc">%&gt;%</span> </span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 13
# Groups:   Title, Journal_name_short, Full_Author_Name [0]
# ℹ 13 variables: Title &lt;chr&gt;, PMID &lt;int&gt;, Year &lt;int&gt;, Month &lt;chr&gt;, DOI &lt;chr&gt;,
#   Abstract &lt;chr&gt;, Full_Author_Name &lt;chr&gt;, Author_Address &lt;chr&gt;,
#   Language &lt;chr&gt;, Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># print() # None</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates were just the title, journal and year are the same:</span></span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>results_shopping2 <span class="sc">%&gt;%</span> </span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, </span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a>           Journal_name_short, </span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true" tabindex="-1"></a>           Year) <span class="sc">%&gt;%</span> </span>
<span id="cb147-8"><a href="#cb147-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb147-9"><a href="#cb147-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 13
# Groups:   Title, Journal_name_short, Year [0]
# ℹ 13 variables: Title &lt;chr&gt;, PMID &lt;int&gt;, Year &lt;int&gt;, Month &lt;chr&gt;, DOI &lt;chr&gt;,
#   Abstract &lt;chr&gt;, Full_Author_Name &lt;chr&gt;, Author_Address &lt;chr&gt;,
#   Language &lt;chr&gt;, Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  Okay, now we're confident we have a clean dataset, let's explore!</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of the Year  variable:</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(results_shopping2<span class="sc">$</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   2008    2018    2021    2019    2022    2023 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of publications per year:</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>shopping_hist<span class="ot">&lt;-</span> <span class="fu">hist</span>(results_shopping2<span class="sc">$</span>Year,</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1960</span>,<span class="dv">2023</span>),</span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="dv">10</span>,</span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">main =</span> <span class="st">"Papers published per year on Shopping Addiction (PubMed)"</span>,</span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlab =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PubMed-Article-Extraction-Using-rentrez_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of separate journals:</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>results_shopping2 <span class="sc">%&gt;%</span> </span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 35 × 1
   Journal_name_short              
   &lt;chr&gt;                           
 1 Addict Behav                    
 2 Addict Behav Rep                
 3 Addict Biol                     
 4 Addiction                       
 5 Adicciones                      
 6 Appl Neuropsychol Adult         
 7 Asian J Psychiatr               
 8 BMC Psychol                     
 9 CNS Spectr                      
10 Cas Lek Cesk                    
11 Clin Pract Epidemiol Ment Health
12 Compr Psychiatry                
13 Curr Addict Rep                 
14 Curr Opin Psychol               
15 Curr Psychiatry Rep             
16 Curr Psychol                    
17 Cyberpsychol Behav Soc Netw     
18 Eur Addict Res                  
19 Eur Eat Disord Rev              
20 Front Psychiatry                
# ℹ 15 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Most popular journals:</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>results_shopping2 <span class="sc">%&gt;%</span> </span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 35 × 2
   Journal_name_short                   n
   &lt;chr&gt;                            &lt;int&gt;
 1 J Behav Addict                      13
 2 Addict Behav                         5
 3 Int J Environ Res Public Health      5
 4 Compr Psychiatry                     4
 5 Psychiatry Res                       4
 6 Front Psychiatry                     3
 7 Front Psychol                        3
 8 PLoS One                             3
 9 Addict Behav Rep                     2
10 Addict Biol                          2
11 CNS Spectr                           2
12 Curr Opin Psychol                    2
13 Eur Addict Res                       2
14 Int J Ment Health Addict             2
15 Psychother Psychosom Med Psychol     2
16 Addiction                            1
17 Adicciones                           1
18 Appl Neuropsychol Adult              1
19 Asian J Psychiatr                    1
20 BMC Psychol                          1
# ℹ 15 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_shopping2) # Visually inspect results</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now I need to add a label to all of these studies to signify that they Were returned from the shopping search so that we can distinguish them from other studies when we later joined the datasets together:</span></span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>Label <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"shopping"</span>, <span class="at">times =</span> <span class="fu">count</span>(results_shopping2))</span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-6"><a href="#cb156-6" aria-hidden="true" tabindex="-1"></a>results_shopping_final <span class="ot">&lt;-</span> results_shopping2 <span class="sc">%&gt;%</span> <span class="fu">bind_cols</span>(Label) <span class="sc">%&gt;%</span></span>
<span id="cb156-7"><a href="#cb156-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Label =</span> <span class="dv">14</span>) <span class="sc">%&gt;%</span></span>
<span id="cb156-8"><a href="#cb156-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...14`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 74 × 14
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 Exploring … 3.75e7  2023 &lt;NA&gt;  10.3… "The ma… Rocha, Susana; … "Centre for S…
 2 Update on … 3.75e7  2023 Jul   10.1… "BACKGR… Muller, Astrid;… "1Department …
 3 Online com… 3.72e7  2023 Jul   S001… "BACKGR… Wegmann, Elisa;… "Department o…
 4 Comparison… 3.70e7  2023 &lt;NA&gt;  10.1… "Diagno… Laskowski, Nora… "Medical Facu…
 5 Buying-sho… 3.69e7  2023 Feb   10.1… "In rec… Etxaburu, Nerea… "University o…
 6 Student St… 3.66e7  2022 Dec   10.3… "Online… Li, Huimin; Ma,… "School of Hu…
 7 Obsessive-… 3.66e7  2023 Apr   S030… "BACKGR… Mestre-Bach, Ge… "Universidad …
 8 Family Sub… 3.65e7  2023 Feb   10.1… "Online… Fan, Liheng; Li… "Institute of…
 9 Therapeuti… 3.64e7  2022 &lt;NA&gt;  10.3… "The pr… Vasiliu, Octavi… "Department o…
10 Estimation… 3.61e7  2022 &lt;NA&gt;  10.1… "PURPOS… Alimoradi, Zain… "Social Deter…
# ℹ 64 more rows
# ℹ 6 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;, Label &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_shopping_final)</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the cleaned results</span></span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_shopping_final, <span class="st">"Data extraction/shopping_data_cleaned.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="social-media-addiction" class="level2">
<h2 class="anchored" data-anchor-id="social-media-addiction">Social media addiction</h2>
<section id="extract-studies-and-perform-a-basic-clean-of-dataset-6" class="level4">
<h4 class="anchored" data-anchor-id="extract-studies-and-perform-a-basic-clean-of-dataset-6">Extract studies and perform a basic clean of dataset</h4>
<p><strong>Notes pre-search:</strong> Comes under “Internet addiction disorder” when searching for MeSH terms. Nothing of relevance beyond the term “social media addictions”. Looked to literature on the subject to find relevant terms:</p>
<ul>
<li><p>“disordered online social networking use” used here: https://pubmed.ncbi.nlm.nih.gov/25170590/</p></li>
<li><p>“social-network-use disorder” is the term used in: https://doi.org/10.1556/2006.2020.00035</p></li>
</ul>
<p><strong>Actual search used:</strong> ((((“social_media addiction”[Title/Abstract]) OR (“social_media dependence”[Title/Abstract])) OR (“compulsory social_media”[Title/Abstract])) OR (“obligatory social_media”[Title/Abstract])) OR (“Addiction to social_media”[Title/Abstract])</p>
<ul>
<li>Not found so removed from search terms: “SnapChat addiction” AND “Twitter addiction”</li>
</ul>
<p><strong>Manual search results:</strong> <a href="https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%28%28%22social_media+addiction%22%5BTitle%2FAbstract%5D%29+OR+%28%22social_media+dependence%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22compulsory+social_media%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22obligatory+social_media%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22Addiction+to+social_media%22%5BTitle%2FAbstract%5D%29&amp;size=200">link</a></p>
<p><strong>Notes post-search:</strong> I manually inspected all of the results returned on PubMed. There were a few results where the key search terms weren’t in the title or abstract, but they were in the keywords for the studies, which seems perfectly acceptable considering the types of studies we’re trying to detect with this process. All studies appeared relevant as of latest search date (see top of document).</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  Clean environment:</span></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the search term:</span></span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a>search_term_social_media <span class="ot">&lt;-</span> <span class="st">'(((("social_media addiction"[Title/Abstract]) OR ("social_media dependence"[Title/Abstract])) OR ("compulsory social_media"[Title/Abstract])) OR ("obligatory social_media"[Title/Abstract])) OR ("Addiction to social_media"[Title/Abstract])'</span></span>
<span id="cb160-7"><a href="#cb160-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-8"><a href="#cb160-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use entrez_search to get the IDs of the articles:</span></span>
<span id="cb160-9"><a href="#cb160-9" aria-hidden="true" tabindex="-1"></a>search_results_social_media <span class="ot">&lt;-</span> <span class="fu">entrez_search</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">term=</span>search_term_social_media, <span class="at">retmax=</span><span class="dv">20000</span>)</span>
<span id="cb160-10"><a href="#cb160-10" aria-hidden="true" tabindex="-1"></a>id_list_social_media <span class="ot">&lt;-</span> search_results_social_media<span class="sc">$</span>ids</span>
<span id="cb160-11"><a href="#cb160-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-12"><a href="#cb160-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Split id list into chunks of 100 for chunk/batches:</span></span>
<span id="cb160-13"><a href="#cb160-13" aria-hidden="true" tabindex="-1"></a>chunks <span class="ot">&lt;-</span> <span class="fu">split</span>(id_list_social_media, <span class="fu">ceiling</span>(<span class="fu">seq_along</span>(id_list_social_media)<span class="sc">/</span><span class="dv">100</span>))</span>
<span id="cb160-14"><a href="#cb160-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-15"><a href="#cb160-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch details for each chunk of articles:</span></span>
<span id="cb160-16"><a href="#cb160-16" aria-hidden="true" tabindex="-1"></a>article_details_social_media <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(chunks, <span class="cf">function</span>(ids) {</span>
<span id="cb160-17"><a href="#cb160-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fetch details of the articles:</span></span>
<span id="cb160-18"><a href="#cb160-18" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">entrez_fetch</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">id=</span>ids, <span class="at">rettype=</span><span class="st">"medline"</span>, <span class="at">retmode=</span><span class="st">"text"</span>)</span>
<span id="cb160-19"><a href="#cb160-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb160-20"><a href="#cb160-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split the articles into individual articles:</span></span>
<span id="cb160-21"><a href="#cb160-21" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(articles, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb160-22"><a href="#cb160-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb160-23"><a href="#cb160-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process each article:</span></span>
<span id="cb160-24"><a href="#cb160-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(articles, <span class="cf">function</span>(article) {</span>
<span id="cb160-25"><a href="#cb160-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Split the article into lines:</span></span>
<span id="cb160-26"><a href="#cb160-26" aria-hidden="true" tabindex="-1"></a>    lines <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(article, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb160-27"><a href="#cb160-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-28"><a href="#cb160-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the details we're interested in:</span></span>
<span id="cb160-29"><a href="#cb160-29" aria-hidden="true" tabindex="-1"></a>    details_social_media <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb160-30"><a href="#cb160-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">PMID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb160-31"><a href="#cb160-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">DP =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb160-32"><a href="#cb160-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">TI =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb160-33"><a href="#cb160-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">LID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb160-34"><a href="#cb160-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">AB =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb160-35"><a href="#cb160-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">FAU =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb160-36"><a href="#cb160-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">AD =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb160-37"><a href="#cb160-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">LA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb160-38"><a href="#cb160-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">PT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb160-39"><a href="#cb160-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">TA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb160-40"><a href="#cb160-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">COIS =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb160-41"><a href="#cb160-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">JT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb160-42"><a href="#cb160-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb160-43"><a href="#cb160-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-44"><a href="#cb160-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert the list of details into a one-row data frame:</span></span>
<span id="cb160-45"><a href="#cb160-45" aria-hidden="true" tabindex="-1"></a>    details_df_social_media <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(details_social_media)</span>
<span id="cb160-46"><a href="#cb160-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-47"><a href="#cb160-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(details_df_social_media)</span>
<span id="cb160-48"><a href="#cb160-48" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb160-49"><a href="#cb160-49" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb160-50"><a href="#cb160-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-51"><a href="#cb160-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the results:</span></span>
<span id="cb160-52"><a href="#cb160-52" aria-hidden="true" tabindex="-1"></a>article_details_social_media <span class="sc">%&gt;%</span></span>
<span id="cb160-53"><a href="#cb160-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb160-54"><a href="#cb160-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb160-55"><a href="#cb160-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-56"><a href="#cb160-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's remove the identifiers at the beginning of each data point:</span></span>
<span id="cb160-57"><a href="#cb160-57" aria-hidden="true" tabindex="-1"></a>rep_str <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'PMID- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'DP  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TI  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LID - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AB  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb160-58"><a href="#cb160-58" aria-hidden="true" tabindex="-1"></a>             <span class="st">'FAU - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AD  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LA  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'PT  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TA  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb160-59"><a href="#cb160-59" aria-hidden="true" tabindex="-1"></a>             <span class="st">'COIS- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'JT  - '</span> <span class="ot">=</span> <span class="st">''</span>)</span>
<span id="cb160-60"><a href="#cb160-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-61"><a href="#cb160-61" aria-hidden="true" tabindex="-1"></a>results_social_media <span class="ot">&lt;-</span> article_details_social_media <span class="sc">%&gt;%</span></span>
<span id="cb160-62"><a href="#cb160-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">str_replace_all</span>(., rep_str))) <span class="sc">%&gt;%</span> <span class="co"># Remove identifiers</span></span>
<span id="cb160-63"><a href="#cb160-63" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now separate the date year and month/day info:</span></span>
<span id="cb160-64"><a href="#cb160-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(DP, <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Month"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st"> "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb160-65"><a href="#cb160-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.numeric</span>(Year)) <span class="sc">%&gt;%</span> <span class="co"># Convert Year to numeric</span></span>
<span id="cb160-66"><a href="#cb160-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="co"># Let's also provide more descriptive names for each of the columns</span></span>
<span id="cb160-67"><a href="#cb160-67" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Title"</span> <span class="ot">=</span> <span class="st">"TI"</span>, </span>
<span id="cb160-68"><a href="#cb160-68" aria-hidden="true" tabindex="-1"></a>         <span class="st">"DOI"</span> <span class="ot">=</span> <span class="st">"LID"</span>, </span>
<span id="cb160-69"><a href="#cb160-69" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Abstract"</span> <span class="ot">=</span> <span class="st">"AB"</span>, </span>
<span id="cb160-70"><a href="#cb160-70" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Full_Author_Name"</span> <span class="ot">=</span> <span class="st">"FAU"</span>, </span>
<span id="cb160-71"><a href="#cb160-71" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Author_Address"</span> <span class="ot">=</span> <span class="st">"AD"</span>, </span>
<span id="cb160-72"><a href="#cb160-72" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Language"</span> <span class="ot">=</span> <span class="st">"LA"</span>, </span>
<span id="cb160-73"><a href="#cb160-73" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Publication_Type"</span> <span class="ot">=</span> <span class="st">"PT"</span>, </span>
<span id="cb160-74"><a href="#cb160-74" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_name_short"</span> <span class="ot">=</span> <span class="st">"TA"</span>,</span>
<span id="cb160-75"><a href="#cb160-75" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Conflict_of_Interest_Statement"</span> <span class="ot">=</span> <span class="st">"COIS"</span>,</span>
<span id="cb160-76"><a href="#cb160-76" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_Title"</span> <span class="ot">=</span> <span class="st">"JT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb160-77"><a href="#cb160-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb160-78"><a href="#cb160-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-79"><a href="#cb160-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the initial results before proceeding so we can't lose them!</span></span>
<span id="cb160-80"><a href="#cb160-80" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_social_media, <span class="st">"Data extraction/social_media_data.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb160-81"><a href="#cb160-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-82"><a href="#cb160-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="extract-full-title-using-rvest-6" class="level4">
<h4 class="anchored" data-anchor-id="extract-full-title-using-rvest-6">Extract full title using rvest</h4>
<p>Again, we’re going to use the <code>rvest</code> package to scrape the titles returned from the manual search in PubMed, then join the two datasets using the PMID, retaining the title from this new dataset.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add search URL:</span></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>url_social_media_rvest <span class="ot">&lt;-</span> <span class="st">"https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%28%28%22social_media+addiction%22%5BTitle%2FAbstract%5D%29+OR+%28%22social_media+dependence%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22compulsory+social_media%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22obligatory+social_media%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22Addiction+to+social_media%22%5BTitle%2FAbstract%5D%29&amp;size=200"</span> <span class="co"># 303 results returned on 20/07/2023</span></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and parse the webpage</span></span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>webpage_social_media_rvest <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_social_media_rvest)</span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the total number of search results</span></span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a>results_count_social_media <span class="ot">&lt;-</span> webpage_social_media_rvest <span class="sc">%&gt;%</span></span>
<span id="cb161-10"><a href="#cb161-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">".results-amount .value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb161-11"><a href="#cb161-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb161-12"><a href="#cb161-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">","</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb161-13"><a href="#cb161-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb161-14"><a href="#cb161-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-15"><a href="#cb161-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the number of pages</span></span>
<span id="cb161-16"><a href="#cb161-16" aria-hidden="true" tabindex="-1"></a>results_per_page_social_media <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb161-17"><a href="#cb161-17" aria-hidden="true" tabindex="-1"></a>total_pages_social_media <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(results_count_social_media[<span class="dv">1</span>] <span class="sc">/</span> results_per_page_social_media)</span>
<span id="cb161-18"><a href="#cb161-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results_count_social_media and total_pages_social_media</span></span>
<span id="cb161-19"><a href="#cb161-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results_count_social_media)</span>
<span id="cb161-20"><a href="#cb161-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(total_pages_social_media)</span>
<span id="cb161-21"><a href="#cb161-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-22"><a href="#cb161-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-23"><a href="#cb161-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty data frame</span></span>
<span id="cb161-24"><a href="#cb161-24" aria-hidden="true" tabindex="-1"></a>results_social_media_rvest <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb161-25"><a href="#cb161-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-26"><a href="#cb161-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each page and scrape the data</span></span>
<span id="cb161-27"><a href="#cb161-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (page <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span>(total_pages_social_media <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb161-28"><a href="#cb161-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the page parameter in the URL for the current page</span></span>
<span id="cb161-29"><a href="#cb161-29" aria-hidden="true" tabindex="-1"></a>  current_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(url_social_media_rvest, <span class="st">"&amp;page="</span>, page <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb161-30"><a href="#cb161-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb161-31"><a href="#cb161-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read and parse the current webpage</span></span>
<span id="cb161-32"><a href="#cb161-32" aria-hidden="true" tabindex="-1"></a>  current_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(current_url)</span>
<span id="cb161-33"><a href="#cb161-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb161-34"><a href="#cb161-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract title</span></span>
<span id="cb161-35"><a href="#cb161-35" aria-hidden="true" tabindex="-1"></a>  Title <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb161-36"><a href="#cb161-36" aria-hidden="true" tabindex="-1"></a>    current_page <span class="sc">%&gt;%</span></span>
<span id="cb161-37"><a href="#cb161-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_nodes</span>(<span class="st">".docsum-title"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb161-38"><a href="#cb161-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb161-39"><a href="#cb161-39" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb161-40"><a href="#cb161-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Error extracting title info on page"</span>, page <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb161-41"><a href="#cb161-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">length</span>(Title))  <span class="co"># Return a vector of NAs with the same length as Title</span></span>
<span id="cb161-42"><a href="#cb161-42" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb161-43"><a href="#cb161-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb161-44"><a href="#cb161-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the PMID</span></span>
<span id="cb161-45"><a href="#cb161-45" aria-hidden="true" tabindex="-1"></a>  pmid <span class="ot">&lt;-</span> current_page <span class="sc">%&gt;%</span></span>
<span id="cb161-46"><a href="#cb161-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".docsum-pmid"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb161-47"><a href="#cb161-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb161-48"><a href="#cb161-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb161-49"><a href="#cb161-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a data frame with the extracted data</span></span>
<span id="cb161-50"><a href="#cb161-50" aria-hidden="true" tabindex="-1"></a>  current_results_social_media <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Title =</span> Title,</span>
<span id="cb161-51"><a href="#cb161-51" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">PMID =</span> pmid)</span>
<span id="cb161-52"><a href="#cb161-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb161-53"><a href="#cb161-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the current results with the previous results</span></span>
<span id="cb161-54"><a href="#cb161-54" aria-hidden="true" tabindex="-1"></a>  results_social_media_rvest <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results_social_media_rvest, current_results_social_media)</span>
<span id="cb161-55"><a href="#cb161-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb161-56"><a href="#cb161-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Introduce a delay to avoid overloading the server</span></span>
<span id="cb161-57"><a href="#cb161-57" aria-hidden="true" tabindex="-1"></a>  sleep_time <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> <span class="dv">5</span>, <span class="at">max =</span> <span class="dv">15</span>)</span>
<span id="cb161-58"><a href="#cb161-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(sleep_time)</span>
<span id="cb161-59"><a href="#cb161-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb161-60"><a href="#cb161-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-61"><a href="#cb161-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the extracted data</span></span>
<span id="cb161-62"><a href="#cb161-62" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as_tibble</span>(results_social_media_rvest))</span>
<span id="cb161-63"><a href="#cb161-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-64"><a href="#cb161-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-65"><a href="#cb161-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the titles before proceeding so we can't lose them!</span></span>
<span id="cb161-66"><a href="#cb161-66" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_social_media_rvest, <span class="st">"Data extraction/social_media_titles.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb161-67"><a href="#cb161-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="refine-dataset-6" class="level4">
<h4 class="anchored" data-anchor-id="refine-dataset-6">Refine dataset</h4>
<p>Now we need to identify and remove any duplicates, irrelevant studies, or entries with any other issues (e.g., those that turn out to be books)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in first dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>results_social_media<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/social_media_data.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in second dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a>results_social_media_rvest<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/social_media_titles.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb162-7"><a href="#cb162-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb162-8"><a href="#cb162-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-9"><a href="#cb162-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge our two datasets</span></span>
<span id="cb162-10"><a href="#cb162-10" aria-hidden="true" tabindex="-1"></a>results_social_media2 <span class="ot">&lt;-</span> results_social_media <span class="sc">%&gt;%</span></span>
<span id="cb162-11"><a href="#cb162-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb162-12"><a href="#cb162-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Title_trunc"</span> <span class="ot">=</span> <span class="st">"Title"</span>) <span class="sc">%&gt;%</span> <span class="co"># Designate the truncated title from our primary dataset so we can remove it once we get the full title</span></span>
<span id="cb162-13"><a href="#cb162-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(results_social_media_rvest, <span class="at">by =</span> <span class="st">"PMID"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb162-14"><a href="#cb162-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Title_trunc) <span class="sc">%&gt;%</span> <span class="co"># Bye truncated title</span></span>
<span id="cb162-15"><a href="#cb162-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Title) <span class="sc">%&gt;%</span> <span class="co"># Place full title first for ease</span></span>
<span id="cb162-16"><a href="#cb162-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 303 × 13
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 Conceptual… 3.74e7  2023 Jul   10.1… "BACKGR… Tullett-Prado, … "Institute fo…
 2 Exploring … 3.74e7  2023 Jul   S000… "Previo… Yue, Heng; Yue,… "School of Ps…
 3 Self-estee… 3.74e7  2023 May   10.4… "BACKGR… Colak, Mehmet; … "Department o…
 4 Relationsh… 3.74e7  2023 Jun   10.3… "The pr… Sommantico, Mas… "Dynamic Psyc…
 5 The Big Fi… 3.74e7  2023 May   10.3… "Relati… Wartberg, Lutz;… "Department o…
 6 Problemati… 3.74e7  2023 Jun   10.1… "As res… Ghazi, Farah Ra… "Department o…
 7 Social med… 3.74e7  2023 Oct   S016… "BACKGR… Muskens, Lotte;… "Department o…
 8 Mediating … 3.74e7  2023 Jun   10.1… "OBJECT… Malik, Lipika; … "Mumbai, Indi…
 9 Problemati… 3.74e7  2023 Oct   S030… "While … Tsilosani, Akak… "Hartwick Col…
10 Associatio… 3.73e7  2023 Jun   10.1… "BACKGR… Raney, Julia H;… "Department o…
# ℹ 293 more rows
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check results:</span></span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_social_media2)</span></span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on PMID:</span></span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_social_media2 <span class="sc">%&gt;%</span></span>
<span id="cb164-6"><a href="#cb164-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(PMID) <span class="sc">%&gt;%</span></span>
<span id="cb164-7"><a href="#cb164-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb164-8"><a href="#cb164-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1   303</code></pre>
</div>
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on title:</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_social_media2 <span class="sc">%&gt;%</span></span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Title) <span class="sc">%&gt;%</span></span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># n = 1 dupes (jUly 2023)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1   302</code></pre>
</div>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show duplicate:</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>results_social_media2 <span class="sc">%&gt;%</span> </span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title) <span class="sc">%&gt;%</span> </span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># View()</span></span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># In July 2023  this returns two studies with the same title (Technological Addictions). Despite having the same title, authors, and been published at the same time of year in 2022, these are actually separate papers... (Determined by manually searching the articles)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 13
# Groups:   Title [1]
  Title          PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
  &lt;chr&gt;         &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
1 Technologic… 3.61e7  2022 Sep   S019… "Modern… Sherer, James; … "New York Uni…
2 Technologic… 3.58e7  2022 Sep   10.1… "PURPOS… Sherer, James; … "New York Uni…
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates where the title, year, and authors are all the same:</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>results_social_media2 <span class="sc">%&gt;%</span> </span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, </span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a>           Journal_name_short, </span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a>           Full_Author_Name) <span class="sc">%&gt;%</span> </span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 13
# Groups:   Title, Journal_name_short, Full_Author_Name [0]
# ℹ 13 variables: Title &lt;chr&gt;, PMID &lt;int&gt;, Year &lt;int&gt;, Month &lt;chr&gt;, DOI &lt;chr&gt;,
#   Abstract &lt;chr&gt;, Full_Author_Name &lt;chr&gt;, Author_Address &lt;chr&gt;,
#   Language &lt;chr&gt;, Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># print() # None</span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates were just the title, journal and year are the same:</span></span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a>results_social_media2 <span class="sc">%&gt;%</span> </span>
<span id="cb172-5"><a href="#cb172-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, </span>
<span id="cb172-6"><a href="#cb172-6" aria-hidden="true" tabindex="-1"></a>           Journal_name_short, </span>
<span id="cb172-7"><a href="#cb172-7" aria-hidden="true" tabindex="-1"></a>           Year) <span class="sc">%&gt;%</span> </span>
<span id="cb172-8"><a href="#cb172-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb172-9"><a href="#cb172-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 13
# Groups:   Title, Journal_name_short, Year [0]
# ℹ 13 variables: Title &lt;chr&gt;, PMID &lt;int&gt;, Year &lt;int&gt;, Month &lt;chr&gt;, DOI &lt;chr&gt;,
#   Abstract &lt;chr&gt;, Full_Author_Name &lt;chr&gt;, Author_Address &lt;chr&gt;,
#   Language &lt;chr&gt;, Publication_Type &lt;chr&gt;, Journal_name_short &lt;chr&gt;,
#   Conflict_of_Interest_Statement &lt;chr&gt;, Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  Okay, now we're confident we have a clean dataset, let's explore!</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of the Year  variable:</span></span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(results_social_media2<span class="sc">$</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   2015    2021    2022    2021    2022    2023 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of publications per year:</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>social_media_hist<span class="ot">&lt;-</span> <span class="fu">hist</span>(results_social_media2<span class="sc">$</span>Year,</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1960</span>,<span class="dv">2023</span>),</span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="dv">10</span>,</span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">main =</span> <span class="st">"Papers published per year on Social Media Addiction (PubMed)"</span>,</span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlab =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PubMed-Article-Extraction-Using-rentrez_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of separate journals:</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>results_social_media2 <span class="sc">%&gt;%</span> </span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 123 × 1
   Journal_name_short 
   &lt;chr&gt;              
 1 Acta Med Port      
 2 Acta Psychol (Amst)
 3 Addict Behav       
 4 Addict Behav Rep   
 5 Addict Health      
 6 Addiction          
 7 Adv Exp Med Biol   
 8 Adv Rheumatol      
 9 Aggress Behav      
10 Alpha Psychiatry   
11 Am J Pharm Educ    
12 Appl Res Qual Life 
13 Arch Psychiatr Nurs
14 Asian J Psychiatr  
15 Assessment         
16 BJPsych Open       
17 BMC Psychiatry     
18 BMC Psychol        
19 BMC Public Health  
20 BMJ                
# ℹ 103 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Most popular journals:</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>results_social_media2 <span class="sc">%&gt;%</span> </span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb179-6"><a href="#cb179-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb179-7"><a href="#cb179-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb179-8"><a href="#cb179-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 123 × 2
   Journal_name_short                  n
   &lt;chr&gt;                           &lt;int&gt;
 1 Int J Environ Res Public Health    29
 2 Addict Behav                       19
 3 J Behav Addict                     15
 4 Front Psychiatry                   14
 5 Front Psychol                      14
 6 Front Public Health                12
 7 Healthcare (Basel)                  8
 8 PLoS One                            7
 9 Cyberpsychol Behav Soc Netw         6
10 Acta Psychol (Amst)                 5
11 Addict Behav Rep                    5
12 Alpha Psychiatry                    5
13 BMC Psychol                         5
14 Curr Psychol                        5
15 Int J Ment Health Addict            5
16 Perspect Psychiatr Care             5
17 J Affect Disord                     4
18 Psychiatr Q                         4
19 Psychol Rep                         4
20 Psychol Res Behav Manag             4
# ℹ 103 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_social_media2) # Visually inspect results</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now I need to add a label to all of these studies to signify that they Were returned from the social_media search so that we can distinguish them from other studies when we later joined the datasets together:</span></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a>Label <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"social_media"</span>, <span class="at">times =</span> <span class="fu">count</span>(results_social_media2))</span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a>results_social_media_final <span class="ot">&lt;-</span> results_social_media2 <span class="sc">%&gt;%</span> <span class="fu">bind_cols</span>(Label) <span class="sc">%&gt;%</span></span>
<span id="cb181-7"><a href="#cb181-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Label =</span> <span class="dv">14</span>) <span class="sc">%&gt;%</span></span>
<span id="cb181-8"><a href="#cb181-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...14`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 303 × 14
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 Conceptual… 3.74e7  2023 Jul   10.1… "BACKGR… Tullett-Prado, … "Institute fo…
 2 Exploring … 3.74e7  2023 Jul   S000… "Previo… Yue, Heng; Yue,… "School of Ps…
 3 Self-estee… 3.74e7  2023 May   10.4… "BACKGR… Colak, Mehmet; … "Department o…
 4 Relationsh… 3.74e7  2023 Jun   10.3… "The pr… Sommantico, Mas… "Dynamic Psyc…
 5 The Big Fi… 3.74e7  2023 May   10.3… "Relati… Wartberg, Lutz;… "Department o…
 6 Problemati… 3.74e7  2023 Jun   10.1… "As res… Ghazi, Farah Ra… "Department o…
 7 Social med… 3.74e7  2023 Oct   S016… "BACKGR… Muskens, Lotte;… "Department o…
 8 Mediating … 3.74e7  2023 Jun   10.1… "OBJECT… Malik, Lipika; … "Mumbai, Indi…
 9 Problemati… 3.74e7  2023 Oct   S030… "While … Tsilosani, Akak… "Hartwick Col…
10 Associatio… 3.73e7  2023 Jun   10.1… "BACKGR… Raney, Julia H;… "Department o…
# ℹ 293 more rows
# ℹ 6 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;, Label &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_social_media_final)</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the cleaned results</span></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_social_media_final, <span class="st">"Data extraction/social_media_data_cleaned.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="internet-addiction" class="level2">
<h2 class="anchored" data-anchor-id="internet-addiction">Internet addiction</h2>
<section id="extract-studies-and-perform-a-basic-clean-of-dataset-7" class="level4">
<h4 class="anchored" data-anchor-id="extract-studies-and-perform-a-basic-clean-of-dataset-7">Extract studies and perform a basic clean of dataset</h4>
<p><strong>Notes pre-search:</strong> MeSH terms: https://www.ncbi.nlm.nih.gov/mesh/?term=internet+addiction</p>
<p><strong>Actual search used:</strong> (((“internet addiction”[Title/Abstract]) OR (“addictive internet use”[Title/Abstract])) OR (“internet use disorder”[Title/Abstract])) OR (“addiction to the internet”[Title/Abstract])</p>
<p><strong>Manual search results:</strong> <a href="https://pubmed.ncbi.nlm.nih.gov/?term=%28%28%28%22internet+addiction%22%5BTitle%2FAbstract%5D%29+OR+%28%22addictive+internet+use%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22internet+use+disorder%22%5BTitle%2FAbstract%5D%29%29+OR+%28%22addiction+to+the+internet%22%5BTitle%2FAbstract%5D%29&amp;size=200">link</a></p>
<p><strong>Notes post-search:</strong> I manually inspected all of the results returned on PubMed. This took quite some time given the number of studies available. As far as I can see, all studies appeared relevant as of latest search date (see top of document).</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  Clean environment:</span></span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the search term:</span></span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a>search_term_internet <span class="ot">&lt;-</span> <span class="st">'((("internet addiction"[Title/Abstract]) OR ("addictive internet use"[Title/Abstract])) OR ("internet use disorder"[Title/Abstract])) OR ("addiction to the internet"[Title/Abstract])'</span></span>
<span id="cb185-7"><a href="#cb185-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-8"><a href="#cb185-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use entrez_search to get the IDs of the articles:</span></span>
<span id="cb185-9"><a href="#cb185-9" aria-hidden="true" tabindex="-1"></a>search_results_internet <span class="ot">&lt;-</span> <span class="fu">entrez_search</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">term=</span>search_term_internet, <span class="at">retmax=</span><span class="dv">20000</span>)</span>
<span id="cb185-10"><a href="#cb185-10" aria-hidden="true" tabindex="-1"></a>id_list_internet <span class="ot">&lt;-</span> search_results_internet<span class="sc">$</span>ids</span>
<span id="cb185-11"><a href="#cb185-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-12"><a href="#cb185-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Split id list into chunks of 100 for chunk/batches:</span></span>
<span id="cb185-13"><a href="#cb185-13" aria-hidden="true" tabindex="-1"></a>chunks <span class="ot">&lt;-</span> <span class="fu">split</span>(id_list_internet, <span class="fu">ceiling</span>(<span class="fu">seq_along</span>(id_list_internet)<span class="sc">/</span><span class="dv">100</span>))</span>
<span id="cb185-14"><a href="#cb185-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-15"><a href="#cb185-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch details for each chunk of articles:</span></span>
<span id="cb185-16"><a href="#cb185-16" aria-hidden="true" tabindex="-1"></a>article_details_internet <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(chunks, <span class="cf">function</span>(ids) {</span>
<span id="cb185-17"><a href="#cb185-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fetch details of the articles:</span></span>
<span id="cb185-18"><a href="#cb185-18" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">entrez_fetch</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">id=</span>ids, <span class="at">rettype=</span><span class="st">"medline"</span>, <span class="at">retmode=</span><span class="st">"text"</span>)</span>
<span id="cb185-19"><a href="#cb185-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb185-20"><a href="#cb185-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split the articles into individual articles:</span></span>
<span id="cb185-21"><a href="#cb185-21" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(articles, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb185-22"><a href="#cb185-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb185-23"><a href="#cb185-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process each article:</span></span>
<span id="cb185-24"><a href="#cb185-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(articles, <span class="cf">function</span>(article) {</span>
<span id="cb185-25"><a href="#cb185-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Split the article into lines:</span></span>
<span id="cb185-26"><a href="#cb185-26" aria-hidden="true" tabindex="-1"></a>    lines <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(article, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb185-27"><a href="#cb185-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb185-28"><a href="#cb185-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the details we're interested in:</span></span>
<span id="cb185-29"><a href="#cb185-29" aria-hidden="true" tabindex="-1"></a>    details_internet <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb185-30"><a href="#cb185-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">PMID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb185-31"><a href="#cb185-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">DP =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb185-32"><a href="#cb185-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">TI =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb185-33"><a href="#cb185-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">LID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb185-34"><a href="#cb185-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">AB =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb185-35"><a href="#cb185-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">FAU =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb185-36"><a href="#cb185-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">AD =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb185-37"><a href="#cb185-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">LA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb185-38"><a href="#cb185-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">PT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb185-39"><a href="#cb185-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">TA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb185-40"><a href="#cb185-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">COIS =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb185-41"><a href="#cb185-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">JT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb185-42"><a href="#cb185-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb185-43"><a href="#cb185-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb185-44"><a href="#cb185-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert the list of details into a one-row data frame:</span></span>
<span id="cb185-45"><a href="#cb185-45" aria-hidden="true" tabindex="-1"></a>    details_df_internet <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(details_internet)</span>
<span id="cb185-46"><a href="#cb185-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb185-47"><a href="#cb185-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(details_df_internet)</span>
<span id="cb185-48"><a href="#cb185-48" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb185-49"><a href="#cb185-49" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb185-50"><a href="#cb185-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-51"><a href="#cb185-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the results:</span></span>
<span id="cb185-52"><a href="#cb185-52" aria-hidden="true" tabindex="-1"></a>article_details_internet <span class="sc">%&gt;%</span></span>
<span id="cb185-53"><a href="#cb185-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb185-54"><a href="#cb185-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb185-55"><a href="#cb185-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-56"><a href="#cb185-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's remove the identifiers at the beginning of each data point:</span></span>
<span id="cb185-57"><a href="#cb185-57" aria-hidden="true" tabindex="-1"></a>rep_str <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'PMID- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'DP  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TI  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LID - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AB  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb185-58"><a href="#cb185-58" aria-hidden="true" tabindex="-1"></a>             <span class="st">'FAU - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AD  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LA  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'PT  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TA  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb185-59"><a href="#cb185-59" aria-hidden="true" tabindex="-1"></a>             <span class="st">'COIS- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'JT  - '</span> <span class="ot">=</span> <span class="st">''</span>)</span>
<span id="cb185-60"><a href="#cb185-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-61"><a href="#cb185-61" aria-hidden="true" tabindex="-1"></a>results_internet <span class="ot">&lt;-</span> article_details_internet <span class="sc">%&gt;%</span></span>
<span id="cb185-62"><a href="#cb185-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">str_replace_all</span>(., rep_str))) <span class="sc">%&gt;%</span> <span class="co"># Remove identifiers</span></span>
<span id="cb185-63"><a href="#cb185-63" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now separate the date year and month/day info:</span></span>
<span id="cb185-64"><a href="#cb185-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(DP, <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Month"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st"> "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb185-65"><a href="#cb185-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.numeric</span>(Year)) <span class="sc">%&gt;%</span> <span class="co"># Convert Year to numeric</span></span>
<span id="cb185-66"><a href="#cb185-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="co"># Let's also provide more descriptive names for each of the columns</span></span>
<span id="cb185-67"><a href="#cb185-67" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Title"</span> <span class="ot">=</span> <span class="st">"TI"</span>, </span>
<span id="cb185-68"><a href="#cb185-68" aria-hidden="true" tabindex="-1"></a>         <span class="st">"DOI"</span> <span class="ot">=</span> <span class="st">"LID"</span>, </span>
<span id="cb185-69"><a href="#cb185-69" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Abstract"</span> <span class="ot">=</span> <span class="st">"AB"</span>, </span>
<span id="cb185-70"><a href="#cb185-70" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Full_Author_Name"</span> <span class="ot">=</span> <span class="st">"FAU"</span>, </span>
<span id="cb185-71"><a href="#cb185-71" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Author_Address"</span> <span class="ot">=</span> <span class="st">"AD"</span>, </span>
<span id="cb185-72"><a href="#cb185-72" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Language"</span> <span class="ot">=</span> <span class="st">"LA"</span>, </span>
<span id="cb185-73"><a href="#cb185-73" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Publication_Type"</span> <span class="ot">=</span> <span class="st">"PT"</span>, </span>
<span id="cb185-74"><a href="#cb185-74" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_name_short"</span> <span class="ot">=</span> <span class="st">"TA"</span>,</span>
<span id="cb185-75"><a href="#cb185-75" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Conflict_of_Interest_Statement"</span> <span class="ot">=</span> <span class="st">"COIS"</span>,</span>
<span id="cb185-76"><a href="#cb185-76" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_Title"</span> <span class="ot">=</span> <span class="st">"JT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb185-77"><a href="#cb185-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb185-78"><a href="#cb185-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-79"><a href="#cb185-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the initial results before proceeding so we can't lose them!</span></span>
<span id="cb185-80"><a href="#cb185-80" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_internet, <span class="st">"Data extraction/internet_data.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb185-81"><a href="#cb185-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-82"><a href="#cb185-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="extract-full-title-using-rvest-7" class="level4">
<h4 class="anchored" data-anchor-id="extract-full-title-using-rvest-7">Extract full title using rvest</h4>
<p>Again, we’re going to use the <code>rvest</code> package to scrape the titles returned from the manual search in PubMed, then join the two datasets using the PMID, retaining the title from this new dataset.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add search URL:</span></span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>url_internet_rvest <span class="ot">&lt;-</span> <span class="st">"https://pubmed.ncbi.nlm.nih.gov/?term=(((%22internet%20addiction%22%5BTitle%2FAbstract%5D)%20OR%20(%22addictive%20internet%20use%22%5BTitle%2FAbstract%5D))%20OR%20(%22internet%20use%20disorder%22%5BTitle%2FAbstract%5D))%20OR%20(%22addiction%20to%20the%20internet%22%5BTitle%2FAbstract%5D)&amp;size=200"</span> <span class="co"># 2335 results returned on 20/07/2023</span></span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and parse the webpage</span></span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a>webpage_internet_rvest <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_internet_rvest)</span>
<span id="cb186-7"><a href="#cb186-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-8"><a href="#cb186-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the total number of search results</span></span>
<span id="cb186-9"><a href="#cb186-9" aria-hidden="true" tabindex="-1"></a>results_count_internet <span class="ot">&lt;-</span> webpage_internet_rvest <span class="sc">%&gt;%</span></span>
<span id="cb186-10"><a href="#cb186-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">".results-amount .value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb186-11"><a href="#cb186-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb186-12"><a href="#cb186-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">","</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb186-13"><a href="#cb186-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb186-14"><a href="#cb186-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-15"><a href="#cb186-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the number of pages</span></span>
<span id="cb186-16"><a href="#cb186-16" aria-hidden="true" tabindex="-1"></a>results_per_page_internet <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb186-17"><a href="#cb186-17" aria-hidden="true" tabindex="-1"></a>total_pages_internet <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(results_count_internet[<span class="dv">1</span>] <span class="sc">/</span> results_per_page_internet)</span>
<span id="cb186-18"><a href="#cb186-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results_count_internet and total_pages_internet</span></span>
<span id="cb186-19"><a href="#cb186-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results_count_internet)</span>
<span id="cb186-20"><a href="#cb186-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(total_pages_internet)</span>
<span id="cb186-21"><a href="#cb186-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-22"><a href="#cb186-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-23"><a href="#cb186-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty data frame</span></span>
<span id="cb186-24"><a href="#cb186-24" aria-hidden="true" tabindex="-1"></a>results_internet_rvest <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb186-25"><a href="#cb186-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-26"><a href="#cb186-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each page and scrape the data</span></span>
<span id="cb186-27"><a href="#cb186-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (page <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span>(total_pages_internet <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb186-28"><a href="#cb186-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the page parameter in the URL for the current page</span></span>
<span id="cb186-29"><a href="#cb186-29" aria-hidden="true" tabindex="-1"></a>  current_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(url_internet_rvest, <span class="st">"&amp;page="</span>, page <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb186-30"><a href="#cb186-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb186-31"><a href="#cb186-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read and parse the current webpage</span></span>
<span id="cb186-32"><a href="#cb186-32" aria-hidden="true" tabindex="-1"></a>  current_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(current_url)</span>
<span id="cb186-33"><a href="#cb186-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb186-34"><a href="#cb186-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract title</span></span>
<span id="cb186-35"><a href="#cb186-35" aria-hidden="true" tabindex="-1"></a>  Title <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb186-36"><a href="#cb186-36" aria-hidden="true" tabindex="-1"></a>    current_page <span class="sc">%&gt;%</span></span>
<span id="cb186-37"><a href="#cb186-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_nodes</span>(<span class="st">".docsum-title"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb186-38"><a href="#cb186-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb186-39"><a href="#cb186-39" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb186-40"><a href="#cb186-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Error extracting title info on page"</span>, page <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb186-41"><a href="#cb186-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">length</span>(Title))  <span class="co"># Return a vector of NAs with the same length as Title</span></span>
<span id="cb186-42"><a href="#cb186-42" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb186-43"><a href="#cb186-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb186-44"><a href="#cb186-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the PMID</span></span>
<span id="cb186-45"><a href="#cb186-45" aria-hidden="true" tabindex="-1"></a>  pmid <span class="ot">&lt;-</span> current_page <span class="sc">%&gt;%</span></span>
<span id="cb186-46"><a href="#cb186-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".docsum-pmid"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb186-47"><a href="#cb186-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb186-48"><a href="#cb186-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb186-49"><a href="#cb186-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a data frame with the extracted data</span></span>
<span id="cb186-50"><a href="#cb186-50" aria-hidden="true" tabindex="-1"></a>  current_results_internet <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Title =</span> Title,</span>
<span id="cb186-51"><a href="#cb186-51" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">PMID =</span> pmid)</span>
<span id="cb186-52"><a href="#cb186-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb186-53"><a href="#cb186-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the current results with the previous results</span></span>
<span id="cb186-54"><a href="#cb186-54" aria-hidden="true" tabindex="-1"></a>  results_internet_rvest <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results_internet_rvest, current_results_internet)</span>
<span id="cb186-55"><a href="#cb186-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb186-56"><a href="#cb186-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Introduce a delay to avoid overloading the server</span></span>
<span id="cb186-57"><a href="#cb186-57" aria-hidden="true" tabindex="-1"></a>  sleep_time <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> <span class="dv">5</span>, <span class="at">max =</span> <span class="dv">15</span>)</span>
<span id="cb186-58"><a href="#cb186-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(sleep_time)</span>
<span id="cb186-59"><a href="#cb186-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb186-60"><a href="#cb186-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-61"><a href="#cb186-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the extracted data</span></span>
<span id="cb186-62"><a href="#cb186-62" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as_tibble</span>(results_internet_rvest))</span>
<span id="cb186-63"><a href="#cb186-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-64"><a href="#cb186-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-65"><a href="#cb186-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the titles before proceeding so we can't lose them!</span></span>
<span id="cb186-66"><a href="#cb186-66" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_internet_rvest, <span class="st">"Data extraction/internet_titles.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb186-67"><a href="#cb186-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="refine-dataset-7" class="level4">
<h4 class="anchored" data-anchor-id="refine-dataset-7">Refine dataset</h4>
<p>Now we need to identify and remove any duplicates, irrelevant studies, or entries with any other issues (e.g., those that turn out to be books)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in first dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>results_internet<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/internet_data.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in second dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb187-6"><a href="#cb187-6" aria-hidden="true" tabindex="-1"></a>results_internet_rvest<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/internet_titles.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb187-7"><a href="#cb187-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb187-8"><a href="#cb187-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-9"><a href="#cb187-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge our two datasets</span></span>
<span id="cb187-10"><a href="#cb187-10" aria-hidden="true" tabindex="-1"></a>results_internet2 <span class="ot">&lt;-</span> results_internet <span class="sc">%&gt;%</span></span>
<span id="cb187-11"><a href="#cb187-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb187-12"><a href="#cb187-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Title_trunc"</span> <span class="ot">=</span> <span class="st">"Title"</span>) <span class="sc">%&gt;%</span> <span class="co"># Designate the truncated title from our primary dataset so we can remove it once we get the full title</span></span>
<span id="cb187-13"><a href="#cb187-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(results_internet_rvest, <span class="at">by =</span> <span class="st">"PMID"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb187-14"><a href="#cb187-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Title_trunc) <span class="sc">%&gt;%</span> <span class="co"># Bye truncated title</span></span>
<span id="cb187-15"><a href="#cb187-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Title) <span class="sc">%&gt;%</span> <span class="co"># Place full title first for ease</span></span>
<span id="cb187-16"><a href="#cb187-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,335 × 13
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 An interve… 3.75e7  2023 Jul   10.1… "Unheal… Fantini, Luana;… "Department o…
 2 At-risk in… 3.75e7  2023 Jul   10.1… "BACKGR… Fukuda, Mari; C… "Okayama Univ…
 3 Eye moveme… 3.75e7  2023 Jul   10.1… "BACKGR… Ge, Ying; Huo, … "Key Laborato…
 4 Parental n… 3.75e7  2023 Jul   S014… "BACKGR… Li, Fang; Wang,… "School of Ps…
 5 Potential … 3.74e7  2023 Jul   S030… "This s… Akbari, Mehdi; … "Department o…
 6 Latent pro… 3.74e7  2023 Jul   10.1… "Health… Yu, Ling; Wu, Y… "Phase I Clin…
 7 Network an… 3.74e7  2023 Jul   S016… "BACKGR… Yang, Yuan; Zha… "Guangdong Me…
 8 A systemat… 3.74e7  2023 Jul   S016… "BACKGR… Jin, Meng-Ke; W… "School of Ps…
 9 Cue-reacti… 3.74e7  2023 Jul   S001… "BACKGR… Diers, Martin; … "Department o…
10 Associatio… 3.74e7  2023 &lt;NA&gt;  10.3… "Object… Shi, Yijian; Ta… "Department o…
# ℹ 2,325 more rows
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check results:</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_internet2)</span></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on PMID:</span></span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_internet2 <span class="sc">%&gt;%</span></span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(PMID) <span class="sc">%&gt;%</span></span>
<span id="cb189-7"><a href="#cb189-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb189-8"><a href="#cb189-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1  2335</code></pre>
</div>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on title:</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_internet2 <span class="sc">%&gt;%</span></span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Title) <span class="sc">%&gt;%</span></span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># n = 4 dupes (jUly 2023)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1  2331</code></pre>
</div>
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show duplicate:</span></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>results_internet2 <span class="sc">%&gt;%</span> </span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title) <span class="sc">%&gt;%</span> </span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># View()</span></span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># In July 2023 this returns 3 studies, 2 which have 2 duplicate titles and one three times. These three identical papers are all called "Internet addiction", and are all separate, distinct papers. One of the two pairs duplicates contains a published erratum so let's remove that (PMID: 32320594). The other pair of duplicates (title: Personality Disorders in Female and Male College Students With Internet Addiction.) are an original study and comment so we will keep those.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 13
# Groups:   Title [3]
  Title          PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
  &lt;chr&gt;         &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
1 The Current… 3.23e7  2020 Apr   10.3…  &lt;NA&gt;    Wang, Yanqiu; Z… "Department o…
2 The Current… 3.22e7  2020 Mar   10.3… "OBJECT… Wang, Yanqiu; Z… "Department o…
3 Personality… 2.88e7  2017 Sep   10.1…  &lt;NA&gt;    Ko, Huei-Chen; … "*Department …
4 Personality… 2.67e7  2016 Mar   10.1… "A high… Wu, Jo Yung-Wei… "*Institute o…
5 [Internet a… 2.64e7  2015 Sep   &lt;NA&gt;  "Intern… Nakayama, Hidek…  &lt;NA&gt;         
6 [Internet a… 2.26e7  2012 &lt;NA&gt;  &lt;NA&gt;  "Intern… Korkeila, Jyrki  "Turun yliopi…
7 [Internet a… 1.78e7  2007 Jul   &lt;NA&gt;  "The In… Dannon, Pinhas … "Rehovot Ment…
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates where the title, year, and authors are all the same:</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>results_internet2 <span class="sc">%&gt;%</span> </span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, </span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a>           Journal_name_short, </span>
<span id="cb195-5"><a href="#cb195-5" aria-hidden="true" tabindex="-1"></a>           Full_Author_Name) <span class="sc">%&gt;%</span> </span>
<span id="cb195-6"><a href="#cb195-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 13
# Groups:   Title, Journal_name_short, Full_Author_Name [1]
  Title          PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
  &lt;chr&gt;         &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
1 The Current… 3.23e7  2020 Apr   10.3…  &lt;NA&gt;    Wang, Yanqiu; Z… "Department o…
2 The Current… 3.22e7  2020 Mar   10.3… "OBJECT… Wang, Yanqiu; Z… "Department o…
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># print() # 1 - the one we're already planning to remove</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at duplicates were just the title, journal and year are the same:</span></span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a>results_internet2 <span class="sc">%&gt;%</span> </span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Title, </span>
<span id="cb197-6"><a href="#cb197-6" aria-hidden="true" tabindex="-1"></a>           Journal_name_short, </span>
<span id="cb197-7"><a href="#cb197-7" aria-hidden="true" tabindex="-1"></a>           Year) <span class="sc">%&gt;%</span> </span>
<span id="cb197-8"><a href="#cb197-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb197-9"><a href="#cb197-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co">#  1 - the one we're already planning to remove</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 13
# Groups:   Title, Journal_name_short, Year [1]
  Title          PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
  &lt;chr&gt;         &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
1 The Current… 3.23e7  2020 Apr   10.3…  &lt;NA&gt;    Wang, Yanqiu; Z… "Department o…
2 The Current… 3.22e7  2020 Mar   10.3… "OBJECT… Wang, Yanqiu; Z… "Department o…
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove duplicate:</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>results_internet3 <span class="ot">&lt;-</span> results_internet2 <span class="sc">%&gt;%</span> </span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PMID <span class="sc">!=</span> <span class="dv">32320594</span>)</span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  Okay, now we're confident we have a clean dataset, let's explore!</span></span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of the Year  variable:</span></span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(results_internet3<span class="sc">$</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1996    2015    2018    2018    2021    2023 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of publications per year:</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a>internet_hist<span class="ot">&lt;-</span> <span class="fu">hist</span>(results_internet3<span class="sc">$</span>Year,</span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1960</span>,<span class="dv">2023</span>),</span>
<span id="cb201-4"><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="dv">30</span>,</span>
<span id="cb201-5"><a href="#cb201-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">main =</span> <span class="st">"Papers published per year on Internet Addiction (PubMed)"</span>,</span>
<span id="cb201-6"><a href="#cb201-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlab =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PubMed-Article-Extraction-Using-rentrez_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of separate journals:</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>results_internet3 <span class="sc">%&gt;%</span> </span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 561 × 1
   Journal_name_short       
   &lt;chr&gt;                    
 1 Acad Psychiatry          
 2 Acta Inform Med          
 3 Acta Med Croatica        
 4 Acta Med Iran            
 5 Acta Med Port            
 6 Acta Neuropsychiatr      
 7 Acta Paediatr            
 8 Acta Psychol (Amst)      
 9 Addict Behav             
10 Addict Behav Rep         
11 Addict Biol              
12 Addict Health            
13 Addict Sci Clin Pract    
14 Addiction                
15 Adicciones               
16 Adolesc Med State Art Rev
17 Adolescence              
18 Adv Exp Med Biol         
19 Adv Med Educ Pract       
20 Adv Nutr                 
# ℹ 541 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Most popular journals:</span></span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a>results_internet3 <span class="sc">%&gt;%</span> </span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb204-4"><a href="#cb204-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb204-5"><a href="#cb204-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb204-6"><a href="#cb204-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb204-7"><a href="#cb204-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb204-8"><a href="#cb204-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 561 × 2
   Journal_name_short                  n
   &lt;chr&gt;                           &lt;int&gt;
 1 Int J Environ Res Public Health   146
 2 J Behav Addict                    110
 3 Front Psychiatry                   94
 4 Cyberpsychol Behav Soc Netw        88
 5 Front Psychol                      85
 6 Addict Behav                       76
 7 Psychiatry Res                     67
 8 PLoS One                           53
 9 Cyberpsychol Behav                 50
10 J Affect Disord                    31
11 BMC Psychiatry                     28
12 Psychiatry Investig                28
13 Compr Psychiatry                   27
14 Psychiatry Clin Neurosci           24
15 Front Public Health                23
16 Addict Behav Rep                   16
17 Asian J Psychiatr                  16
18 J Psychiatr Res                    15
19 Psychol Rep                        15
20 BMC Public Health                  14
# ℹ 541 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_internet2) # Visually inspect results</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now I need to add a label to all of these studies to signify that they Were returned from the internet search so that we can distinguish them from other studies when we later joined the datasets together:</span></span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a>Label <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"internet"</span>, <span class="at">times =</span> <span class="fu">count</span>(results_internet3))</span>
<span id="cb206-5"><a href="#cb206-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-6"><a href="#cb206-6" aria-hidden="true" tabindex="-1"></a>results_internet_final <span class="ot">&lt;-</span> results_internet3 <span class="sc">%&gt;%</span> <span class="fu">bind_cols</span>(Label) <span class="sc">%&gt;%</span></span>
<span id="cb206-7"><a href="#cb206-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Label =</span> <span class="dv">14</span>) <span class="sc">%&gt;%</span></span>
<span id="cb206-8"><a href="#cb206-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...14`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,334 × 14
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 An interve… 3.75e7  2023 Jul   10.1… "Unheal… Fantini, Luana;… "Department o…
 2 At-risk in… 3.75e7  2023 Jul   10.1… "BACKGR… Fukuda, Mari; C… "Okayama Univ…
 3 Eye moveme… 3.75e7  2023 Jul   10.1… "BACKGR… Ge, Ying; Huo, … "Key Laborato…
 4 Parental n… 3.75e7  2023 Jul   S014… "BACKGR… Li, Fang; Wang,… "School of Ps…
 5 Potential … 3.74e7  2023 Jul   S030… "This s… Akbari, Mehdi; … "Department o…
 6 Latent pro… 3.74e7  2023 Jul   10.1… "Health… Yu, Ling; Wu, Y… "Phase I Clin…
 7 Network an… 3.74e7  2023 Jul   S016… "BACKGR… Yang, Yuan; Zha… "Guangdong Me…
 8 A systemat… 3.74e7  2023 Jul   S016… "BACKGR… Jin, Meng-Ke; W… "School of Ps…
 9 Cue-reacti… 3.74e7  2023 Jul   S001… "BACKGR… Diers, Martin; … "Department o…
10 Associatio… 3.74e7  2023 &lt;NA&gt;  10.3… "Object… Shi, Yijian; Ta… "Department o…
# ℹ 2,324 more rows
# ℹ 6 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;, Label &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_internet_final)</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the cleaned results</span></span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_internet_final, <span class="st">"Data extraction/internet_data_cleaned.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="smart-phone-addiction" class="level2">
<h2 class="anchored" data-anchor-id="smart-phone-addiction">Smart phone addiction</h2>
<section id="extract-studies-and-perform-a-basic-clean-of-dataset-8" class="level4">
<h4 class="anchored" data-anchor-id="extract-studies-and-perform-a-basic-clean-of-dataset-8">Extract studies and perform a basic clean of dataset</h4>
<p><strong>Notes pre-search:</strong> MeSH terms: There are very few specific terms for smartphone addiction, and instead the general term “Internet addiction” is returned when searching it in the MeSH database (see: <a href="https://www.ncbi.nlm.nih.gov/mesh/?term=Smartphone+addiction">here</a>). Looking at the literature, it seems like ” smartphone addiction” is the most commonly used term, but sometimes “mobile phone” is used instead of smartphone.</p>
<p><strong>Actual search used:</strong> “Smartphone addiction”[Title/Abstract] OR “Smartphone disorder”[Title/Abstract] OR “Smartphone dependence”[Title/Abstract] OR “Mobile phone addiction”[Title/Abstract] OR “Mobile phone dependence”[Title/Abstract]</p>
<ul>
<li>Not found so removed from search terms: “Mobile phone disorder”</li>
</ul>
<p><strong>Manual search results:</strong> <a href="https://pubmed.ncbi.nlm.nih.gov/?term=%22Smartphone+addiction%22%5BTitle%2FAbstract%5D+OR+%22Smartphone+disorder%22%5BTitle%2FAbstract%5D+OR+%22Smartphone+dependence%22%5BTitle%2FAbstract%5D+OR+%22Mobile+phone+addiction%22%5BTitle%2FAbstract%5D+OR+%22Mobile+phone+dependence%22%5BTitle%2FAbstract%5D&amp;size=200">link</a></p>
<p><strong>Notes post-search:</strong> I manually inspected all of the results returned on PubMed. As far as I can see, all studies appeared relevant as of latest search date (see top of document).</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  Clean environment:</span></span>
<span id="cb210-3"><a href="#cb210-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb210-4"><a href="#cb210-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-5"><a href="#cb210-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the search term:</span></span>
<span id="cb210-6"><a href="#cb210-6" aria-hidden="true" tabindex="-1"></a>search_term_smart_phone <span class="ot">&lt;-</span> <span class="st">'"Smartphone addiction"[Title/Abstract] OR "Smartphone disorder"[Title/Abstract] OR "Smartphone dependence"[Title/Abstract] OR "Mobile phone addiction"[Title/Abstract] OR "Mobile phone dependence"[Title/Abstract]'</span></span>
<span id="cb210-7"><a href="#cb210-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-8"><a href="#cb210-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use entrez_search to get the IDs of the articles:</span></span>
<span id="cb210-9"><a href="#cb210-9" aria-hidden="true" tabindex="-1"></a>search_results_smart_phone <span class="ot">&lt;-</span> <span class="fu">entrez_search</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">term=</span>search_term_smart_phone, <span class="at">retmax=</span><span class="dv">20000</span>)</span>
<span id="cb210-10"><a href="#cb210-10" aria-hidden="true" tabindex="-1"></a>id_list_smart_phone <span class="ot">&lt;-</span> search_results_smart_phone<span class="sc">$</span>ids</span>
<span id="cb210-11"><a href="#cb210-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-12"><a href="#cb210-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Split id list into chunks of 100 for chunk/batches:</span></span>
<span id="cb210-13"><a href="#cb210-13" aria-hidden="true" tabindex="-1"></a>chunks <span class="ot">&lt;-</span> <span class="fu">split</span>(id_list_smart_phone, <span class="fu">ceiling</span>(<span class="fu">seq_along</span>(id_list_smart_phone)<span class="sc">/</span><span class="dv">100</span>))</span>
<span id="cb210-14"><a href="#cb210-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-15"><a href="#cb210-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch details for each chunk of articles:</span></span>
<span id="cb210-16"><a href="#cb210-16" aria-hidden="true" tabindex="-1"></a>article_details_smart_phone <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(chunks, <span class="cf">function</span>(ids) {</span>
<span id="cb210-17"><a href="#cb210-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fetch details of the articles:</span></span>
<span id="cb210-18"><a href="#cb210-18" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">entrez_fetch</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">id=</span>ids, <span class="at">rettype=</span><span class="st">"medline"</span>, <span class="at">retmode=</span><span class="st">"text"</span>)</span>
<span id="cb210-19"><a href="#cb210-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb210-20"><a href="#cb210-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split the articles into individual articles:</span></span>
<span id="cb210-21"><a href="#cb210-21" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(articles, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb210-22"><a href="#cb210-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb210-23"><a href="#cb210-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process each article:</span></span>
<span id="cb210-24"><a href="#cb210-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(articles, <span class="cf">function</span>(article) {</span>
<span id="cb210-25"><a href="#cb210-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Split the article into lines:</span></span>
<span id="cb210-26"><a href="#cb210-26" aria-hidden="true" tabindex="-1"></a>    lines <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(article, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb210-27"><a href="#cb210-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb210-28"><a href="#cb210-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the details we're interested in:</span></span>
<span id="cb210-29"><a href="#cb210-29" aria-hidden="true" tabindex="-1"></a>    details_smart_phone <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb210-30"><a href="#cb210-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">PMID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb210-31"><a href="#cb210-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">DP =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb210-32"><a href="#cb210-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">TI =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb210-33"><a href="#cb210-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">LID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb210-34"><a href="#cb210-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">AB =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb210-35"><a href="#cb210-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">FAU =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb210-36"><a href="#cb210-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">AD =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb210-37"><a href="#cb210-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">LA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb210-38"><a href="#cb210-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">PT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb210-39"><a href="#cb210-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">TA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb210-40"><a href="#cb210-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">COIS =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb210-41"><a href="#cb210-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">JT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb210-42"><a href="#cb210-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb210-43"><a href="#cb210-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb210-44"><a href="#cb210-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert the list of details into a one-row data frame:</span></span>
<span id="cb210-45"><a href="#cb210-45" aria-hidden="true" tabindex="-1"></a>    details_df_smart_phone <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(details_smart_phone)</span>
<span id="cb210-46"><a href="#cb210-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb210-47"><a href="#cb210-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(details_df_smart_phone)</span>
<span id="cb210-48"><a href="#cb210-48" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb210-49"><a href="#cb210-49" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb210-50"><a href="#cb210-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-51"><a href="#cb210-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the results:</span></span>
<span id="cb210-52"><a href="#cb210-52" aria-hidden="true" tabindex="-1"></a>article_details_smart_phone <span class="sc">%&gt;%</span></span>
<span id="cb210-53"><a href="#cb210-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb210-54"><a href="#cb210-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb210-55"><a href="#cb210-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-56"><a href="#cb210-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's remove the identifiers at the beginning of each data point:</span></span>
<span id="cb210-57"><a href="#cb210-57" aria-hidden="true" tabindex="-1"></a>rep_str <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'PMID- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'DP  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TI  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LID - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AB  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb210-58"><a href="#cb210-58" aria-hidden="true" tabindex="-1"></a>             <span class="st">'FAU - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AD  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LA  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'PT  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TA  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb210-59"><a href="#cb210-59" aria-hidden="true" tabindex="-1"></a>             <span class="st">'COIS- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'JT  - '</span> <span class="ot">=</span> <span class="st">''</span>)</span>
<span id="cb210-60"><a href="#cb210-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-61"><a href="#cb210-61" aria-hidden="true" tabindex="-1"></a>results_smart_phone <span class="ot">&lt;-</span> article_details_smart_phone <span class="sc">%&gt;%</span></span>
<span id="cb210-62"><a href="#cb210-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">str_replace_all</span>(., rep_str))) <span class="sc">%&gt;%</span> <span class="co"># Remove identifiers</span></span>
<span id="cb210-63"><a href="#cb210-63" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now separate the date year and month/day info:</span></span>
<span id="cb210-64"><a href="#cb210-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(DP, <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Month"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st"> "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb210-65"><a href="#cb210-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.numeric</span>(Year)) <span class="sc">%&gt;%</span> <span class="co"># Convert Year to numeric</span></span>
<span id="cb210-66"><a href="#cb210-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="co"># Let's also provide more descriptive names for each of the columns</span></span>
<span id="cb210-67"><a href="#cb210-67" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Title"</span> <span class="ot">=</span> <span class="st">"TI"</span>, </span>
<span id="cb210-68"><a href="#cb210-68" aria-hidden="true" tabindex="-1"></a>         <span class="st">"DOI"</span> <span class="ot">=</span> <span class="st">"LID"</span>, </span>
<span id="cb210-69"><a href="#cb210-69" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Abstract"</span> <span class="ot">=</span> <span class="st">"AB"</span>, </span>
<span id="cb210-70"><a href="#cb210-70" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Full_Author_Name"</span> <span class="ot">=</span> <span class="st">"FAU"</span>, </span>
<span id="cb210-71"><a href="#cb210-71" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Author_Address"</span> <span class="ot">=</span> <span class="st">"AD"</span>, </span>
<span id="cb210-72"><a href="#cb210-72" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Language"</span> <span class="ot">=</span> <span class="st">"LA"</span>, </span>
<span id="cb210-73"><a href="#cb210-73" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Publication_Type"</span> <span class="ot">=</span> <span class="st">"PT"</span>, </span>
<span id="cb210-74"><a href="#cb210-74" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_name_short"</span> <span class="ot">=</span> <span class="st">"TA"</span>,</span>
<span id="cb210-75"><a href="#cb210-75" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Conflict_of_Interest_Statement"</span> <span class="ot">=</span> <span class="st">"COIS"</span>,</span>
<span id="cb210-76"><a href="#cb210-76" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_Title"</span> <span class="ot">=</span> <span class="st">"JT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb210-77"><a href="#cb210-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb210-78"><a href="#cb210-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-79"><a href="#cb210-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the initial results before proceeding so we can't lose them!</span></span>
<span id="cb210-80"><a href="#cb210-80" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_smart_phone, <span class="st">"Data extraction/smart_phone_data.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb210-81"><a href="#cb210-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-82"><a href="#cb210-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="extract-full-title-using-rvest-8" class="level4">
<h4 class="anchored" data-anchor-id="extract-full-title-using-rvest-8">Extract full title using rvest</h4>
<p>Again, we’re going to use the <code>rvest</code> package to scrape the titles returned from the manual search in PubMed, then join the two datasets using the PMID, retaining the title from this new dataset.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add search URL:</span></span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a>url_smart_phone_rvest <span class="ot">&lt;-</span> <span class="st">"https://pubmed.ncbi.nlm.nih.gov/?term=%22Smartphone+addiction%22%5BTitle%2FAbstract%5D+OR+%22Smartphone+disorder%22%5BTitle%2FAbstract%5D+OR+%22Smartphone+dependence%22%5BTitle%2FAbstract%5D+OR+%22Mobile+phone+addiction%22%5BTitle%2FAbstract%5D+OR+%22Mobile+phone+dependence%22%5BTitle%2FAbstract%5D&amp;size=200"</span> <span class="co"># 882 results returned on 19/08/2023</span></span>
<span id="cb211-4"><a href="#cb211-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-5"><a href="#cb211-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and parse the webpage</span></span>
<span id="cb211-6"><a href="#cb211-6" aria-hidden="true" tabindex="-1"></a>webpage_smart_phone_rvest <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_smart_phone_rvest)</span>
<span id="cb211-7"><a href="#cb211-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-8"><a href="#cb211-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the total number of search results</span></span>
<span id="cb211-9"><a href="#cb211-9" aria-hidden="true" tabindex="-1"></a>results_count_smart_phone <span class="ot">&lt;-</span> webpage_smart_phone_rvest <span class="sc">%&gt;%</span></span>
<span id="cb211-10"><a href="#cb211-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">".results-amount .value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb211-11"><a href="#cb211-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb211-12"><a href="#cb211-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">","</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb211-13"><a href="#cb211-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb211-14"><a href="#cb211-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-15"><a href="#cb211-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the number of pages</span></span>
<span id="cb211-16"><a href="#cb211-16" aria-hidden="true" tabindex="-1"></a>results_per_page_smart_phone <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb211-17"><a href="#cb211-17" aria-hidden="true" tabindex="-1"></a>total_pages_smart_phone <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(results_count_smart_phone[<span class="dv">1</span>] <span class="sc">/</span> results_per_page_smart_phone)</span>
<span id="cb211-18"><a href="#cb211-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results_count_smart_phone and total_pages_smart_phone</span></span>
<span id="cb211-19"><a href="#cb211-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results_count_smart_phone)</span>
<span id="cb211-20"><a href="#cb211-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(total_pages_smart_phone)</span>
<span id="cb211-21"><a href="#cb211-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-22"><a href="#cb211-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-23"><a href="#cb211-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty data frame</span></span>
<span id="cb211-24"><a href="#cb211-24" aria-hidden="true" tabindex="-1"></a>results_smart_phone_rvest <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb211-25"><a href="#cb211-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-26"><a href="#cb211-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each page and scrape the data</span></span>
<span id="cb211-27"><a href="#cb211-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (page <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span>(total_pages_smart_phone <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb211-28"><a href="#cb211-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the page parameter in the URL for the current page</span></span>
<span id="cb211-29"><a href="#cb211-29" aria-hidden="true" tabindex="-1"></a>  current_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(url_smart_phone_rvest, <span class="st">"&amp;page="</span>, page <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb211-30"><a href="#cb211-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb211-31"><a href="#cb211-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read and parse the current webpage</span></span>
<span id="cb211-32"><a href="#cb211-32" aria-hidden="true" tabindex="-1"></a>  current_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(current_url)</span>
<span id="cb211-33"><a href="#cb211-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb211-34"><a href="#cb211-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract title</span></span>
<span id="cb211-35"><a href="#cb211-35" aria-hidden="true" tabindex="-1"></a>  Title <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb211-36"><a href="#cb211-36" aria-hidden="true" tabindex="-1"></a>    current_page <span class="sc">%&gt;%</span></span>
<span id="cb211-37"><a href="#cb211-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_nodes</span>(<span class="st">".docsum-title"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb211-38"><a href="#cb211-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb211-39"><a href="#cb211-39" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb211-40"><a href="#cb211-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Error extracting title info on page"</span>, page <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb211-41"><a href="#cb211-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">length</span>(Title))  <span class="co"># Return a vector of NAs with the same length as Title</span></span>
<span id="cb211-42"><a href="#cb211-42" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb211-43"><a href="#cb211-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb211-44"><a href="#cb211-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the PMID</span></span>
<span id="cb211-45"><a href="#cb211-45" aria-hidden="true" tabindex="-1"></a>  pmid <span class="ot">&lt;-</span> current_page <span class="sc">%&gt;%</span></span>
<span id="cb211-46"><a href="#cb211-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".docsum-pmid"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb211-47"><a href="#cb211-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb211-48"><a href="#cb211-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb211-49"><a href="#cb211-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a data frame with the extracted data</span></span>
<span id="cb211-50"><a href="#cb211-50" aria-hidden="true" tabindex="-1"></a>  current_results_smart_phone <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Title =</span> Title,</span>
<span id="cb211-51"><a href="#cb211-51" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">PMID =</span> pmid)</span>
<span id="cb211-52"><a href="#cb211-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb211-53"><a href="#cb211-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the current results with the previous results</span></span>
<span id="cb211-54"><a href="#cb211-54" aria-hidden="true" tabindex="-1"></a>  results_smart_phone_rvest <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results_smart_phone_rvest, current_results_smart_phone)</span>
<span id="cb211-55"><a href="#cb211-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb211-56"><a href="#cb211-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Introduce a delay to avoid overloading the server</span></span>
<span id="cb211-57"><a href="#cb211-57" aria-hidden="true" tabindex="-1"></a>  sleep_time <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> <span class="dv">5</span>, <span class="at">max =</span> <span class="dv">15</span>)</span>
<span id="cb211-58"><a href="#cb211-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(sleep_time)</span>
<span id="cb211-59"><a href="#cb211-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb211-60"><a href="#cb211-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-61"><a href="#cb211-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the extracted data</span></span>
<span id="cb211-62"><a href="#cb211-62" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as_tibble</span>(results_smart_phone_rvest))</span>
<span id="cb211-63"><a href="#cb211-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-64"><a href="#cb211-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-65"><a href="#cb211-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the titles before proceeding so we can't lose them!</span></span>
<span id="cb211-66"><a href="#cb211-66" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_smart_phone_rvest, <span class="st">"Data extraction/smart_phone_titles.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb211-67"><a href="#cb211-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="refine-dataset-8" class="level4">
<h4 class="anchored" data-anchor-id="refine-dataset-8">Refine dataset</h4>
<p>Now we need to identify and remove any duplicates, irrelevant studies, or entries with any other issues (e.g., those that turn out to be books)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in first dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a>results_smart_phone<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/smart_phone_data.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb212-4"><a href="#cb212-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-5"><a href="#cb212-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in second dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb212-6"><a href="#cb212-6" aria-hidden="true" tabindex="-1"></a>results_smart_phone_rvest<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/smart_phone_titles.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb212-7"><a href="#cb212-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb212-8"><a href="#cb212-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-9"><a href="#cb212-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge our two datasets</span></span>
<span id="cb212-10"><a href="#cb212-10" aria-hidden="true" tabindex="-1"></a>results_smart_phone2 <span class="ot">&lt;-</span> results_smart_phone <span class="sc">%&gt;%</span></span>
<span id="cb212-11"><a href="#cb212-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb212-12"><a href="#cb212-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Title_trunc"</span> <span class="ot">=</span> <span class="st">"Title"</span>) <span class="sc">%&gt;%</span> <span class="co"># Designate the truncated title from our primary dataset so we can remove it once we get the full title</span></span>
<span id="cb212-13"><a href="#cb212-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(results_smart_phone_rvest, <span class="at">by =</span> <span class="st">"PMID"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb212-14"><a href="#cb212-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Title_trunc) <span class="sc">%&gt;%</span> <span class="co"># Bye truncated title</span></span>
<span id="cb212-15"><a href="#cb212-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Title) <span class="sc">%&gt;%</span> <span class="co"># Place full title first for ease</span></span>
<span id="cb212-16"><a href="#cb212-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 275 × 13
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 Decision m… 3.76e7  2023 &lt;NA&gt;  10.3… "INTROD… Muller, Silke M… "Department o…
 2 Mapping th… 3.75e7  2023 Jul   S016… "Contem… Hunt, Brian; Za… "Institute fo…
 3 The World … 3.75e7  2022 Dec   10.1… "OBJECT… Turner, Daniel;… "Department o…
 4 Should pro… 3.75e7  2023 Dec   10.1… "Despit… Pistre, Natasha… "Department o…
 5 Measuring … 3.75e7  2023 Jul   10.1… "BACKGR… Miele, Cecile; … "Laboratory Q…
 6 Fetal Fant… 3.75e7  2023 Jul   10.1… "This a… Erdman, Andrew L "LCSW, 235 We…
 7 Personalit… 3.74e7  2023 Jun   10.1… "BACKGR… Engel, Jannis; … "Department o…
 8 How the Ri… 3.73e7  2023 Jun   10.7… "On Jan… Irizarry, Ricar… "Psychiatry, …
 9 Childhood … 3.72e7  2023 Jan   10.1… "Object… Zashchirinskaia… "Saint-Peters…
10 Frequency … 3.71e7  2023 &lt;NA&gt;  10.1… "INTROD… Schreck, Benoit… "Nantes Unive…
# ℹ 265 more rows
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check results:</span></span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_smart_phone2)</span></span>
<span id="cb214-3"><a href="#cb214-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-4"><a href="#cb214-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on title:</span></span>
<span id="cb214-5"><a href="#cb214-5" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_smart_phone2 <span class="sc">%&gt;%</span></span>
<span id="cb214-6"><a href="#cb214-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Title) <span class="sc">%&gt;%</span></span>
<span id="cb214-7"><a href="#cb214-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb214-8"><a href="#cb214-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># n = 0 dupes (August 2023)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1   273</code></pre>
</div>
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on PMID:</span></span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_smart_phone2 <span class="sc">%&gt;%</span></span>
<span id="cb216-3"><a href="#cb216-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(PMID) <span class="sc">%&gt;%</span></span>
<span id="cb216-4"><a href="#cb216-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb216-5"><a href="#cb216-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1   275</code></pre>
</div>
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of the year variable:</span></span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(results_smart_phone2<span class="sc">$</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1987    2010    2016    2014    2020    2023 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of publications per year:</span></span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a>smart_phone_hist<span class="ot">&lt;-</span> <span class="fu">hist</span>(results_smart_phone2<span class="sc">$</span>Year,</span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1960</span>,<span class="dv">2023</span>),</span>
<span id="cb220-4"><a href="#cb220-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="dv">30</span>,</span>
<span id="cb220-5"><a href="#cb220-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">main =</span> <span class="st">"Papers published per year on Smartphone Addiction (PubMed)"</span>,</span>
<span id="cb220-6"><a href="#cb220-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlab =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PubMed-Article-Extraction-Using-rentrez_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of separate journals:</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>results_smart_phone2 <span class="sc">%&gt;%</span> </span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 143 × 1
   Journal_name_short     
   &lt;chr&gt;                  
 1 AIDS Patient Care STDS 
 2 Acc Chem Res           
 3 Acta Med Hist Adriat   
 4 Acta Pharm Sin B       
 5 Addict Behav           
 6 Addict Behav Rep       
 7 Addiction              
 8 Adicciones             
 9 Adv Exp Med Biol       
10 Am Fam Physician       
11 Am J Drug Alcohol Abuse
12 Am J Psychoanal        
13 Ann Endocrinol (Paris) 
14 Arch Ital Urol Androl  
15 Arch Sex Behav         
16 Asian J Psychiatr      
17 BMC Psychiatry         
18 BMJ Case Rep           
19 Biochem Pharmacol      
20 Brain Nerve            
# ℹ 123 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Most popular journals:</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>results_smart_phone2 <span class="sc">%&gt;%</span> </span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb223-4"><a href="#cb223-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb223-5"><a href="#cb223-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb223-6"><a href="#cb223-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb223-7"><a href="#cb223-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb223-8"><a href="#cb223-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 143 × 2
   Journal_name_short                  n
   &lt;chr&gt;                           &lt;int&gt;
 1 J Behav Addict                     25
 2 J Sex Med                          17
 3 J Sex Marital Ther                 13
 4 Arch Sex Behav                      9
 5 Cureus                              7
 6 Int J Environ Res Public Health     5
 7 J Addict Med                        5
 8 J Sex Res                           5
 9 Addiction                           4
10 Encephale                           4
11 Front Psychiatry                    4
12 Addict Behav Rep                    3
13 BMC Psychiatry                      3
14 Braz J Psychiatry                   3
15 CNS Spectr                          3
16 Clin Psychol Rev                    3
17 Front Psychol                       3
18 Indian J Psychiatry                 3
19 J Clin Med                          3
20 J Psychoactive Drugs                3
# ℹ 123 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_smart_phone2) # Visually inspect results</span></span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now I need to add a label to all of these studies to signify that they Were returned from the smart_phone search so that we can distinguish them from other studies when we later joined the datasets together:</span></span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true" tabindex="-1"></a>Label <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"smart_phone"</span>, <span class="at">times =</span> <span class="fu">count</span>(results_smart_phone2))</span>
<span id="cb225-5"><a href="#cb225-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-6"><a href="#cb225-6" aria-hidden="true" tabindex="-1"></a>results_smart_phone_final <span class="ot">&lt;-</span> results_smart_phone2 <span class="sc">%&gt;%</span> <span class="fu">bind_cols</span>(Label) <span class="sc">%&gt;%</span></span>
<span id="cb225-7"><a href="#cb225-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Label =</span> <span class="dv">14</span>) <span class="sc">%&gt;%</span></span>
<span id="cb225-8"><a href="#cb225-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...14`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 275 × 14
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 Decision m… 3.76e7  2023 &lt;NA&gt;  10.3… "INTROD… Muller, Silke M… "Department o…
 2 Mapping th… 3.75e7  2023 Jul   S016… "Contem… Hunt, Brian; Za… "Institute fo…
 3 The World … 3.75e7  2022 Dec   10.1… "OBJECT… Turner, Daniel;… "Department o…
 4 Should pro… 3.75e7  2023 Dec   10.1… "Despit… Pistre, Natasha… "Department o…
 5 Measuring … 3.75e7  2023 Jul   10.1… "BACKGR… Miele, Cecile; … "Laboratory Q…
 6 Fetal Fant… 3.75e7  2023 Jul   10.1… "This a… Erdman, Andrew L "LCSW, 235 We…
 7 Personalit… 3.74e7  2023 Jun   10.1… "BACKGR… Engel, Jannis; … "Department o…
 8 How the Ri… 3.73e7  2023 Jun   10.7… "On Jan… Irizarry, Ricar… "Psychiatry, …
 9 Childhood … 3.72e7  2023 Jan   10.1… "Object… Zashchirinskaia… "Saint-Peters…
10 Frequency … 3.71e7  2023 &lt;NA&gt;  10.1… "INTROD… Schreck, Benoit… "Nantes Unive…
# ℹ 265 more rows
# ℹ 6 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;, Label &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_smart_phone_final)</span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the cleaned results</span></span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_smart_phone_final, <span class="st">"Data extraction/smart_phone_data_cleaned.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="cybersex-addiction" class="level2">
<h2 class="anchored" data-anchor-id="cybersex-addiction">Cybersex addiction</h2>
<section id="extract-studies-and-perform-a-basic-clean-of-dataset-9" class="level4">
<h4 class="anchored" data-anchor-id="extract-studies-and-perform-a-basic-clean-of-dataset-9">Extract studies and perform a basic clean of dataset</h4>
<p><strong>Notes pre-search:</strong> There are no MeSH terms for this. Searching around the literature it seems like the most commonly Used term is “cybersex addiction”. “compulsive cybersex” It is also commonly used and seems to be consistently used to indicate an addiction (see https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7044618/). “addictive cybersex” is also sometimes included in study abstracts.</p>
<p><strong>Actual search used:</strong> “Cybersex addiction”[Title/Abstract] OR “Compulsive Cybersex”[Title/Abstract] OR “Addictive cybersex”[Title/Abstract]</p>
<p><strong>Manual search results:</strong> <a href="https://pubmed.ncbi.nlm.nih.gov/?term=%22Cybersex+addiction%22%5BTitle%2FAbstract%5D+OR+%22Compulsive+Cybersex%22%5BTitle%2FAbstract%5D+OR+%22Addictive+cybersex%22%5BTitle%2FAbstract%5D&amp;size=200">link</a></p>
<p><strong>Notes post-search:</strong> I manually inspected all of the results returned on PubMed (there aren’t too many this time). As far as I can see, all studies appeared relevant as of latest search date (see top of document).</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  Clean environment:</span></span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the search term:</span></span>
<span id="cb229-6"><a href="#cb229-6" aria-hidden="true" tabindex="-1"></a>search_term_cybersex <span class="ot">&lt;-</span> <span class="st">'"Cybersex addiction"[Title/Abstract] OR "Compulsive Cybersex"[Title/Abstract] OR "Addictive cybersex"[Title/Abstract]'</span></span>
<span id="cb229-7"><a href="#cb229-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-8"><a href="#cb229-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use entrez_search to get the IDs of the articles:</span></span>
<span id="cb229-9"><a href="#cb229-9" aria-hidden="true" tabindex="-1"></a>search_results_cybersex <span class="ot">&lt;-</span> <span class="fu">entrez_search</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">term=</span>search_term_cybersex, <span class="at">retmax=</span><span class="dv">20000</span>)</span>
<span id="cb229-10"><a href="#cb229-10" aria-hidden="true" tabindex="-1"></a>id_list_cybersex <span class="ot">&lt;-</span> search_results_cybersex<span class="sc">$</span>ids</span>
<span id="cb229-11"><a href="#cb229-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-12"><a href="#cb229-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Split id list into chunks of 100 for chunk/batches:</span></span>
<span id="cb229-13"><a href="#cb229-13" aria-hidden="true" tabindex="-1"></a>chunks <span class="ot">&lt;-</span> <span class="fu">split</span>(id_list_cybersex, <span class="fu">ceiling</span>(<span class="fu">seq_along</span>(id_list_cybersex)<span class="sc">/</span><span class="dv">100</span>))</span>
<span id="cb229-14"><a href="#cb229-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-15"><a href="#cb229-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch details for each chunk of articles:</span></span>
<span id="cb229-16"><a href="#cb229-16" aria-hidden="true" tabindex="-1"></a>article_details_cybersex <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(chunks, <span class="cf">function</span>(ids) {</span>
<span id="cb229-17"><a href="#cb229-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fetch details of the articles:</span></span>
<span id="cb229-18"><a href="#cb229-18" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">entrez_fetch</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">id=</span>ids, <span class="at">rettype=</span><span class="st">"medline"</span>, <span class="at">retmode=</span><span class="st">"text"</span>)</span>
<span id="cb229-19"><a href="#cb229-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb229-20"><a href="#cb229-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split the articles into individual articles:</span></span>
<span id="cb229-21"><a href="#cb229-21" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(articles, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb229-22"><a href="#cb229-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb229-23"><a href="#cb229-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process each article:</span></span>
<span id="cb229-24"><a href="#cb229-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(articles, <span class="cf">function</span>(article) {</span>
<span id="cb229-25"><a href="#cb229-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Split the article into lines:</span></span>
<span id="cb229-26"><a href="#cb229-26" aria-hidden="true" tabindex="-1"></a>    lines <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(article, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb229-27"><a href="#cb229-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-28"><a href="#cb229-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the details we're interested in:</span></span>
<span id="cb229-29"><a href="#cb229-29" aria-hidden="true" tabindex="-1"></a>    details_cybersex <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb229-30"><a href="#cb229-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">PMID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb229-31"><a href="#cb229-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">DP =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb229-32"><a href="#cb229-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">TI =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb229-33"><a href="#cb229-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">LID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb229-34"><a href="#cb229-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">AB =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb229-35"><a href="#cb229-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">FAU =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb229-36"><a href="#cb229-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">AD =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb229-37"><a href="#cb229-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">LA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb229-38"><a href="#cb229-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">PT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb229-39"><a href="#cb229-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">TA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb229-40"><a href="#cb229-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">COIS =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb229-41"><a href="#cb229-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">JT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb229-42"><a href="#cb229-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb229-43"><a href="#cb229-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-44"><a href="#cb229-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert the list of details into a one-row data frame:</span></span>
<span id="cb229-45"><a href="#cb229-45" aria-hidden="true" tabindex="-1"></a>    details_df_cybersex <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(details_cybersex)</span>
<span id="cb229-46"><a href="#cb229-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-47"><a href="#cb229-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(details_df_cybersex)</span>
<span id="cb229-48"><a href="#cb229-48" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb229-49"><a href="#cb229-49" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb229-50"><a href="#cb229-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-51"><a href="#cb229-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the results:</span></span>
<span id="cb229-52"><a href="#cb229-52" aria-hidden="true" tabindex="-1"></a>article_details_cybersex <span class="sc">%&gt;%</span></span>
<span id="cb229-53"><a href="#cb229-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb229-54"><a href="#cb229-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb229-55"><a href="#cb229-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-56"><a href="#cb229-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's remove the identifiers at the beginning of each data point:</span></span>
<span id="cb229-57"><a href="#cb229-57" aria-hidden="true" tabindex="-1"></a>rep_str <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'PMID- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'DP  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TI  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LID - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AB  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb229-58"><a href="#cb229-58" aria-hidden="true" tabindex="-1"></a>             <span class="st">'FAU - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AD  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LA  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'PT  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TA  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb229-59"><a href="#cb229-59" aria-hidden="true" tabindex="-1"></a>             <span class="st">'COIS- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'JT  - '</span> <span class="ot">=</span> <span class="st">''</span>)</span>
<span id="cb229-60"><a href="#cb229-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-61"><a href="#cb229-61" aria-hidden="true" tabindex="-1"></a>results_cybersex <span class="ot">&lt;-</span> article_details_cybersex <span class="sc">%&gt;%</span></span>
<span id="cb229-62"><a href="#cb229-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">str_replace_all</span>(., rep_str))) <span class="sc">%&gt;%</span> <span class="co"># Remove identifiers</span></span>
<span id="cb229-63"><a href="#cb229-63" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now separate the date year and month/day info:</span></span>
<span id="cb229-64"><a href="#cb229-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(DP, <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Month"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st"> "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb229-65"><a href="#cb229-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.numeric</span>(Year)) <span class="sc">%&gt;%</span> <span class="co"># Convert Year to numeric</span></span>
<span id="cb229-66"><a href="#cb229-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="co"># Let's also provide more descriptive names for each of the columns</span></span>
<span id="cb229-67"><a href="#cb229-67" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Title"</span> <span class="ot">=</span> <span class="st">"TI"</span>, </span>
<span id="cb229-68"><a href="#cb229-68" aria-hidden="true" tabindex="-1"></a>         <span class="st">"DOI"</span> <span class="ot">=</span> <span class="st">"LID"</span>, </span>
<span id="cb229-69"><a href="#cb229-69" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Abstract"</span> <span class="ot">=</span> <span class="st">"AB"</span>, </span>
<span id="cb229-70"><a href="#cb229-70" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Full_Author_Name"</span> <span class="ot">=</span> <span class="st">"FAU"</span>, </span>
<span id="cb229-71"><a href="#cb229-71" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Author_Address"</span> <span class="ot">=</span> <span class="st">"AD"</span>, </span>
<span id="cb229-72"><a href="#cb229-72" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Language"</span> <span class="ot">=</span> <span class="st">"LA"</span>, </span>
<span id="cb229-73"><a href="#cb229-73" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Publication_Type"</span> <span class="ot">=</span> <span class="st">"PT"</span>, </span>
<span id="cb229-74"><a href="#cb229-74" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_name_short"</span> <span class="ot">=</span> <span class="st">"TA"</span>,</span>
<span id="cb229-75"><a href="#cb229-75" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Conflict_of_Interest_Statement"</span> <span class="ot">=</span> <span class="st">"COIS"</span>,</span>
<span id="cb229-76"><a href="#cb229-76" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_Title"</span> <span class="ot">=</span> <span class="st">"JT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb229-77"><a href="#cb229-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb229-78"><a href="#cb229-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-79"><a href="#cb229-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the initial results before proceeding so we can't lose them!</span></span>
<span id="cb229-80"><a href="#cb229-80" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_cybersex, <span class="st">"Data extraction/cybersex_data.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb229-81"><a href="#cb229-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-82"><a href="#cb229-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="extract-full-title-using-rvest-9" class="level4">
<h4 class="anchored" data-anchor-id="extract-full-title-using-rvest-9">Extract full title using rvest</h4>
<p>Again, we’re going to use the <code>rvest</code> package to scrape the titles returned from the manual search in PubMed, then join the two datasets using the PMID, retaining the title from this new dataset.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add search URL:</span></span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a>url_cybersex_rvest <span class="ot">&lt;-</span> <span class="st">"https://pubmed.ncbi.nlm.nih.gov/?term=%22Cybersex+addiction%22%5BTitle%2FAbstract%5D+OR+%22Compulsive+Cybersex%22%5BTitle%2FAbstract%5D+OR+%22Addictive+cybersex%22%5BTitle%2FAbstract%5D&amp;size=200"</span> <span class="co"># 28 results returned on 19/08/2023</span></span>
<span id="cb230-4"><a href="#cb230-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-5"><a href="#cb230-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and parse the webpage</span></span>
<span id="cb230-6"><a href="#cb230-6" aria-hidden="true" tabindex="-1"></a>webpage_cybersex_rvest <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_cybersex_rvest)</span>
<span id="cb230-7"><a href="#cb230-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-8"><a href="#cb230-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the total number of search results</span></span>
<span id="cb230-9"><a href="#cb230-9" aria-hidden="true" tabindex="-1"></a>results_count_cybersex <span class="ot">&lt;-</span> webpage_cybersex_rvest <span class="sc">%&gt;%</span></span>
<span id="cb230-10"><a href="#cb230-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">".results-amount .value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb230-11"><a href="#cb230-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb230-12"><a href="#cb230-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">","</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb230-13"><a href="#cb230-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb230-14"><a href="#cb230-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-15"><a href="#cb230-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the number of pages</span></span>
<span id="cb230-16"><a href="#cb230-16" aria-hidden="true" tabindex="-1"></a>results_per_page_cybersex <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb230-17"><a href="#cb230-17" aria-hidden="true" tabindex="-1"></a>total_pages_cybersex <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(results_count_cybersex[<span class="dv">1</span>] <span class="sc">/</span> results_per_page_cybersex)</span>
<span id="cb230-18"><a href="#cb230-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results_count_cybersex and total_pages_cybersex</span></span>
<span id="cb230-19"><a href="#cb230-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results_count_cybersex)</span>
<span id="cb230-20"><a href="#cb230-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(total_pages_cybersex)</span>
<span id="cb230-21"><a href="#cb230-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-22"><a href="#cb230-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-23"><a href="#cb230-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty data frame</span></span>
<span id="cb230-24"><a href="#cb230-24" aria-hidden="true" tabindex="-1"></a>results_cybersex_rvest <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb230-25"><a href="#cb230-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-26"><a href="#cb230-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each page and scrape the data</span></span>
<span id="cb230-27"><a href="#cb230-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (page <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span>(total_pages_cybersex <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb230-28"><a href="#cb230-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the page parameter in the URL for the current page</span></span>
<span id="cb230-29"><a href="#cb230-29" aria-hidden="true" tabindex="-1"></a>  current_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(url_cybersex_rvest, <span class="st">"&amp;page="</span>, page <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb230-30"><a href="#cb230-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb230-31"><a href="#cb230-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read and parse the current webpage</span></span>
<span id="cb230-32"><a href="#cb230-32" aria-hidden="true" tabindex="-1"></a>  current_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(current_url)</span>
<span id="cb230-33"><a href="#cb230-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb230-34"><a href="#cb230-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract title</span></span>
<span id="cb230-35"><a href="#cb230-35" aria-hidden="true" tabindex="-1"></a>  Title <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb230-36"><a href="#cb230-36" aria-hidden="true" tabindex="-1"></a>    current_page <span class="sc">%&gt;%</span></span>
<span id="cb230-37"><a href="#cb230-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_nodes</span>(<span class="st">".docsum-title"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb230-38"><a href="#cb230-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb230-39"><a href="#cb230-39" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb230-40"><a href="#cb230-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Error extracting title info on page"</span>, page <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb230-41"><a href="#cb230-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">length</span>(Title))  <span class="co"># Return a vector of NAs with the same length as Title</span></span>
<span id="cb230-42"><a href="#cb230-42" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb230-43"><a href="#cb230-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb230-44"><a href="#cb230-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the PMID</span></span>
<span id="cb230-45"><a href="#cb230-45" aria-hidden="true" tabindex="-1"></a>  pmid <span class="ot">&lt;-</span> current_page <span class="sc">%&gt;%</span></span>
<span id="cb230-46"><a href="#cb230-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".docsum-pmid"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb230-47"><a href="#cb230-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb230-48"><a href="#cb230-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb230-49"><a href="#cb230-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a data frame with the extracted data</span></span>
<span id="cb230-50"><a href="#cb230-50" aria-hidden="true" tabindex="-1"></a>  current_results_cybersex <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Title =</span> Title,</span>
<span id="cb230-51"><a href="#cb230-51" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">PMID =</span> pmid)</span>
<span id="cb230-52"><a href="#cb230-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb230-53"><a href="#cb230-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the current results with the previous results</span></span>
<span id="cb230-54"><a href="#cb230-54" aria-hidden="true" tabindex="-1"></a>  results_cybersex_rvest <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results_cybersex_rvest, current_results_cybersex)</span>
<span id="cb230-55"><a href="#cb230-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb230-56"><a href="#cb230-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Introduce a delay to avoid overloading the server</span></span>
<span id="cb230-57"><a href="#cb230-57" aria-hidden="true" tabindex="-1"></a>  sleep_time <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> <span class="dv">5</span>, <span class="at">max =</span> <span class="dv">15</span>)</span>
<span id="cb230-58"><a href="#cb230-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(sleep_time)</span>
<span id="cb230-59"><a href="#cb230-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb230-60"><a href="#cb230-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-61"><a href="#cb230-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the extracted data</span></span>
<span id="cb230-62"><a href="#cb230-62" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as_tibble</span>(results_cybersex_rvest))</span>
<span id="cb230-63"><a href="#cb230-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-64"><a href="#cb230-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-65"><a href="#cb230-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the titles before proceeding so we can't lose them!</span></span>
<span id="cb230-66"><a href="#cb230-66" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_cybersex_rvest, <span class="st">"Data extraction/cybersex_titles.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb230-67"><a href="#cb230-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="refine-dataset-9" class="level4">
<h4 class="anchored" data-anchor-id="refine-dataset-9">Refine dataset</h4>
<p>Now we need to identify and remove any duplicates, irrelevant studies, or entries with any other issues (e.g., those that turn out to be books)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in first dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a>results_cybersex<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/cybersex_data.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb231-3"><a href="#cb231-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb231-4"><a href="#cb231-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-5"><a href="#cb231-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in second dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb231-6"><a href="#cb231-6" aria-hidden="true" tabindex="-1"></a>results_cybersex_rvest<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/cybersex_titles.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb231-7"><a href="#cb231-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb231-8"><a href="#cb231-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-9"><a href="#cb231-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge our two datasets</span></span>
<span id="cb231-10"><a href="#cb231-10" aria-hidden="true" tabindex="-1"></a>results_cybersex2 <span class="ot">&lt;-</span> results_cybersex <span class="sc">%&gt;%</span></span>
<span id="cb231-11"><a href="#cb231-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb231-12"><a href="#cb231-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Title_trunc"</span> <span class="ot">=</span> <span class="st">"Title"</span>) <span class="sc">%&gt;%</span> <span class="co"># Designate the truncated title from our primary dataset so we can remove it once we get the full title</span></span>
<span id="cb231-13"><a href="#cb231-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(results_cybersex_rvest, <span class="at">by =</span> <span class="st">"PMID"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb231-14"><a href="#cb231-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Title_trunc) <span class="sc">%&gt;%</span> <span class="co"># Bye truncated title</span></span>
<span id="cb231-15"><a href="#cb231-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Title) <span class="sc">%&gt;%</span> <span class="co"># Place full title first for ease</span></span>
<span id="cb231-16"><a href="#cb231-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 28 × 13
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 How the Ri… 3.73e7  2023 Jun   10.7… "On Jan… Irizarry, Ricar… "Psychiatry, …
 2 [Behaviora… 3.67e7  2023 &lt;NA&gt;  10.1… "The re… Egorov, A Y      "Sechenov Ins…
 3 Global pre… 3.52e7  2022 Mar   S027… "The pr… Meng, Shi-Qiu; … "National Ins…
 4 Electrophy… 3.48e7  2021 Nov   10.1… "BACKGR… Wang, Jianfeng;…  &lt;NA&gt;         
 5 Self-Perce… 3.48e7  2022 Feb   10.1… "Online… Mennig, Manuel;… "Department o…
 6 The Impact… 3.43e7  2021 &lt;NA&gt;  10.3… "Backgr… Markert, Charlo… "Department o…
 7 Cybersex a… 3.34e7  2021 Jul-… 10.1… "BACKGR… Skryabin, Valen… "Moscow Resea…
 8 Event-rela… 3.29e7  2020 Oct   10.1… "BACKGR… Wang, Jianfeng;…  &lt;NA&gt;         
 9 Contributi… 3.15e7  2019 Sep   10.1… "BACKGR… Brahim, Farah B… "Department o…
10 Sexual Des… 3.07e7  2019 Jan   10.2… "BACKGR… Varfi, Nektaria… "Geneva Unive…
# ℹ 18 more rows
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check results:</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_cybersex2)</span></span>
<span id="cb233-3"><a href="#cb233-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-4"><a href="#cb233-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on title:</span></span>
<span id="cb233-5"><a href="#cb233-5" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_cybersex2 <span class="sc">%&gt;%</span></span>
<span id="cb233-6"><a href="#cb233-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Title) <span class="sc">%&gt;%</span></span>
<span id="cb233-7"><a href="#cb233-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb233-8"><a href="#cb233-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># n = 0 dupes (August 2023)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1    28</code></pre>
</div>
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on PMID:</span></span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a>Simple_duplicate_removal_n <span class="ot">&lt;-</span> results_cybersex2 <span class="sc">%&gt;%</span></span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(PMID) <span class="sc">%&gt;%</span></span>
<span id="cb235-4"><a href="#cb235-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb235-5"><a href="#cb235-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1    28</code></pre>
</div>
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of the year variable:</span></span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(results_cybersex2<span class="sc">$</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   2007    2015    2018    2017    2020    2023 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of publications per year:</span></span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a>cybersex_hist<span class="ot">&lt;-</span> <span class="fu">hist</span>(results_cybersex2<span class="sc">$</span>Year,</span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1960</span>,<span class="dv">2023</span>),</span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="dv">30</span>,</span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">main =</span> <span class="st">"Papers published per year on Cybersex Addiction (PubMed)"</span>,</span>
<span id="cb239-6"><a href="#cb239-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlab =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PubMed-Article-Extraction-Using-rentrez_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of separate journals:</span></span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a>results_cybersex2 <span class="sc">%&gt;%</span> </span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb240-4"><a href="#cb240-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb240-5"><a href="#cb240-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 1
   Journal_name_short                  
   &lt;chr&gt;                               
 1 Addict Behav                        
 2 Arch Sex Behav                      
 3 Clin Psychol Rev                    
 4 Cureus                              
 5 Cyberpsychol Behav Soc Netw         
 6 Front Psychiatry                    
 7 Front Psychol                       
 8 J Addict Dis                        
 9 J Behav Addict                      
10 J Sex Marital Ther                  
11 JMIR Ment Health                    
12 Psychiatr Clin North Am             
13 Psychol Addict Behav                
14 Taehan Kanho Hakhoe Chi             
15 Zh Nevrol Psikhiatr Im S S Korsakova</code></pre>
</div>
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Most popular journals:</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a>results_cybersex2 <span class="sc">%&gt;%</span> </span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb242-6"><a href="#cb242-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb242-7"><a href="#cb242-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb242-8"><a href="#cb242-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 2
   Journal_name_short                       n
   &lt;chr&gt;                                &lt;int&gt;
 1 J Behav Addict                           6
 2 Addict Behav                             3
 3 Cyberpsychol Behav Soc Netw              3
 4 J Sex Marital Ther                       3
 5 Front Psychol                            2
 6 Psychol Addict Behav                     2
 7 Arch Sex Behav                           1
 8 Clin Psychol Rev                         1
 9 Cureus                                   1
10 Front Psychiatry                         1
11 J Addict Dis                             1
12 JMIR Ment Health                         1
13 Psychiatr Clin North Am                  1
14 Taehan Kanho Hakhoe Chi                  1
15 Zh Nevrol Psikhiatr Im S S Korsakova     1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_cybersex2) # Visually inspect results</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now I need to add a label to all of these studies to signify that they Were returned from the cybersex search so that we can distinguish them from other studies when we later joined the datasets together:</span></span>
<span id="cb244-4"><a href="#cb244-4" aria-hidden="true" tabindex="-1"></a>Label <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"cybersex"</span>, <span class="at">times =</span> <span class="fu">count</span>(results_cybersex2))</span>
<span id="cb244-5"><a href="#cb244-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-6"><a href="#cb244-6" aria-hidden="true" tabindex="-1"></a>results_cybersex_final <span class="ot">&lt;-</span> results_cybersex2 <span class="sc">%&gt;%</span> <span class="fu">bind_cols</span>(Label) <span class="sc">%&gt;%</span></span>
<span id="cb244-7"><a href="#cb244-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Label =</span> <span class="dv">14</span>) <span class="sc">%&gt;%</span></span>
<span id="cb244-8"><a href="#cb244-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...14`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 28 × 14
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 How the Ri… 3.73e7  2023 Jun   10.7… "On Jan… Irizarry, Ricar… "Psychiatry, …
 2 [Behaviora… 3.67e7  2023 &lt;NA&gt;  10.1… "The re… Egorov, A Y      "Sechenov Ins…
 3 Global pre… 3.52e7  2022 Mar   S027… "The pr… Meng, Shi-Qiu; … "National Ins…
 4 Electrophy… 3.48e7  2021 Nov   10.1… "BACKGR… Wang, Jianfeng;…  &lt;NA&gt;         
 5 Self-Perce… 3.48e7  2022 Feb   10.1… "Online… Mennig, Manuel;… "Department o…
 6 The Impact… 3.43e7  2021 &lt;NA&gt;  10.3… "Backgr… Markert, Charlo… "Department o…
 7 Cybersex a… 3.34e7  2021 Jul-… 10.1… "BACKGR… Skryabin, Valen… "Moscow Resea…
 8 Event-rela… 3.29e7  2020 Oct   10.1… "BACKGR… Wang, Jianfeng;…  &lt;NA&gt;         
 9 Contributi… 3.15e7  2019 Sep   10.1… "BACKGR… Brahim, Farah B… "Department o…
10 Sexual Des… 3.07e7  2019 Jan   10.2… "BACKGR… Varfi, Nektaria… "Geneva Unive…
# ℹ 18 more rows
# ℹ 6 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;, Label &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_cybersex_final)</span></span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the cleaned results</span></span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_cybersex_final, <span class="st">"Data extraction/cybersex_data_cleaned.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="sex-addiction" class="level2">
<h2 class="anchored" data-anchor-id="sex-addiction">Sex addiction</h2>
<section id="extract-studies-and-perform-a-basic-clean-of-dataset-10" class="level4">
<h4 class="anchored" data-anchor-id="extract-studies-and-perform-a-basic-clean-of-dataset-10">Extract studies and perform a basic clean of dataset</h4>
<p><strong>Notes pre-search:</strong> MeSH terms: None available.</p>
<p><strong>Actual search used:</strong> “sexual addiction”[Title/Abstract] OR “sex addiction”[Title/Abstract]</p>
<ul>
<li>Originally included “sex dependence” as a search term, but it didn’t return anything related to sexual addiction and returned lots of studies that said the expression/presence of something e.g., a disease) was dependent on sex.</li>
</ul>
<p><strong>Manual search results:</strong> <a href="">link</a></p>
<p><strong>Notes post-search:</strong> # The manual search of results revealed that there were multiple irrelevant studies returned here. This is because there were several studies that listed sex and then addiction as variables of interest like “…, sex, addiction, …”. There is also one book called “Drug Addiction”. Here’s the full list of irrelevant studies that will need to be removed:</p>
<ul>
<li>The SCOPE study: health-care consumption related to patients with chronic obstructive pulmonary disease in France</li>
<li>Correlation of addictive factors, human papilloma virus infection and histopathology of oral submucous fibrosis</li>
<li>Serum malondialdehyde level: Surrogate stress marker in the Sikkimese diabetics</li>
<li>Design in topographical space of peptide and peptidomimetic ligands that affect behavior. A chemist’s glimpse at the mind–body problem</li>
<li>Tricyclic antidepressants intoxication in Tehran, Iran: epidemiology and associated factors</li>
<li>Biochemical aspects of effects of mesenchymal stem cell treatment in chronic wounds progressive healing</li>
<li>Drug Addiction</li>
</ul>
<div class="sourceCode" id="cb248"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb248-2"><a href="#cb248-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  Clean environment:</span></span>
<span id="cb248-3"><a href="#cb248-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb248-4"><a href="#cb248-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-5"><a href="#cb248-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the search term:</span></span>
<span id="cb248-6"><a href="#cb248-6" aria-hidden="true" tabindex="-1"></a>search_term_sex <span class="ot">&lt;-</span> <span class="st">'"sexual addiction"[Title/Abstract] OR "sex addiction"[Title/Abstract]'</span></span>
<span id="cb248-7"><a href="#cb248-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-8"><a href="#cb248-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use entrez_search to get the IDs of the articles:</span></span>
<span id="cb248-9"><a href="#cb248-9" aria-hidden="true" tabindex="-1"></a>search_results_sex <span class="ot">&lt;-</span> <span class="fu">entrez_search</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">term=</span>search_term_sex, <span class="at">retmax=</span><span class="dv">20000</span>)</span>
<span id="cb248-10"><a href="#cb248-10" aria-hidden="true" tabindex="-1"></a>id_list_sex <span class="ot">&lt;-</span> search_results_sex<span class="sc">$</span>ids</span>
<span id="cb248-11"><a href="#cb248-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-12"><a href="#cb248-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Split id list into chunks of 100 for chunk/batches:</span></span>
<span id="cb248-13"><a href="#cb248-13" aria-hidden="true" tabindex="-1"></a>chunks <span class="ot">&lt;-</span> <span class="fu">split</span>(id_list_sex, <span class="fu">ceiling</span>(<span class="fu">seq_along</span>(id_list_sex)<span class="sc">/</span><span class="dv">100</span>))</span>
<span id="cb248-14"><a href="#cb248-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-15"><a href="#cb248-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch details for each chunk of articles:</span></span>
<span id="cb248-16"><a href="#cb248-16" aria-hidden="true" tabindex="-1"></a>article_details_sex <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(chunks, <span class="cf">function</span>(ids) {</span>
<span id="cb248-17"><a href="#cb248-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fetch details of the articles:</span></span>
<span id="cb248-18"><a href="#cb248-18" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">entrez_fetch</span>(<span class="at">db=</span><span class="st">"pubmed"</span>, <span class="at">id=</span>ids, <span class="at">rettype=</span><span class="st">"medline"</span>, <span class="at">retmode=</span><span class="st">"text"</span>)</span>
<span id="cb248-19"><a href="#cb248-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb248-20"><a href="#cb248-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Split the articles into individual articles:</span></span>
<span id="cb248-21"><a href="#cb248-21" aria-hidden="true" tabindex="-1"></a>  articles <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(articles, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb248-22"><a href="#cb248-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb248-23"><a href="#cb248-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Process each article:</span></span>
<span id="cb248-24"><a href="#cb248-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(articles, <span class="cf">function</span>(article) {</span>
<span id="cb248-25"><a href="#cb248-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Split the article into lines:</span></span>
<span id="cb248-26"><a href="#cb248-26" aria-hidden="true" tabindex="-1"></a>    lines <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(article, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb248-27"><a href="#cb248-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb248-28"><a href="#cb248-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the details we're interested in:</span></span>
<span id="cb248-29"><a href="#cb248-29" aria-hidden="true" tabindex="-1"></a>    details_sex <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb248-30"><a href="#cb248-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">PMID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^PMID"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb248-31"><a href="#cb248-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">DP =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^DP"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb248-32"><a href="#cb248-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">TI =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TI"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb248-33"><a href="#cb248-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">LID =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LID"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb248-34"><a href="#cb248-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">AB =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AB"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb248-35"><a href="#cb248-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">FAU =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^FAU"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb248-36"><a href="#cb248-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">AD =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^AD"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb248-37"><a href="#cb248-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">LA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^LA"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb248-38"><a href="#cb248-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">PT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^PT"</span>, lines)], <span class="at">collapse=</span><span class="st">"; "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb248-39"><a href="#cb248-39" aria-hidden="true" tabindex="-1"></a>      <span class="at">TA =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^TA"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb248-40"><a href="#cb248-40" aria-hidden="true" tabindex="-1"></a>      <span class="at">COIS =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines))) <span class="fu">paste</span>(lines[<span class="fu">grepl</span>(<span class="st">"^COIS"</span>, lines)], <span class="at">collapse=</span><span class="st">" "</span>) <span class="cf">else</span> <span class="cn">NA</span>,</span>
<span id="cb248-41"><a href="#cb248-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">JT =</span> <span class="cf">if</span> (<span class="fu">any</span>(<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines))) lines[<span class="fu">grepl</span>(<span class="st">"^JT"</span>, lines)] <span class="cf">else</span> <span class="cn">NA</span></span>
<span id="cb248-42"><a href="#cb248-42" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb248-43"><a href="#cb248-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb248-44"><a href="#cb248-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert the list of details into a one-row data frame:</span></span>
<span id="cb248-45"><a href="#cb248-45" aria-hidden="true" tabindex="-1"></a>    details_df_sex <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(details_sex)</span>
<span id="cb248-46"><a href="#cb248-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb248-47"><a href="#cb248-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(details_df_sex)</span>
<span id="cb248-48"><a href="#cb248-48" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb248-49"><a href="#cb248-49" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb248-50"><a href="#cb248-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-51"><a href="#cb248-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the results:</span></span>
<span id="cb248-52"><a href="#cb248-52" aria-hidden="true" tabindex="-1"></a>article_details_sex <span class="sc">%&gt;%</span></span>
<span id="cb248-53"><a href="#cb248-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb248-54"><a href="#cb248-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb248-55"><a href="#cb248-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-56"><a href="#cb248-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's remove the identifiers at the beginning of each data point:</span></span>
<span id="cb248-57"><a href="#cb248-57" aria-hidden="true" tabindex="-1"></a>rep_str <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'PMID- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'DP  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TI  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LID - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AB  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb248-58"><a href="#cb248-58" aria-hidden="true" tabindex="-1"></a>             <span class="st">'FAU - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'AD  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'LA  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'PT  - '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'TA  - '</span> <span class="ot">=</span> <span class="st">''</span>,</span>
<span id="cb248-59"><a href="#cb248-59" aria-hidden="true" tabindex="-1"></a>             <span class="st">'COIS- '</span> <span class="ot">=</span> <span class="st">''</span>, <span class="st">'JT  - '</span> <span class="ot">=</span> <span class="st">''</span>)</span>
<span id="cb248-60"><a href="#cb248-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-61"><a href="#cb248-61" aria-hidden="true" tabindex="-1"></a>results_sex <span class="ot">&lt;-</span> article_details_sex <span class="sc">%&gt;%</span></span>
<span id="cb248-62"><a href="#cb248-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span><span class="fu">str_replace_all</span>(., rep_str))) <span class="sc">%&gt;%</span> <span class="co"># Remove identifiers</span></span>
<span id="cb248-63"><a href="#cb248-63" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now separate the date year and month/day info:</span></span>
<span id="cb248-64"><a href="#cb248-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(DP, <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Month"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st"> "</span>) <span class="sc">%&gt;%</span></span>
<span id="cb248-65"><a href="#cb248-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.numeric</span>(Year)) <span class="sc">%&gt;%</span> <span class="co"># Convert Year to numeric</span></span>
<span id="cb248-66"><a href="#cb248-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="co"># Let's also provide more descriptive names for each of the columns</span></span>
<span id="cb248-67"><a href="#cb248-67" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Title"</span> <span class="ot">=</span> <span class="st">"TI"</span>, </span>
<span id="cb248-68"><a href="#cb248-68" aria-hidden="true" tabindex="-1"></a>         <span class="st">"DOI"</span> <span class="ot">=</span> <span class="st">"LID"</span>, </span>
<span id="cb248-69"><a href="#cb248-69" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Abstract"</span> <span class="ot">=</span> <span class="st">"AB"</span>, </span>
<span id="cb248-70"><a href="#cb248-70" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Full_Author_Name"</span> <span class="ot">=</span> <span class="st">"FAU"</span>, </span>
<span id="cb248-71"><a href="#cb248-71" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Author_Address"</span> <span class="ot">=</span> <span class="st">"AD"</span>, </span>
<span id="cb248-72"><a href="#cb248-72" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Language"</span> <span class="ot">=</span> <span class="st">"LA"</span>, </span>
<span id="cb248-73"><a href="#cb248-73" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Publication_Type"</span> <span class="ot">=</span> <span class="st">"PT"</span>, </span>
<span id="cb248-74"><a href="#cb248-74" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_name_short"</span> <span class="ot">=</span> <span class="st">"TA"</span>,</span>
<span id="cb248-75"><a href="#cb248-75" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Conflict_of_Interest_Statement"</span> <span class="ot">=</span> <span class="st">"COIS"</span>,</span>
<span id="cb248-76"><a href="#cb248-76" aria-hidden="true" tabindex="-1"></a>         <span class="st">"Journal_Title"</span> <span class="ot">=</span> <span class="st">"JT"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb248-77"><a href="#cb248-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span>
<span id="cb248-78"><a href="#cb248-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-79"><a href="#cb248-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the initial results before proceeding so we can't lose them!</span></span>
<span id="cb248-80"><a href="#cb248-80" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_sex, <span class="st">"Data extraction/sex_data.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb248-81"><a href="#cb248-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-82"><a href="#cb248-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="extract-full-title-using-rvest-10" class="level4">
<h4 class="anchored" data-anchor-id="extract-full-title-using-rvest-10">Extract full title using rvest</h4>
<p>Again, we’re going to use the <code>rvest</code> package to scrape the titles returned from the manual search in PubMed, then join the two datasets using the PMID, retaining the title from this new dataset.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add search URL:</span></span>
<span id="cb249-3"><a href="#cb249-3" aria-hidden="true" tabindex="-1"></a>url_sex_rvest <span class="ot">&lt;-</span> <span class="st">"https://pubmed.ncbi.nlm.nih.gov/?term=%22sexual+addiction%22%5BTitle%2FAbstract%5D+OR+%22sex+addiction%22%5BTitle%2FAbstract%5D&amp;size=200"</span> <span class="co"># 275 results returned on 19/08/2023</span></span>
<span id="cb249-4"><a href="#cb249-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-5"><a href="#cb249-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and parse the webpage</span></span>
<span id="cb249-6"><a href="#cb249-6" aria-hidden="true" tabindex="-1"></a>webpage_sex_rvest <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_sex_rvest)</span>
<span id="cb249-7"><a href="#cb249-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-8"><a href="#cb249-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the total number of search results</span></span>
<span id="cb249-9"><a href="#cb249-9" aria-hidden="true" tabindex="-1"></a>results_count_sex <span class="ot">&lt;-</span> webpage_sex_rvest <span class="sc">%&gt;%</span></span>
<span id="cb249-10"><a href="#cb249-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_node</span>(<span class="st">".results-amount .value"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb249-11"><a href="#cb249-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb249-12"><a href="#cb249-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="st">","</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb249-13"><a href="#cb249-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb249-14"><a href="#cb249-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-15"><a href="#cb249-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the number of pages</span></span>
<span id="cb249-16"><a href="#cb249-16" aria-hidden="true" tabindex="-1"></a>results_per_page_sex <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb249-17"><a href="#cb249-17" aria-hidden="true" tabindex="-1"></a>total_pages_sex <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(results_count_sex[<span class="dv">1</span>] <span class="sc">/</span> results_per_page_sex)</span>
<span id="cb249-18"><a href="#cb249-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results_count_sex and total_pages_sex</span></span>
<span id="cb249-19"><a href="#cb249-19" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(results_count_sex)</span>
<span id="cb249-20"><a href="#cb249-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(total_pages_sex)</span>
<span id="cb249-21"><a href="#cb249-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-22"><a href="#cb249-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-23"><a href="#cb249-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty data frame</span></span>
<span id="cb249-24"><a href="#cb249-24" aria-hidden="true" tabindex="-1"></a>results_sex_rvest <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb249-25"><a href="#cb249-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-26"><a href="#cb249-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each page and scrape the data</span></span>
<span id="cb249-27"><a href="#cb249-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (page <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span>(total_pages_sex <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb249-28"><a href="#cb249-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update the page parameter in the URL for the current page</span></span>
<span id="cb249-29"><a href="#cb249-29" aria-hidden="true" tabindex="-1"></a>  current_url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(url_sex_rvest, <span class="st">"&amp;page="</span>, page <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb249-30"><a href="#cb249-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb249-31"><a href="#cb249-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read and parse the current webpage</span></span>
<span id="cb249-32"><a href="#cb249-32" aria-hidden="true" tabindex="-1"></a>  current_page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(current_url)</span>
<span id="cb249-33"><a href="#cb249-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb249-34"><a href="#cb249-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract title</span></span>
<span id="cb249-35"><a href="#cb249-35" aria-hidden="true" tabindex="-1"></a>  Title <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb249-36"><a href="#cb249-36" aria-hidden="true" tabindex="-1"></a>    current_page <span class="sc">%&gt;%</span></span>
<span id="cb249-37"><a href="#cb249-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_nodes</span>(<span class="st">".docsum-title"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb249-38"><a href="#cb249-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb249-39"><a href="#cb249-39" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb249-40"><a href="#cb249-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Error extracting title info on page"</span>, page <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb249-41"><a href="#cb249-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="fu">length</span>(Title))  <span class="co"># Return a vector of NAs with the same length as Title</span></span>
<span id="cb249-42"><a href="#cb249-42" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb249-43"><a href="#cb249-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb249-44"><a href="#cb249-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract the PMID</span></span>
<span id="cb249-45"><a href="#cb249-45" aria-hidden="true" tabindex="-1"></a>  pmid <span class="ot">&lt;-</span> current_page <span class="sc">%&gt;%</span></span>
<span id="cb249-46"><a href="#cb249-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".docsum-pmid"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb249-47"><a href="#cb249-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb249-48"><a href="#cb249-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb249-49"><a href="#cb249-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create a data frame with the extracted data</span></span>
<span id="cb249-50"><a href="#cb249-50" aria-hidden="true" tabindex="-1"></a>  current_results_sex <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Title =</span> Title,</span>
<span id="cb249-51"><a href="#cb249-51" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">PMID =</span> pmid)</span>
<span id="cb249-52"><a href="#cb249-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb249-53"><a href="#cb249-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the current results with the previous results</span></span>
<span id="cb249-54"><a href="#cb249-54" aria-hidden="true" tabindex="-1"></a>  results_sex_rvest <span class="ot">&lt;-</span> <span class="fu">rbind</span>(results_sex_rvest, current_results_sex)</span>
<span id="cb249-55"><a href="#cb249-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb249-56"><a href="#cb249-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Introduce a delay to avoid overloading the server</span></span>
<span id="cb249-57"><a href="#cb249-57" aria-hidden="true" tabindex="-1"></a>  sleep_time <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>, <span class="at">min =</span> <span class="dv">5</span>, <span class="at">max =</span> <span class="dv">15</span>)</span>
<span id="cb249-58"><a href="#cb249-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Sys.sleep</span>(sleep_time)</span>
<span id="cb249-59"><a href="#cb249-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb249-60"><a href="#cb249-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-61"><a href="#cb249-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the extracted data</span></span>
<span id="cb249-62"><a href="#cb249-62" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">as_tibble</span>(results_sex_rvest))</span>
<span id="cb249-63"><a href="#cb249-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-64"><a href="#cb249-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-65"><a href="#cb249-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the titles before proceeding so we can't lose them!</span></span>
<span id="cb249-66"><a href="#cb249-66" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_sex_rvest, <span class="st">"Data extraction/sex_titles.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span>
<span id="cb249-67"><a href="#cb249-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="refine-dataset-10" class="level4">
<h4 class="anchored" data-anchor-id="refine-dataset-10">Refine dataset</h4>
<p>Now we need to identify and remove any duplicates, irrelevant studies, or entries with any other issues (e.g., those that turn out to be books)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in first dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb250-2"><a href="#cb250-2" aria-hidden="true" tabindex="-1"></a>results_sex<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/sex_data.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb250-3"><a href="#cb250-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb250-4"><a href="#cb250-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-5"><a href="#cb250-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load in second dataset in case environment clean on knit (above sections not executed for render):</span></span>
<span id="cb250-6"><a href="#cb250-6" aria-hidden="true" tabindex="-1"></a>results_sex_rvest<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Data extraction/sex_titles.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb250-7"><a href="#cb250-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb250-8"><a href="#cb250-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-9"><a href="#cb250-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge our two datasets</span></span>
<span id="cb250-10"><a href="#cb250-10" aria-hidden="true" tabindex="-1"></a>results_sex2 <span class="ot">&lt;-</span> results_sex <span class="sc">%&gt;%</span></span>
<span id="cb250-11"><a href="#cb250-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb250-12"><a href="#cb250-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"Title_trunc"</span> <span class="ot">=</span> <span class="st">"Title"</span>) <span class="sc">%&gt;%</span> <span class="co"># Designate the truncated title from our primary dataset so we can remove it once we get the full title</span></span>
<span id="cb250-13"><a href="#cb250-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(results_sex_rvest, <span class="at">by =</span> <span class="st">"PMID"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb250-14"><a href="#cb250-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Title_trunc) <span class="sc">%&gt;%</span> <span class="co"># Bye truncated title</span></span>
<span id="cb250-15"><a href="#cb250-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(Title) <span class="sc">%&gt;%</span> <span class="co"># Place full title first for ease</span></span>
<span id="cb250-16"><a href="#cb250-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 275 × 13
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 Decision m… 3.76e7  2023 &lt;NA&gt;  10.3… "INTROD… Muller, Silke M… "Department o…
 2 Mapping th… 3.75e7  2023 Jul   S016… "Contem… Hunt, Brian; Za… "Institute fo…
 3 The World … 3.75e7  2022 Dec   10.1… "OBJECT… Turner, Daniel;… "Department o…
 4 Should pro… 3.75e7  2023 Dec   10.1… "Despit… Pistre, Natasha… "Department o…
 5 Measuring … 3.75e7  2023 Jul   10.1… "BACKGR… Miele, Cecile; … "Laboratory Q…
 6 Fetal Fant… 3.75e7  2023 Jul   10.1… "This a… Erdman, Andrew L "LCSW, 235 We…
 7 Personalit… 3.74e7  2023 Jun   10.1… "BACKGR… Engel, Jannis; … "Department o…
 8 How the Ri… 3.73e7  2023 Jun   10.7… "On Jan… Irizarry, Ricar… "Psychiatry, …
 9 Childhood … 3.72e7  2023 Jan   10.1… "Object… Zashchirinskaia… "Saint-Peters…
10 Frequency … 3.71e7  2023 &lt;NA&gt;  10.1… "INTROD… Schreck, Benoit… "Nantes Unive…
# ℹ 265 more rows
# ℹ 5 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check results:</span></span>
<span id="cb252-2"><a href="#cb252-2" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_sex2)</span></span>
<span id="cb252-3"><a href="#cb252-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-4"><a href="#cb252-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on title:</span></span>
<span id="cb252-5"><a href="#cb252-5" aria-hidden="true" tabindex="-1"></a>results_sex2 <span class="sc">%&gt;%</span></span>
<span id="cb252-6"><a href="#cb252-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Title) <span class="sc">%&gt;%</span></span>
<span id="cb252-7"><a href="#cb252-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb252-8"><a href="#cb252-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># n = 2 dupes (August 2023)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1   273</code></pre>
</div>
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect duplicates:</span></span>
<span id="cb254-2"><a href="#cb254-2" aria-hidden="true" tabindex="-1"></a><span class="co"># results_sex2 %&gt;%</span></span>
<span id="cb254-3"><a href="#cb254-3" aria-hidden="true" tabindex="-1"></a><span class="co">#    group_by(Title) %&gt;% </span></span>
<span id="cb254-4"><a href="#cb254-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(n()&gt;1) %&gt;%  </span></span>
<span id="cb254-5"><a href="#cb254-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   View()  #  both duplicates appear to be genuine duplicates. Unsure why they are duplicated in pubmed, but there are some very minor differences in author initials  which may explain it.</span></span>
<span id="cb254-6"><a href="#cb254-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb254-7"><a href="#cb254-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number with basic duplication removal based on PMID:</span></span>
<span id="cb254-8"><a href="#cb254-8" aria-hidden="true" tabindex="-1"></a>results_sex2 <span class="sc">%&gt;%</span></span>
<span id="cb254-9"><a href="#cb254-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(PMID) <span class="sc">%&gt;%</span></span>
<span id="cb254-10"><a href="#cb254-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb254-11"><a href="#cb254-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="co"># None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1   275</code></pre>
</div>
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove duplicates and irrelevant studies identified manually:</span></span>
<span id="cb256-2"><a href="#cb256-2" aria-hidden="true" tabindex="-1"></a>results_sex3 <span class="ot">&lt;-</span> results_sex2 <span class="sc">%&gt;%</span></span>
<span id="cb256-3"><a href="#cb256-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Title, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb256-4"><a href="#cb256-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb256-5"><a href="#cb256-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>(Title <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb256-6"><a href="#cb256-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">"The SCOPE study: health-care consumption related to patients with chronic obstructive pulmonary disease in France."</span>,</span>
<span id="cb256-7"><a href="#cb256-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Correlation of addictive factors, human papilloma virus infection and histopathology of oral submucous fibrosis."</span>,</span>
<span id="cb256-8"><a href="#cb256-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Serum malondialdehyde level: Surrogate stress marker in the Sikkimese diabetics."</span>,</span>
<span id="cb256-9"><a href="#cb256-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Design in topographical space of peptide and peptidomimetic ligands that affect behavior. A chemist's glimpse at the mind--body problem."</span>,</span>
<span id="cb256-10"><a href="#cb256-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Tricyclic antidepressants intoxication in Tehran, Iran: epidemiology and associated factors."</span>,</span>
<span id="cb256-11"><a href="#cb256-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Biochemical aspects of effects of mesenchymal stem cell treatment in chronic wounds progressive healing."</span>,</span>
<span id="cb256-12"><a href="#cb256-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Drug Addiction."</span></span>
<span id="cb256-13"><a href="#cb256-13" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb256-14"><a href="#cb256-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb256-15"><a href="#cb256-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-16"><a href="#cb256-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-17"><a href="#cb256-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of the year variable:</span></span>
<span id="cb256-18"><a href="#cb256-18" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(results_sex3<span class="sc">$</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1987    2010    2016    2014    2020    2023 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of publications per year:</span></span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a>sex_hist<span class="ot">&lt;-</span> <span class="fu">hist</span>(results_sex3<span class="sc">$</span>Year,</span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">1960</span>,<span class="dv">2023</span>),</span>
<span id="cb258-4"><a href="#cb258-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="dv">30</span>,</span>
<span id="cb258-5"><a href="#cb258-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">main =</span> <span class="st">"Papers published per year on Sex Addiction (PubMed)"</span>,</span>
<span id="cb258-6"><a href="#cb258-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">xlab =</span> <span class="st">"Year"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PubMed-Article-Extraction-Using-rentrez_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of separate journals:</span></span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true" tabindex="-1"></a>results_sex2 <span class="sc">%&gt;%</span> </span>
<span id="cb259-3"><a href="#cb259-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb259-4"><a href="#cb259-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb259-5"><a href="#cb259-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 143 × 1
   Journal_name_short     
   &lt;chr&gt;                  
 1 AIDS Patient Care STDS 
 2 Acc Chem Res           
 3 Acta Med Hist Adriat   
 4 Acta Pharm Sin B       
 5 Addict Behav           
 6 Addict Behav Rep       
 7 Addiction              
 8 Adicciones             
 9 Adv Exp Med Biol       
10 Am Fam Physician       
11 Am J Drug Alcohol Abuse
12 Am J Psychoanal        
13 Ann Endocrinol (Paris) 
14 Arch Ital Urol Androl  
15 Arch Sex Behav         
16 Asian J Psychiatr      
17 BMC Psychiatry         
18 BMJ Case Rep           
19 Biochem Pharmacol      
20 Brain Nerve            
# ℹ 123 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb261"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Most popular journals:</span></span>
<span id="cb261-2"><a href="#cb261-2" aria-hidden="true" tabindex="-1"></a>results_sex2 <span class="sc">%&gt;%</span> </span>
<span id="cb261-3"><a href="#cb261-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Journal_name_short) <span class="sc">%&gt;%</span> </span>
<span id="cb261-4"><a href="#cb261-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb261-5"><a href="#cb261-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb261-6"><a href="#cb261-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb261-7"><a href="#cb261-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb261-8"><a href="#cb261-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 143 × 2
   Journal_name_short                  n
   &lt;chr&gt;                           &lt;int&gt;
 1 J Behav Addict                     25
 2 J Sex Med                          17
 3 J Sex Marital Ther                 13
 4 Arch Sex Behav                      9
 5 Cureus                              7
 6 Int J Environ Res Public Health     5
 7 J Addict Med                        5
 8 J Sex Res                           5
 9 Addiction                           4
10 Encephale                           4
11 Front Psychiatry                    4
12 Addict Behav Rep                    3
13 BMC Psychiatry                      3
14 Braz J Psychiatry                   3
15 CNS Spectr                          3
16 Clin Psychol Rev                    3
17 Front Psychol                       3
18 Indian J Psychiatry                 3
19 J Clin Med                          3
20 J Psychoactive Drugs                3
# ℹ 123 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb263"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_sex2) # Visually inspect results</span></span>
<span id="cb263-2"><a href="#cb263-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-3"><a href="#cb263-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Now I need to add a label to all of these studies to signify that they Were returned from the sex search so that we can distinguish them from other studies when we later joined the datasets together:</span></span>
<span id="cb263-4"><a href="#cb263-4" aria-hidden="true" tabindex="-1"></a>Label <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"sex"</span>, <span class="at">times =</span> <span class="fu">count</span>(results_sex2))</span>
<span id="cb263-5"><a href="#cb263-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-6"><a href="#cb263-6" aria-hidden="true" tabindex="-1"></a>results_sex_final <span class="ot">&lt;-</span> results_sex2 <span class="sc">%&gt;%</span> <span class="fu">bind_cols</span>(Label) <span class="sc">%&gt;%</span></span>
<span id="cb263-7"><a href="#cb263-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Label =</span> <span class="dv">14</span>) <span class="sc">%&gt;%</span></span>
<span id="cb263-8"><a href="#cb263-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
• `` -&gt; `...14`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 275 × 14
   Title         PMID  Year Month DOI   Abstract Full_Author_Name Author_Address
   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;            &lt;chr&gt;         
 1 Decision m… 3.76e7  2023 &lt;NA&gt;  10.3… "INTROD… Muller, Silke M… "Department o…
 2 Mapping th… 3.75e7  2023 Jul   S016… "Contem… Hunt, Brian; Za… "Institute fo…
 3 The World … 3.75e7  2022 Dec   10.1… "OBJECT… Turner, Daniel;… "Department o…
 4 Should pro… 3.75e7  2023 Dec   10.1… "Despit… Pistre, Natasha… "Department o…
 5 Measuring … 3.75e7  2023 Jul   10.1… "BACKGR… Miele, Cecile; … "Laboratory Q…
 6 Fetal Fant… 3.75e7  2023 Jul   10.1… "This a… Erdman, Andrew L "LCSW, 235 We…
 7 Personalit… 3.74e7  2023 Jun   10.1… "BACKGR… Engel, Jannis; … "Department o…
 8 How the Ri… 3.73e7  2023 Jun   10.7… "On Jan… Irizarry, Ricar… "Psychiatry, …
 9 Childhood … 3.72e7  2023 Jan   10.1… "Object… Zashchirinskaia… "Saint-Peters…
10 Frequency … 3.71e7  2023 &lt;NA&gt;  10.1… "INTROD… Schreck, Benoit… "Nantes Unive…
# ℹ 265 more rows
# ℹ 6 more variables: Language &lt;chr&gt;, Publication_Type &lt;chr&gt;,
#   Journal_name_short &lt;chr&gt;, Conflict_of_Interest_Statement &lt;chr&gt;,
#   Journal_Title &lt;chr&gt;, Label &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(results_sex_final)</span></span>
<span id="cb266-2"><a href="#cb266-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now save the cleaned results</span></span>
<span id="cb266-3"><a href="#cb266-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(results_sex_final, <span class="st">"Data extraction/sex_data_cleaned.csv"</span>, <span class="at">row.names=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>